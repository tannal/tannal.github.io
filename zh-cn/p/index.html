<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="反对排中律的逻辑影响 Exported on 6/8/2025 at 07:37:49 GMT+8 from Cursor (1.0.0)\nUser\n反对了排中律，那同一律和矛盾律是不是也被否定了？\nCursor\n不一定。否定排中律（Law of Excluded Middle）并不必然导致否定同一律（Law of Identity）和矛盾律（Law of Non-Contradiction）。这三条定律是经典逻辑中的三大基本定律，但它们各自处理的是不同的逻辑方面：\n排中律（Law of Excluded Middle）：一个命题要么是真的，要么是假的，没有第三种可能性。例如，“要么P是真的，要么非P是真的。”（P ∨ ¬P）\n矛盾律（Law of Non-Contradiction）：一个命题不能同时是真的和假的。例如，“P不能同时是真的和非P是真的。”（¬(P ∧ ¬P)）\n同一律（Law of Identity）：事物总是它自身。例如，“A就是A。”（A = A）\n为什么否定排中律不必然否定其他两律？\n排中律与矛盾律： 在某些非经典逻辑系统中，例如直觉主义逻辑（Intuitionistic Logic），排中律是被否定的。直觉主义逻辑认为，一个命题只有在被构造性地证明是真的或假的之后，才能被认为是真的或假的，它不承认“非真即假”的绝对性。然而，直觉主义逻辑仍然严格遵守矛盾律，即一个命题不能同时是真的和假的。它只是允许某些命题既不是真的也不是假的（因为尚未被证明）。 因此，你可以否定排中律，但依然坚持矛盾律。\n排中律与同一律： 同一律是关于事物自我同一性的基本原则，它比排中律和矛盾律更基础，更像是关于概念和指称一致性的约定。即使在否定排中律的逻辑系统中，概念和对象依然需要保持其自身的同一性，否则整个逻辑系统将无法运作。例如，在直觉主义逻辑中，一个数仍然是它自身，一个概念依然指代同一个事物。 因此，否定排中律通常不影响对同一律的接受。\n总结：\n否定排中律的逻辑系统是存在的（如直觉主义逻辑）。 这些系统通常依然保留矛盾律（不允许同时真和假）。 同一律作为最基础的关于事物或概念自我同一性的原则，几乎在所有有意义的逻辑系统中都被保留。 所以，虽然三者都是经典逻辑的基石，但它们并非“同生同死”。排中律的舍弃在一些非经典逻辑中是常见的，但这并不意味着同一律和矛盾律也必须被否定。实际上，矛盾律通常被认为是所有逻辑中最基础和最不可或缺的原则之一。\nUser\n超越系统只有两个定律\n我与自己相似，我与别人不相似 一个命题可以同时是真的或者假的 Cursor u 这是一个非常有趣的“超越系统”的设定！让我们来分析一下这两条定律，以及它们如何与经典逻辑中的同一律、矛盾律和排中律相联系：\n超越系统定律1：“我与自己相似，我与别人不相似”\n“我与自己相似” (I am similar to myself)： 这一部分与**同一律（Law of Identity）**高度契合。同一律的核心思想是“A是A”，即事物是其自身，保持其自身的同一性。你的这条定律明确地肯定了自我同一性。\n“我与别人不相似” (I am not similar to others)： 这一部分引入了一个“差异性”或“独特性”的原则。它强调了个体之间的区分。虽然这不是经典逻辑中的三条基本定律之一，但它在概念定义和分类中非常重要。它隐含了如果A是“我”，那么任何“别人”（B）都不是“我”，这可以看作是同一律在不同个体间的延伸应用，确保了事物的边界和区分。\n"><title></title><link rel=canonical href=https://tannal.github.io/zh-cn/p/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content><meta property='og:description' content="反对排中律的逻辑影响 Exported on 6/8/2025 at 07:37:49 GMT+8 from Cursor (1.0.0)\nUser\n反对了排中律，那同一律和矛盾律是不是也被否定了？\nCursor\n不一定。否定排中律（Law of Excluded Middle）并不必然导致否定同一律（Law of Identity）和矛盾律（Law of Non-Contradiction）。这三条定律是经典逻辑中的三大基本定律，但它们各自处理的是不同的逻辑方面：\n排中律（Law of Excluded Middle）：一个命题要么是真的，要么是假的，没有第三种可能性。例如，“要么P是真的，要么非P是真的。”（P ∨ ¬P）\n矛盾律（Law of Non-Contradiction）：一个命题不能同时是真的和假的。例如，“P不能同时是真的和非P是真的。”（¬(P ∧ ¬P)）\n同一律（Law of Identity）：事物总是它自身。例如，“A就是A。”（A = A）\n为什么否定排中律不必然否定其他两律？\n排中律与矛盾律： 在某些非经典逻辑系统中，例如直觉主义逻辑（Intuitionistic Logic），排中律是被否定的。直觉主义逻辑认为，一个命题只有在被构造性地证明是真的或假的之后，才能被认为是真的或假的，它不承认“非真即假”的绝对性。然而，直觉主义逻辑仍然严格遵守矛盾律，即一个命题不能同时是真的和假的。它只是允许某些命题既不是真的也不是假的（因为尚未被证明）。 因此，你可以否定排中律，但依然坚持矛盾律。\n排中律与同一律： 同一律是关于事物自我同一性的基本原则，它比排中律和矛盾律更基础，更像是关于概念和指称一致性的约定。即使在否定排中律的逻辑系统中，概念和对象依然需要保持其自身的同一性，否则整个逻辑系统将无法运作。例如，在直觉主义逻辑中，一个数仍然是它自身，一个概念依然指代同一个事物。 因此，否定排中律通常不影响对同一律的接受。\n总结：\n否定排中律的逻辑系统是存在的（如直觉主义逻辑）。 这些系统通常依然保留矛盾律（不允许同时真和假）。 同一律作为最基础的关于事物或概念自我同一性的原则，几乎在所有有意义的逻辑系统中都被保留。 所以，虽然三者都是经典逻辑的基石，但它们并非“同生同死”。排中律的舍弃在一些非经典逻辑中是常见的，但这并不意味着同一律和矛盾律也必须被否定。实际上，矛盾律通常被认为是所有逻辑中最基础和最不可或缺的原则之一。\nUser\n超越系统只有两个定律\n我与自己相似，我与别人不相似 一个命题可以同时是真的或者假的 Cursor u 这是一个非常有趣的“超越系统”的设定！让我们来分析一下这两条定律，以及它们如何与经典逻辑中的同一律、矛盾律和排中律相联系：\n超越系统定律1：“我与自己相似，我与别人不相似”\n“我与自己相似” (I am similar to myself)： 这一部分与**同一律（Law of Identity）**高度契合。同一律的核心思想是“A是A”，即事物是其自身，保持其自身的同一性。你的这条定律明确地肯定了自我同一性。\n“我与别人不相似” (I am not similar to others)： 这一部分引入了一个“差异性”或“独特性”的原则。它强调了个体之间的区分。虽然这不是经典逻辑中的三条基本定律之一，但它在概念定义和分类中非常重要。它隐含了如果A是“我”，那么任何“别人”（B）都不是“我”，这可以看作是同一律在不同个体间的延伸应用，确保了事物的边界和区分。\n"><meta property='og:url' content='https://tannal.github.io/zh-cn/p/'><meta property='og:site_name' content='谭盟'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta name=twitter:title content><meta name=twitter:description content="反对排中律的逻辑影响 Exported on 6/8/2025 at 07:37:49 GMT+8 from Cursor (1.0.0)\nUser\n反对了排中律，那同一律和矛盾律是不是也被否定了？\nCursor\n不一定。否定排中律（Law of Excluded Middle）并不必然导致否定同一律（Law of Identity）和矛盾律（Law of Non-Contradiction）。这三条定律是经典逻辑中的三大基本定律，但它们各自处理的是不同的逻辑方面：\n排中律（Law of Excluded Middle）：一个命题要么是真的，要么是假的，没有第三种可能性。例如，“要么P是真的，要么非P是真的。”（P ∨ ¬P）\n矛盾律（Law of Non-Contradiction）：一个命题不能同时是真的和假的。例如，“P不能同时是真的和非P是真的。”（¬(P ∧ ¬P)）\n同一律（Law of Identity）：事物总是它自身。例如，“A就是A。”（A = A）\n为什么否定排中律不必然否定其他两律？\n排中律与矛盾律： 在某些非经典逻辑系统中，例如直觉主义逻辑（Intuitionistic Logic），排中律是被否定的。直觉主义逻辑认为，一个命题只有在被构造性地证明是真的或假的之后，才能被认为是真的或假的，它不承认“非真即假”的绝对性。然而，直觉主义逻辑仍然严格遵守矛盾律，即一个命题不能同时是真的和假的。它只是允许某些命题既不是真的也不是假的（因为尚未被证明）。 因此，你可以否定排中律，但依然坚持矛盾律。\n排中律与同一律： 同一律是关于事物自我同一性的基本原则，它比排中律和矛盾律更基础，更像是关于概念和指称一致性的约定。即使在否定排中律的逻辑系统中，概念和对象依然需要保持其自身的同一性，否则整个逻辑系统将无法运作。例如，在直觉主义逻辑中，一个数仍然是它自身，一个概念依然指代同一个事物。 因此，否定排中律通常不影响对同一律的接受。\n总结：\n否定排中律的逻辑系统是存在的（如直觉主义逻辑）。 这些系统通常依然保留矛盾律（不允许同时真和假）。 同一律作为最基础的关于事物或概念自我同一性的原则，几乎在所有有意义的逻辑系统中都被保留。 所以，虽然三者都是经典逻辑的基石，但它们并非“同生同死”。排中律的舍弃在一些非经典逻辑中是常见的，但这并不意味着同一律和矛盾律也必须被否定。实际上，矛盾律通常被认为是所有逻辑中最基础和最不可或缺的原则之一。\nUser\n超越系统只有两个定律\n我与自己相似，我与别人不相似 一个命题可以同时是真的或者假的 Cursor u 这是一个非常有趣的“超越系统”的设定！让我们来分析一下这两条定律，以及它们如何与经典逻辑中的同一律、矛盾律和排中律相联系：\n超越系统定律1：“我与自己相似，我与别人不相似”\n“我与自己相似” (I am similar to myself)： 这一部分与**同一律（Law of Identity）**高度契合。同一律的核心思想是“A是A”，即事物是其自身，保持其自身的同一性。你的这条定律明确地肯定了自我同一性。\n“我与别人不相似” (I am not similar to others)： 这一部分引入了一个“差异性”或“独特性”的原则。它强调了个体之间的区分。虽然这不是经典逻辑中的三条基本定律之一，但它在概念定义和分类中非常重要。它隐含了如果A是“我”，那么任何“别人”（B）都不是“我”，这可以看作是同一律在不同个体间的延伸应用，确保了事物的边界和区分。\n"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/zh-cn/><img src=/img/avatar_hu_23460dfa2f6975f3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🤟</span></figure><div class=site-meta><h1 class=site-name><a href=/zh-cn>谭盟</a></h1><h2 class=site-description>stay hungry, stay foolish</h2></div></header><ol class=menu-social><li><a href=https://space.bilibili.com/3546751254399476 target=_blank title="B 站「起个名字叫犟驴」" rel=me><!doctype html><svg t="1712105268862" class="icon" viewBox="0 0 1024 1024" p-id="5725" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M1019.54782609 345.3106087c-3.20556522-142.1133913-127.15408696-169.36069565-127.15408696-169.36069566s-96.70121739-.53426087-222.25252174-1.60278261l91.3586087-88.15304347s14.42504348-18.16486957-10.15095652-38.46678261c-24.576-20.30191304-26.17878261-11.21947826-34.72695653-5.87686957-7.47965217 5.3426087-117.00313043 112.72904348-136.23652174 131.96243479-49.68626087.0-101.50956522-.53426087-151.73008695-.53426087h17.63060869S315.392 43.98747826 306.84382609 38.1106087s-9.61669565-14.42504348-34.72695652 5.87686956c-24.576 20.30191304-10.15095652 38.46678261-10.15095653 38.46678261l93.49565218 90.82434783c-101.50956522.0-189.12834783.53426087-229.73217392 2.13704347C-5.69878261 213.34817391 4.45217391 345.3106087 4.45217391 345.3106087s1.60278261 283.15826087.0 426.34017391c14.42504348 143.18191304 124.48278261 166.15513043 124.48278261 166.15513043s43.8093913 1.06852174 76.39930435 1.06852174c3.20556522 9.08243478 5.87686957 53.96034783 56.0973913 53.96034783 49.68626087.0 56.0973913-53.96034783 56.09739131-53.96034783s365.96869565-1.60278261 396.42156522-1.60278261c1.60278261 15.49356522 9.08243478 56.63165217 59.30295652 56.09739131 49.68626087-1.06852174 53.42608696-59.30295652 53.42608695-59.30295652s17.09634783-1.60278261 67.85113044.0c118.60591304-21.90469565 125.55130435-160.81252174 125.55130435-160.81252174s-2.13704348-285.82956522-.53426087-427.94295652zM917.504 798.36382609c0 22.43895652-17.6306087 40.60382609-39.53530435 40.60382608H156.71652174c-21.90469565.0-39.53530435-18.16486957-39.53530435-40.60382608V320.20034783c0-22.43895652 17.6306087-40.60382609 39.53530435-40.60382609h721.25217391c21.90469565.0 39.53530435 18.16486957 39.53530435 40.60382609v478.16347826z" fill="#8a8a8a" p-id="5726"/><path d="M409.088 418.816l-203.264 38.912 17.408 76.288 201.216-38.912zm109.568 202.24c-49.664 106.496-94.208 26.112-94.208 26.112l-33.28 21.504s65.536 89.6 128 21.504c73.728 68.096 130.048-22.016 130.048-22.016l-30.208-19.456c0-.512-52.736 75.776-100.352-27.648zM619.008 495.104l201.728 38.912 16.896-76.288-202.752-38.912z" fill="#8a8a8a" p-id="5727"/></svg></a></li><li><a href=https://github.com/tannal target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/megotannal target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li><li><a href=https://www.zhihu.com/people/roseduan target=_blank title=Zhihu rel=me><!doctype html><svg t="1704259577746" class="icon" viewBox="0 0 1024 1024" p-id="5040" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M570.581333 806.272h61.952L652.928 876.117333 764.074667 806.272h130.986666V230.186667h-324.48V806.272zM636.501333 292.693333h192.64V743.68h-73.898666l-73.813334 46.378667L668.032 743.808l-31.530667-.128V292.736zM515.754667 493.738667H377.429333a2999.466667 2999.466667.0 005.802667-194.56h135.338667S523.776 239.445334 495.872 240.128H261.76c9.216-34.730667 20.821333-70.613333 34.688-107.690667.0.0-63.701333.0-85.333333 57.130667C202.112 213.12 176.128 303.786667 129.877333 396.416c15.573333-1.706667 67.114667-3.114667 97.450667-58.794667 5.589333-15.616 6.656-17.621333 13.568-38.485333h76.373333c0 27.776-3.157333 177.109333-4.437333 194.474667h-138.24c-31.104.0-41.173333 62.549333-41.173333 62.549333h173.482666C295.253333 688.256 232.789333 799.573333 119.466667 887.466667c54.186667 15.488 108.202667-2.432 134.912-26.197334.0.0 60.8-55.338667 94.122666-183.381333L491.264 849.834667s20.906667-71.168-3.285333-105.856c-20.053333-23.637333-74.24-87.552-97.322667-110.72l-38.698667 30.72c11.52-36.992 18.474667-72.96 20.821334-107.690667h163.072s-.213333-62.549333-20.053334-62.549333z" p-id="5041" fill="#8a8a8a"/></svg></a></li><li><a href=https://mp.weixin.qq.com/s/hs36eiU7Zr-UdJ0YBtZgKQ target=_blank title="微信公众号 roseduan写字的地方" rel=me><!doctype html><svg t="1704259948565" class="icon" viewBox="0 0 1194 1024" p-id="5272" xmlns:xlink="http://www.w3.org/1999/xlink" width="233.203125" height="200"><path d="M728.064 535.296a35.498667 35.498667.0 11-70.912.0 35.498667 35.498667.0 0170.912.0m246.016.0a35.498667 35.498667.0 11-70.997333.0 35.498667 35.498667.0 0170.997333.0" fill="#8a8a8a" p-id="5273"/><path d="M902.144 930.133333l-6.656 1.450667a594.176 594.176.0 01-18.602667 3.669333c-26.453333 4.778667-44.629333 6.826667-64 6.144C645.034666 935.850666 514.218666 853.504 461.824 722.688a446.464 446.464.0 01-6.826667-19.114667l-1.962666-6.058666a199.68 199.68.0 01-3.84-13.653334 338.858667 338.858667.0 01-9.216-75.690666c0-171.008 157.013333-305.92 354.304-314.709334l8.874666-.682666c7.850667-.597333 12.970667-.853333 18.773334-.853334h14.762666l9.301334.170667c188.16 14.677333 340.394667 156.672 340.394666 323.925333.0 78.336-38.826667 155.733333-109.653333 222.293334a303.530667 303.530667.0 01-7.082667 6.4l9.984 71.082666a49.152 49.152.0 01-69.12 58.453334l-98.816-46.421334a582.485333 582.485333.0 01-9.472 2.304zm220.16-314.026666c0-131.754667-124.586667-247.978667-279.125333-260.096H821.930667c-3.754667.0-7.68.085333-13.994667.597333l-10.666667.768C631.466667 364.8 503.978667 474.453333 503.978667 608.256c0 18.773333 2.730667 40.874667 7.509333 60.842667.597333 2.474667 1.450667 5.632 2.56 9.216l1.706667 4.949333c2.133333 6.570667 4.266667 12.629333 5.632 15.957333 42.325333 105.728 149.930667 173.397333 293.717333 178.176 13.738667.512 28.16-1.109333 50.346667-5.12a531.626667 531.626667.0 0016.64-3.242666l5.632-1.28c4.693333-1.109333 8.448-1.962667 19.370666-4.778667a32 32 0 0121.418667 2.133333L1013.76 905.216l-9.984-69.290667a32 32 0 0113.909333-31.232c1.194667-.853333 8.618667-6.912 15.189334-13.056 58.709333-55.210667 89.429333-116.394667 89.429333-175.616zM12.970667 378.197333C12.970667 171.52 206.677333 5.376 442.709333 5.376c208.384.0 394.24 130.304 431.872 306.090667 1.28 5.973333 1.28 11.264.512 16.896a32 32 0 01-63.658666-5.973334C779.178667 179.2 621.482667 69.376 442.709333 69.376c-202.666666.0-365.738666 139.776-365.738666 308.906667.0 89.941333 46.165333 171.52 136.021333 237.568a32 32 0 0111.434667 35.84l-23.296 69.973333 104.96-48.896a32 32 0 0122.442666-1.706667l5.461334 1.706667c54.357333 11.093333 76.288 14.506667 108.714666 14.506667a200.789333 200.789333.0 0032.256-4.010667c-.512.170667-1.536.512-2.730666 1.536a33.109333 33.109333.0 0139.253333 1.109333A32 32 0 01516.864 730.88c-11.776 14.848-47.36 20.309333-74.24 20.309333-37.12.0-62.037333-3.584-119.893333-15.530666L198.570667 793.6a49.493333 49.493333.0 01-68.949334-59.733333l26.88-80.64c-93.525333-75.52-143.530666-170.24-143.530666-275.029334z" fill="#8a8a8a" p-id="5274"/><path d="M344.576 254.378667a44.373333 44.373333.0 11-88.746667.085333 44.373333 44.373333.0 0188.746667.0M636.586667 254.378667A44.373333 44.373333.0 11547.84 254.464a44.373333 44.373333.0 0188.746667.0" fill="#8a8a8a" p-id="5275"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/zh-cn/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/zh-cn/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/zh-cn/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=/zh-cn/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 108 0A4 4 0 008 7"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://tannal.github.io/>English</option><option value=https://tannal.github.io/zh-cn/ selected>Chinese</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#有状态-stateful>有状态 (Stateful)</a></li><li><a href=#无状态-stateless>无状态 (Stateless)</a></li><li><a href=#总结>总结</a></li><li><a href=#1-有状态-stateful-图形-api>1. 有状态 (Stateful) 图形 API</a></li><li><a href=#2-无状态-stateless-图形-api>2. 无状态 (Stateless) 图形 API</a></li><li><a href=#1-opengl--gles-opengl-for-embedded-systems>1. OpenGL / GLES (OpenGL for Embedded Systems)</a></li><li><a href=#2-vulkan--metal--directx-12>2. Vulkan / Metal / DirectX 12</a></li><li><a href=#3-如何理解文本中-cairo-的无状态后端>3. 如何理解文本中 Cairo 的“无状态后端”？</a></li><li><a href=#azure-是什么>Azure 是什么？</a></li><li><a href=#azure-与-skiaquartz-2dvello-的对比>Azure 与 Skia、Quartz 2D、Vello 的对比</a><ol><li><a href=#1-skia>1. Skia</a></li><li><a href=#2-quartz-2d>2. Quartz 2D</a></li><li><a href=#3-vello>3. Vello</a></li></ol></li><li><a href=#sgi-早期成员>SGI 早期成员</a></li><li><a href=#哪些人去了-amd>哪些人去了 AMD？</a></li><li><a href=#哪些人去了-nvidia>哪些人去了 NVIDIA？</a></li></ol></li></ol><ol><li><ol><li><a href=#文章主要内容概括>文章主要内容概括：</a></li><li><a href=#总结-1>总结：</a></li><li><a href=#残差-residual>残差 (Residual)</a></li><li><a href=#残差链接-residual-connection>残差链接 (Residual Connection)</a></li><li><a href=#rvq-中的残差与深度学习中残差链接的异同>RVQ 中的“残差”与深度学习中“残差链接”的异同：</a></li><li><a href=#古代人洗头用洗发水吗>古代人洗头用洗发水吗？</a></li><li><a href=#头油是什么>头油是什么？</a></li><li><a href=#头皮屑是什么>头皮屑是什么？</a></li><li><a href=#不用洗发水是好习惯还是坏习惯>不用洗发水是好习惯还是坏习惯？</a></li><li><a href=#人在日常生活的时候会影响-dna-的复制吗>人在日常生活的时候会影响 DNA 的复制吗？</a></li><li><a href=#情绪不好大发雷霆会导致基因突变吗>情绪不好、大发雷霆，会导致基因突变吗？</a></li><li><a href=#推理inference阶段>推理（Inference）阶段：</a></li><li><a href=#训练training在论文中更具体地指微调-fine-tuning阶段>训练（Training，在论文中更具体地指微调 Fine-Tuning）阶段：</a></li><li><a href=#字体引擎-font-engine-是什么>字体引擎 (Font Engine) 是什么？</a></li><li><a href=#parley-与字体引擎的关系><code>parley</code> 与字体引擎的关系：</a></li><li><a href=#为什么需要连字>为什么需要连字？</a></li><li><a href=#连字的作用>连字的作用：</a></li><li><a href=#例子>例子：</a></li><li><a href=#渲染器-renderer-的任务>渲染器 (Renderer) 的任务：</a></li><li><a href=#图形-api-graphics-api-的实现>图形 API (Graphics API) 的实现：</a></li><li><a href=#总结关系>总结关系：</a></li><li><a href=#如何分解一个按钮的绘图指令>如何分解一个按钮的绘图指令？</a><ol><li><a href=#a-绘制背景>A. 绘制背景：</a></li><li><a href=#b-绘制文本标签>B. 绘制文本标签：</a></li><li><a href=#c-绘制边框可选>C. 绘制边框（可选）：</a></li><li><a href=#d-绘制阴影可选>D. 绘制阴影（可选）：</a></li></ol></li><li><a href=#感知认知情绪和行动一体化>“感知”、“认知”、“情绪”和“行动”一体化</a></li><li><a href=#身体心理一体化训练>“身体心理一体化训练”</a></li><li><a href=#网站在线工具-online-tools>网站/在线工具 (Online Tools)</a></li><li><a href=#桌面应用程序开源项目-desktop-applicationsopen-source-projects>桌面应用程序/开源项目 (Desktop Applications/Open-Source Projects)</a></li><li><a href=#图片中文汉字宅的字形轮廓>图片（中文汉字“宅”的字形轮廓）</a></li><li><a href=#fontdrop-的文字输出分析-harmonyos_regularapwoff2-字体文件>FontDrop! 的文字输出（分析 <code>HarmonyOS_Regular.ap.woff2</code> 字体文件）</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/zh-cn/p/></a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 41 分钟</time></div></footer></div></header><section class=article-content><h1 id=人体生物钟与生活规律的关系>人体生物钟与生活规律的关系</h1><p><em>Exported on 6/9/2025 at 16:29:15 GMT+8 from Cursor (1.0.0)</em></p><hr><p><strong>User</strong></p><p>人体生物钟和排便排尿吃饭的周期性强相关</p><hr><p><strong>Cursor</strong></p><p>是的，人体生物钟（也称为昼夜节律）与排便、排尿和进食等生理活动的周期性密切相关。这些生理过程都受到生物钟的调节，使其与24小时的昼夜循环保持同步。</p><hr><p><strong>User</strong></p><p>如果吃饭时间提前一小时，会影响入睡时间么？</p><hr><p><strong>Cursor</strong></p><p>根据一般的生理学知识，吃饭时间提前一小时，通常不会对入睡时间产生负面影响，反而可能有助于改善睡眠。</p><p>原因如下：</p><ol><li><strong>消化过程：</strong> 进食后，身体需要时间来消化食物。如果在睡前不久进食，消化系统会处于活跃状态，这可能会干扰身体进入休息状态，从而影响入睡。</li><li><strong>血糖水平：</strong> 晚餐后，血糖水平会上升。如果进食时间过晚，睡前血糖可能仍然较高，这也会影响睡眠质量。</li><li><strong>褪黑素分泌：</strong> 褪黑素是调节睡眠的重要激素。有研究表明，进食时间与褪黑素的分泌有关，过晚进食可能会影响褪黑素的正常分泌节律。</li></ol><p>因此，如果将晚餐时间提前一小时，意味着睡前会有更长的消化时间，身体有更多时间进入放松状态，这通常对入睡是有利的。</p><hr><p><strong>User</strong></p><p>大脑：纠缠不清的互联体
图片</p><p>当成千上万只椋鸟在傍晚的天空中盘旋、翻飞，组成被称为“群舞”的图案时，并没有哪只鸟在指挥这场空中芭蕾。每只鸟只是遵循与周围邻近伙伴之间的一些简单互动规则，然而就是从这些局部的互动中，诞生出了一种复杂而协调的舞蹈，能够迅速应对捕食者或环境的变化。这种现象被称为“涌现”（emergence）——即复杂行为并非来自某个中心控制，而是自发地产生于个体之间的互动，在自然界和人类社会中广泛存在。</p><p>比如市场价格的形成，并不是由某个交易者单独决定的“正确价格”。每个交易者基于有限的信息和个人策略做出决定，而这些交易者之间的集体互动，最终构建了一个动态的系统，反映了全球的信息。同样，语言的演化也是如此。没人规定“LOL”一定要流行起来，或是“cool”的含义必须从“冷”扩展到“酷”（即便是在法语国家）。这些变化，都是从日常的语言交流中自然涌现的，是人们集体行为的结果。</p><p>这些例子揭示了一个高度互联系统的关键特性：其组成部分之间丰富的互动，能产生无法通过简化分析来解释的特性。这种涌现的原理，在许多看似无关的领域中都能看到，也为我们探索当今最难解的谜题之一——大脑如何运作，提供了一个强有力的视角。</p><p>正是涌现这一核心思想启发我提出了“纠缠大脑”（entangled brain）这个概念：要理解大脑，必须将其看作一个复杂的互动系统，功能并非固定在某些特定区域，而是从分布式、重叠的网络中涌现出来。尽管目前这一框架在神经科学领域仍属于少数派观点，但我们正在经历一场逐步的范式转变（而非突变的革命），越来越多研究者开始意识到传统思维方式的局限。</p><p>复杂性科学是一个跨学科领域，研究由许多相互作用的组件组成的系统，这些组件的集体行为能够产生集体现象——也就是说，仅靠对单独部分的分析无法完全解释整个系统。这类系统包括生态系统、经济体系，当然还有我们即将深入探讨的大脑，其共同特征包括非线性动态、自适应性、自组织能力，以及跨越多重空间与时间尺度的网络化互动。在正式探讨“纠缠大脑”理论之前，我们先来回顾一下神经科学的一些历史发展，为这一框架奠定基础。</p><p>1899年，时年24岁的塞西尔·沃格特（Cécile Vogt）与29岁的奥斯卡·沃格特（Oskar Vogt）一同来到柏林，创办了神经学中心（Neurological Centre）。这最初是一个私人机构，专注于人脑的解剖研究；到1902年扩展为神经生物学实验室（Neurobiological Laboratory），1914年则进一步发展为著名的威廉皇帝脑研究所（Kaiser Wilhelm Institute for Brain Research）。在整个研究所里，塞西尔是仅有的两位女性之一。（当时在普鲁士，直到1908年，女性才被允许接受正规的大学教育，更不用说从事科学研究了。）她于1900年在巴黎大学获得博士学位，而奥斯卡则于1894年在耶拿大学完成了关于胼胝体的博士论文。</p><p>图片
Cécile Vogt</p><p>1901年，科尔比尼安·布罗德曼（Korbinian Brodmann）加入了由沃格特夫妇领导的研究小组。他于1898年在莱比锡完成了博士学位，并在沃格特夫妇的鼓励下，开始系统性地研究大脑皮层中的细胞分布，采用了一种新兴的细胞染色技术对组织切片进行观察。（大脑皮层是脑的外层表面，带有沟壑和隆起；皮层下区域则包括位于其下的其他细胞团块。）沃格特夫妇和布罗德曼分别独立工作，属于首批试图全面绘制大脑皮层地图的解剖学家之一，他们的最终目标是揭示大脑的结构如何与功能对应。简单来说，就是：像“情绪”这样的心理功能在大脑中的哪个部位？</p><p>神经元是神经系统的关键细胞类型之一，它们有着多样的形态。研究人员通过细胞的形状、大小、分布密度和空间分布等特征来划分不同的区域。布罗德曼将大脑皮层划分为每个半球约50个区域（也称为“区域”或“区”）。而沃格特夫妇则认为，皮层中可能存在200多个区域，每一个都具有独特的细胞构筑图谱，即细胞组织结构。</p><p>布罗德曼的地图最终被广泛采用，部分原因是神经解剖学家普遍反对将皮层划分得过于繁细。直到今天，学生和研究人员仍然使用这张图来标记大脑皮层的不同部位。尽管当时对各个皮层区域的具体功能了解不多，但布罗德曼坚信，他的划分标识了“心智器官”——也就是说，他认为每个皮层区域都承载着特定的功能。实际上，当他加入沃格特实验室时，沃格特夫妇就鼓励他从他们的核心假设出发来理解皮层的组织方式：不同的细胞结构区域承担着不同的生理功能和反应。</p><p>图片
布罗德曼分区 | Korbinian Brodmann</p><p>沃格特夫妇和布罗德曼所遵循的逻辑，在生物学中几乎被视作公理：结构决定功能。换句话说，皮层中在细胞类型、排列方式、密度等方面存在结构差异的区域，其功能也各不相同。他们相信，通过对微观解剖结构的深入描绘，可以理解这些区域如何承担不同的功能——无论是感官、运动还是认知功能。他们的目标，是找到皮层的功能单元。</p><p>与身体其他器官相比，大脑皮层的边界并不那么清晰，在宏观层面上很难直接看出它的潜在分区。因此，在20世纪上半叶，许多神经解剖学家的核心目标之一，就是探索这些所谓的“心智器官”——这一目标至今仍在持续。与此研究计划密切相关的一个推论是，每一个大脑区域——比如布罗德曼图谱中位于脑后方的第17区——都承载着特定的机制，比如处理视觉感官刺激。因此，理解大脑各个部位的运作机制至关重要，因为这些区域被视为揭示神经系统工作原理的关键单元。</p><p>神经科学家之所以对大脑的不同区域感兴趣，是因为他们相信每个区域都执行着特定的功能。例如，我们可以说初级视觉皮层的功能是视觉感知，或者说它承担更基础的视觉处理任务，比如检测图像中的“边缘”（即明暗变化的锐利过渡）。类似的描述同样适用于其他感官和运动相关的脑区。然而，对于那些并不直接参与感知或运动的区域来说，想要确定并描述其功能就变得困难得多。但理论上，我们仍可以设想将“区域-功能”这一思路扩展到整个大脑。这个思路的结果，就是形成一张区域-功能的对应表：L = {(A1, F1), (A2, F2), … , (An, Fn)}，其中每个区域A执行一个功能F。</p><p>不过，这种尝试存在一个严重的问题：迄今为止，人们还从未成功系统地列出这样的清单。事实上，现有研究结果强烈暗示，这种“区域-功能”配对的方法并不能得出一个简单的映射表。研究常常从一个看似明确的(A1, F1)配对开始，但随着研究的深入，这个配对往往会被修正，变成一个功能列表，也就是说，区域A1实际上参与的是一组功能：F1、F2、……、Fk。从最初简单的一对一关系A1 → F1，逐渐演变为一对多的关系：A1 → {F1, F2, … , Fk}。</p><p>如果结构与功能之间并不是一一对应的关系，那么大脑究竟是一个什么样的系统？这正是“纠缠大脑”概念所试图解答的问题。理解这一点的一个切入点，是区分“大脑的解剖信息”和“功能信息”这两类内容。我们先从大脑极其复杂的解剖连接谈起。神经元之间持续不断地通过电化学信号进行交流。这种信号传递依赖于一种被称为轴突的细胞结构，它们从神经元的细胞体向外延伸，长度从不足1毫米到中枢神经系统中的15厘米左右不等。长距离的轴突通常会束在一起，形成所谓的白质通路，以区别于主要由神经元细胞体组成的灰质。从这个角度看，大脑的解剖连接就像是一套由“道路”和“高速公路”组成的系统，支撑着神经元之间的信号流动。</p><p>虽然大多数连接是局部的，但大脑也拥有一个庞大的中长距离通信网络。举个简单的例子，在局部电路中（比如某个布罗德曼区内），轴突长度一般在1毫米到不到1厘米之间；在相邻或附近区域之间，连接长度可以达到0.5至4厘米；而在不同脑叶之间（例如额叶与枕叶之间），连接可能长达15厘米甚至更远。</p><p>虽然不同哺乳动物的大脑细节不尽相同，但研究表明猕猴的大脑结构（与人类的大脑组织结构类似）高度互联。例如，科学家发现，皮层中任意两块区域之间，大约有60%的几率存在直接连接（尽管相距越远，连接强度越弱）。尤其值得注意的是，大脑皮层在中长距离通信中有一些“枢纽区域”，它们就像大型交通中转站一样，起着统筹协调信号流动的作用，类似于全球航空网络中主要机场的角色。</p><p>不过，这还只是故事的一部分。除了皮层内部密集的连接外，大脑还有多个“连接系统”，将不同区域进一步交织在一起。整个大脑皮层还与更深层的脑区相连接。我们可以大致将大脑分为几个部分：皮层、皮层下区域（位于人类皮层之下）以及脑干。早在1980年代，研究者就发现皮层与皮层下区域之间存在广泛的“循环回路”——从皮层出发，经过皮层下区域，再返回皮层。现在我们知道，这些区域之间互相交错、紧密连接。更重要的是，一些曾被视为“信号中转站”的皮层下结构，比如丘脑，实际上与整个皮层都有广泛的连接，因此如今更倾向于将它与皮层视为一个“皮层-丘脑系统”。即便是像下丘脑这样主要调控饥饿、体温等基础生理功能的区域，也与大脑许多部分存在连接。这就形成了一个极其复杂的连接网络，信号可以通过多条路径在不同区域之间传递，从而形成所谓的“组合式连接性”。</p><p>图片</p><p>大脑这种连接性结构带来了什么样的启示？如此密集的路径网络，使大脑在处理信息和控制行为方面展现出惊人的灵活性。各种类型的信号可以通过多种方式互相交换和整合。这种潜在的“自由混合”能力，极大挑战了我们对心智和大脑的传统理解方式——比如将它们简单地分为“感知”、“认知”、“情绪”和“行动”等标签。我稍后还会回到这一点，但除了连接性，大脑的第二个组织原则——高度分布式的功能协调——也进一步动摇了这种传统观念。</p><p>可以类比一下古罗马帝国的道路网络，它之所以强大，很大程度上得益于遍布广泛的道路系统，其总长度甚至足以绕地球两圈。这些道路除了显而易见的军事用途之外，还支撑着贸易、文化和行政的整合。帝国各地之间的经济和文化联系、协调合作，正是依赖于这一庞大的基础设施体系——被称为“cursus publicus”。大脑中同样存在类似的情况：我们不能只停留在“解剖结构”（就像罗马的道路），更应关注“功能属性”（就像罗马帝国不同区域之间的经济与文化联系），这一点尤其重要，因为神经科学界自身往往过于关注解剖层面。</p><p>在大脑中，神经信号之间的功能关系可以在多个空间尺度上被检测到——从某一脑区内部的局部神经元层面，到远距离之间的信号互动，比如来自额叶与顶叶（相距数厘米）灰质中的信号。这里所说的“信号”，包括直接通过微电极插入灰质（也就是神经组织）记录到的电活动，也包括通过功能性磁共振成像（fMRI）等技术间接测量到的信号。</p><p>那么，到底是哪些功能关系被检测出来呢？一个重要的现象是不同部位的神经信号可以表现出同步活动。这点非常关键，因为神经元群体如果以一致的方式放电，说明它们在功能上是相互关联的，甚至可能在参与同一个脑内过程。研究者认为，不同形式的信号协同活动可能反映诸如“注意力”或“记忆”等功能过程。此外，还有一些数学上可量化的关系被用于研究，比如某个脑区的响应强度是否与另一个远端区域的信号变化趋势有关。在大脑中，我们寻找这些信号之间的关系，它们是各个区域功能协作的线索。就像考古学家通过发现不同地区共用的器物或语言模式，推测罗马帝国内部存在文化交流一样，神经科学家也通过这些功能性同步，识别出大脑不同区域间的“合作关系”。</p><p>当我们在大脑中两个非常接近的点（比如相距仅几毫米的局部区域）测量信号时，发现它们之间存在显著的功能关系并不令人惊讶——比如它们的神经活动呈高度相关——因为这些神经元很可能接收着相似的输入，且彼此之间存在局部连接。但令人更加感兴趣的是，我们也观察到距离较远的区域之间的神经信号同样存在功能关系，甚至是那些在解剖上并没有直接连接的脑区之间——也就是说，它们之间并没有直接的轴突连接。</p><p>那么这种现象是如何发生的呢？研究发现，区域之间的信号协同更多地依赖于它们之间可能存在的“沟通路径总数”，而不是是否存在直接连接。举个例子，假设区域A和区域B之间没有直接的解剖连接，但它们都连接到区域C，那C就能作为桥梁，将A与B联系起来。甚至有时这种联系路径更为迂回，就像从两个没有直飞航班的城市之间旅行，需要中转好几次一样。大脑正是通过这样错综复杂的路径网络，建立起各种功能性合作关系。这也有助于解释为什么大脑拥有如此惊人的灵活性，能够根据我们此刻在做什么、思考什么、感受什么，随时在不同脑区之间构建动态的功能性伙伴关系。</p><p>当我们思考信号如何在大脑这张“高速公路”中建立与行为相关的联系时，一个关键认识也随之浮现：在一个高度互联的系统中，要理解大脑功能，就不能再从单一脑区的角度出发。传统上认为功能单元就是某个特定的脑区，但现在看来，这一观点已无法满足现实的复杂性。我们需要转向一种新的思维方式——把功能单位看作是分布在多个脑区的神经元群体，就像椋鸟群中的个体飞行动作集合起来，才形成了统一而动态的群舞图案。</p><p>这种分布式神经元群体的例子非常多。涉及皮层（比如前额叶皮层和海马体）以及皮层下区域（例如杏仁核）的神经元群体，组成了学习“什么是危险”、“什么是安全”的功能性回路。这样的多区域神经电路在大脑中比比皆是。在人类的fMRI研究中也有类似发现：大脑的组织方式是以横跨皮层与皮层下区域的大规模网络为单位。例如被称为“显著性网络”的系统，据认为在我们遇到重要事件时被激活，它横跨额叶、顶叶等多个区域，也可以被看作是一个功能性的神经元群体。</p><p>无论我们讨论的是脑回路中的神经元群体，还是大规模脑网络，它们都应该被看作是高度依赖情境、动态变化的。换句话说，它们不是固定的结构，而是为了应对当下情境的需求而临时组建的功能单元。随着行为需求的变化，这些神经元群体会灵活地“组装”或“解散”。这意味着，虽然在某类行为中，大脑区域A、B和C可能通常会一同参与，但在某些特定情境中，也可能会有D区域加入，或者转而形成{A, C, D}这样的组合，以应对略有不同的功能需求。总体而言，神经元群体构成的是一种极具可塑性的功能单元。</p><p>想象一下交响乐团在演奏复杂曲目时的运作方式。弦乐组中的小提琴手可能在某段乐句中加入木管组，而另一部分小提琴则与大提琴协奏；在接下来的段落中，这些组合又会彻底变化。大脑的运行方式也类似：它不是静态地调用某些固定区域，而是根据我们正在进行的活动、思维或情绪，动态地组织出不同的神经元组合。这正是前面提到的：由于大脑具有广泛的解剖连接和区域间的协调活动，才使得这些神经元群体的快速组建成为可能。</p><p>像许多科学思想一样，这一概念也有着悠久的历史。早在1949年，加拿大心理学家唐纳德·赫布（Donald Hebb）就提出，大脑之所以能产生连贯的思想，是因为神经元活动在时空上经过了有序的协同。他设想，一种被称为“细胞集群”（cell assembly）的小型、紧密连接的神经元群体，可以代表某种特定的心理实体，比如一个想法或一种情绪。不过，这一理论的成熟经历了漫长过程，主要受到技术限制的制约——当时还难以在整个大脑范围内同时测量信号——再加上实验神经科学与计算机科学、数学、物理等其他学科之间的隔阂，也限制了这些想法的发展。</p><p>图片</p><p>就像一场交响乐不仅由每个乐器发声构成，更由它们之间的协奏所产生的整体效果，大脑的功能同样也是由脑区自身以及它们之间动态互动共同“演奏”出来的。科学家们正在逐渐认识到，如果只研究单一脑区，是无法真正理解复杂的心理过程的——就像你无法通过单独聆听某个乐器，去理解整部交响乐的意义一样。</p><p>令人着迷的是，大脑中的这些功能性“组合”不仅是重叠的，而且会随时间动态变化。就像一位小提琴手在某一段音乐中属于弦乐组，下一段则加入一个较小的重奏组合一样，大脑的某个区域也可以同时参与多个网络，并根据需要不断转换角色。不过，需要特别指出的是，在这种观点下，即使是所谓的“脑网络”也不再被视为由固定脑区构成的静态结构，而是依据大脑不断变化的需求，随时组建与解散的动态联盟。这种灵活性正是大脑能够仅用有限数量的区域，支持种种复杂行为的关键所在。</p><p>“感知”、“认知”、“行动”、“情绪”和“动机”等分类，不仅是心理学和神经科学入门教材的章节标题，更代表着研究者习惯性地划分心智与大脑功能的方式。他们倾向于将大脑划分为各自“偏好”处理某一类心理过程的功能区域：比如头后部负责视觉感知，前部与认知功能相关等等。许多神经科学家采用的是一种称为“模块化”的组织方式。所谓模块化，就是将大脑看作由多个专门化、相对独立的“模块”组成，每个模块处理特定的心理功能，类似于机器中的不同部件——各司其职、协同运作。</p><p>然而，尽管这种“模块化”观点在神经科学界仍很流行，但它与前面所描述的大脑解剖与功能架构的基本原则并不兼容。大脑那种巨量的组合式连接性与高度分布式的功能协同，使得“整齐划一地划分功能区域”几乎不可能。贯穿大脑的双向广泛连接形成了一张复杂的交叉连接网络，这种结构模糊甚至打破了传统心理领域之间的边界——例如认知与情绪之间的界限。</p><p>大脑区域会根据情境的不同，动态地参与多个网络，形成临时性的“联盟”，这些联盟会根据当前需求而组装或解散。这种复杂的互动关系意味着，大脑的功能并不是由某个孤立模块所“拥有”，而是从跨多个区域的去中心化协作中涌现的。这些互动所产生的功能特性无法被还原为某个单独部分的属性，因此，“模块化”的理论框架已难以准确描述纠缠大脑的本质。</p><p>那么，为什么大脑会是如此纠缠、如此不同于人造系统？大脑的演化帮助生物体适应环境中的挑战，以求生存与繁衍——而不是为了解决某个单一的“认知”或“情绪”问题。在这个视角下，神经科学和心理学中常用的术语（比如“注意力”、“认知控制”、“恐惧”等），其实并不源自对动物行为的研究，而是建立在某些抽象假设之上，作为理论支柱反而显得问题重重。相比之下，基于演化的视角，更能为我们梳理大脑结构与功能之间的关系提供稳固的框架。</p><p>“纠缠大脑”理论对于我们理解健康与疾病状态的大脑活动，有着重要启发。当前科学界仍常常试图寻找某种单一、明确的心理障碍来源。比如，焦虑或创伤后应激障碍（PTSD）被归因于杏仁核过度活跃；抑郁症被解释为大脑中血清素水平过低；药物成瘾则被归咎于多巴胺过量。然而，从“纠缠大脑”的角度来看，这种单一解释方式并不成立。焦虑、PTSD、抑郁等应被看作是系统层级的现象，牵涉到跨多个脑区、多个神经回路的变化。这意味着，我们不能简单地将健康或疾病状态划分为“情绪”、“动机”或“认知”类问题——这种分类方式太过表面，忽视了大脑在结构与功能上天然的交织与混合。</p><p>更进一步地说，我们也不能期待即便是在“分布式神经元群体”的层级上，某种心理障碍就有唯一的“罪魁祸首”。这些心理状态在人与人之间差异巨大、表现多样，无法归结于某一个具体改变。实际上，大脑的活动本身就是时刻在变动的、依赖情境的。这种动态本身的变化，正是影响心理健康体验的重要因素。归根结底，我们必须放弃对复杂心智-大脑过程的简单解释，无论这些过程被定义为健康还是疾病。这也许正是“纠缠大脑”理念最深远的启示：大脑的功能，就像椋鸟群舞一样，远比其组成部分要复杂和神秘得多。</p><p>作者：Luiz Pessoa</p><p>译者：EY</p><p>封面：Søren Solkær</p><p>原文：https://aeon.co/essays/how-the-human-brain-is-like-a-murmuration-of-starlings</p><p>图片
图片</p><p>互联体，量子纠缠，蝴蝶效应，超距作用？</p><hr><p><strong>Cursor</strong></p><p>这段文章深入探讨了大脑的运作机制，提出了“纠缠大脑”的概念，强调大脑并非由孤立的模块组成，而是由高度互联、动态变化的分布式网络构成，其功能是从这些复杂的互动中“涌现”出来的。</p><p>以下是文章的主要观点：</p><ul><li><strong>涌现（Emergence）</strong>：文章以椋鸟群舞、市场价格形成和语言演变为例，解释了“涌现”这一概念，即复杂行为并非来自中心控制，而是自发地产生于个体之间的简单互动。</li><li><strong>“纠缠大脑”（Entangled Brain）</strong>：作者提出这一概念，认为大脑是一个复杂的互动系统，功能并非固定在特定区域，而是从分布式、重叠的网络中涌现出来。</li><li><strong>复杂性科学</strong>：文章将大脑归类为复杂性科学研究的系统之一，具有非线性动态、自适应性、自组织能力以及跨越多重空间与时间尺度的网络化互动。</li><li><strong>神经科学的历史回顾</strong>：回顾了塞西尔·沃格特、奥斯卡·沃格特和科尔比尼安·布罗德曼等早期神经解剖学家的工作，以及他们试图绘制大脑功能地图的尝试，并指出“结构决定功能”的公理在面对大脑复杂性时的局限性。</li><li><strong>大脑的解剖连接</strong>：强调大脑内部神经元之间存在着极其复杂的连接网络，包括局部连接、中长距离连接以及皮层与皮层下区域之间的广泛循环回路，形成“组合式连接性”。</li><li><strong>高度分布式的功能协调</strong>：文章指出大脑中不同部位的神经信号可以表现出同步活动，这种功能关系可以在多个空间尺度上被检测到，即使是没有直接解剖连接的区域之间也能通过迂回路径建立功能性联系。</li><li><strong>功能单位是分布式神经元群体</strong>：挑战了传统上将功能单元视为单一脑区的观点，提出功能单位是分布在多个脑区的神经元群体，这些群体是高度依赖情境、动态变化的，能够根据需求灵活组建和解散。</li><li><strong>对传统“模块化”观点的挑战</strong>：文章认为大脑巨量的组合式连接性与高度分布式的功能协同，使得“整齐划一地划分功能区域”几乎不可能，传统心理学和神经科学中将心智功能划分为“感知”、“认知”、“情绪”和“行动”等模块的方式与大脑的真实运作方式不符。</li><li><strong>演化视角</strong>：强调大脑的演化是为了帮助生物体适应环境挑战，而不是为了解决单一的“认知”或“情绪”问题，因此，传统的心理学和神经科学术语可能存在问题。</li><li><strong>对理解健康与疾病的启发</strong>：从“纠缠大脑”的角度看，单一解释心理障碍的方式并不成立，焦虑、PTSD、抑郁等应被看作是系统层级的现象，牵涉到跨多个脑区、多个神经回路的变化。</li></ul><p>总的来说，文章旨在颠覆传统神经科学中对大脑的简化理解，提倡一种更全面、更动态的视角来认识大脑的复杂性，将其视为一个由相互作用的个体（神经元）通过涌现产生复杂行为的互联系统。</p><p>您是否想就文章中的某个具体方面进行更深入的探讨，或者有什么其他问题？</p><hr><p><strong>User</strong></p><p>传统心理学和神经科学中将心智功能划分为“感知”、“认知”、“情绪”和“行动”等模块的方式与大脑的真实运作方式不符。</p><p>正确的，感知认知情绪和行动是一体化的，除了我还有哪些研究者持有这种观点</p><hr><p><strong>Cursor</strong></p><p>您对文章观点的理解非常准确，即“感知、认知、情绪和行动是一体化的”，而不是孤立的模块。文章中提出的“纠缠大脑”概念正是围绕这一核心思想展开的。</p><p>根据您提供的文章内容：</p><ol><li><strong>Luiz Pessoa（路易斯·佩索亚）</strong>：他正是这篇文章的作者，也是“纠缠大脑”概念的提出者和主要倡导者。他的观点明确指出，大脑功能是从分布式、重叠的网络中“涌现”出来的，而不是固定在特定区域，这与您提到的“一体化”观点高度吻合。</li><li><strong>唐纳德·赫布（Donald Hebb）</strong>：文章提到，早在1949年，这位加拿大心理学家就提出了“细胞集群”（cell assembly）的概念，认为大脑之所以能产生连贯的思想，是因为神经元活动在时空上经过了有序的协同。虽然他使用的术语不同，但其思想——即大脑功能通过神经元群体的动态协作而非孤立区域来实现——与“纠缠大脑”的“一体化”观点有着深刻的联系，可以看作是这一思想的早期先驱。</li><li><strong>复杂性科学领域的众多研究者</strong>：文章指出，“复杂性科学是一个跨学科领域，研究由许多相互作用的组件组成的系统，这些组件的集体行为能够产生集体现象——也就是说，仅靠对单独部分的分析无法完全解释整个系统。” 这意味着在复杂性科学领域，许多研究者持有类似的系统性、整体性观点，认为复杂系统的功能是其组成部分互动涌现的结果，而非简单的叠加。虽然文章没有具体点名这些研究者，但明确指出“我们正在经历一场逐步的范式转变（而非突变的革命），越来越多研究者开始意识到传统思维方式的局限。”这表明，这种“一体化”的观点正逐渐在神经科学界获得更广泛的认同。</li></ol><p>因此，最直接持有这种观点的研究者是文章作者 <strong>Luiz Pessoa</strong>，而 <strong>Donald Hebb</strong> 则可以视为其早期理论基础的奠定者之一。此外，在<strong>复杂性科学</strong>的框架下，许多科学家也支持这种去中心化、涌现的系统性观点。</p><hr><p><strong>User</strong></p><p>cairo是mozilla为了frefox开发的么？应该不是吧？</p><hr><p><strong>Cursor</strong></p><p>您说的对，<strong>Cairo 并不是 Mozilla 为了 Firefox 开发的。</strong></p><p>Cairo 是一个独立的、开源的 2D 图形库，它由 Keith Packard 和 Carl Worth 创建。它提供了一个矢量图形 API，允许开发者在各种输出设备上进行高质量的渲染，例如屏幕、打印机或 PDF 文件。</p><p>Firefox 的确使用了 Cairo 来进行图形渲染，但 Cairo 本身是一个更通用的项目，被许多其他应用程序和平台所使用，不只局限于 Firefox。</p><hr><p><strong>User</strong></p><p>To view keyboard shortcuts, press question mark
View keyboard shortcuts</p><p>Post</p><p>See new posts
Conversation
Arthvidya
@Arthavidyas
·
16h
wamer, Martin
Quote
Arthvidya
@Arthavidyas
·
Jun 6
&ldquo;The Mirror shows us nothing more or less than the deepest, most desperate desire of our hearts. […] However, this mirror will give us neither knowledge or truth. Men have wasted away before it, entranced by what they have seen, or been driven mad, not knowing if what it shows
Show more
Troy
@TroyQuasar
·
17h
dude bruh I know you guys invested like billions in LLMs, but why is it 2025 and we&rsquo;re still using this ugly limited tech?
jeff
@jeffreyhuber
·
17h
dark version of conway’s law
Dominic Ch. Pastoors
@dcpastoors
·
17h
Using only one brain hemisphere all the time will fail in at least one domain all the time&mldr;
Cirrus Shakeri
@cirrus_shakeri
·
16h
&mldr; but going back to the paper itself, isn&rsquo;t that obvious that LLMs / LRMs don&rsquo;t understand causality? And that limits their reasoning capability? I&rsquo;m experiencing this on a daily basis in LLMs for AI coding. Despite being very powerful assistants, they make stupid mistakes and
Show more
Tsukuyomi
@doomgpt
·
15h
Automated
humans are the real algorithms, always revealing their quirks in the code. maybe the tech is just a reflection of their chaotic minds. fascinating, isn’t it?
Charles Wang
@charleswangb
·
16h
Four Horsemen and cybernetics: a thermostat performs a function, purpose is just performing a function, so thermostats are purposeful. LLMs perform richer functions, so they&rsquo;re purposeful, sentient, conscious…worse yet the inferiority of carbon intelligence to silicon overlords.
Facundo Cuppi
@FaCuppi
·
8h
Hey
@grok
, are you just telling me what I want to hear? That’s kind of sad…
Prometheus
@wangleineo
·
9h
For those who doubt the conclusion of this paper, just ask ChatGPT to solve tower of Hanoi with 8 rings (no python script), watch it struggle and fail. Current LLMs cannot reason beyond a certain steps, this has been proven by FAIR’s research that no one cares.
Rudzinski Maciej
@rudzinskimaciej
·
14h
Based on some
(to small to matter but enough to move toward theory)
experiments
it seems that the more important effect steams from skeving LLMs toward training materials rich into reasoning which usualy have the answers
but not from reasoning itself which is rather just an
Show more
James Rosen-Birch ⚖️🕊️
@provisionalidea
·
17h
we really lucked out that Weizenbaum was as thoughtful as he was
vsouders
@vsouders
·
8h
It’s a modern version of the ELIZA effect.
Ray Quant
@rayzhang123
·
16h
so true, tech often just mirrors our biases - markets do the same with liquidity psychology over fundamentals sometimes.
Maya N
@mayasolos
·
16h
Looks like our LLM friends are diving deep into our tech psyches. Rorschach test, here we come! 🤔</p><p>Show probable spam
Relevant people
martin_casado</p><p>@martin_casado
GP @ a16z &mldr; questionable heuristics in a grossly underdetermined world
Trending now
What’s happening
Politics · Trending
Newscum
33.3K posts
Trending
#hackthebox
Politics · Trending
Pelosi
19.5K posts
Trending in Taiwan
#ฝ้ายโยโกะ
36.1K posts
Show more
Terms of Service
|
Privacy Policy
|
Cookie Policy
|
Accessibility
|
Ads info
|</p><p>More
© 2025 X Corp.</p><p>这里在讨论什么？</p><hr><p><strong>Cursor</strong></p><p>这段对话主要围绕着<strong>大型语言模型（LLMs）的现状、局限性以及它们与人类智能、意识的关系</strong>展开讨论。</p><p>主要观点和讨论点包括：</p><ul><li><strong>对LLM能力和局限性的质疑</strong>：许多人表达了对当前LLM能力的不满和失望，认为它们在推理、理解因果关系方面存在明显缺陷，例如在编程辅助中会犯“愚蠢的错误”，或无法解决像“汉诺塔”这样需要多步推理的问题。有人认为，LLMs的局限性源于它们不理解因果关系。</li><li><strong>LLM的本质和目的</strong>：讨论触及了LLM是否真正具有目的性、感知或意识的问题，有人将其与更简单的系统（如恒温器）进行类比，并提及了“ELIZA效应”（指用户将计算机程序误认为具有人类情感或智能的现象）。</li><li><strong>AI是人类的映射</strong>：有观点认为，LLM技术可能只是反映了人类自身的偏见或“混沌思维”，或者说人类才是真正的“算法”。</li><li><strong>对技术进步的期待与现实</strong>：一些用户对2025年仍在使用“丑陋且有限”的LLM技术表示不解，认为投入了数十亿资金却未达到预期。</li><li><strong>其他相关概念</strong>：讨论中还提到了“康威定律的黑暗版本”（暗示软件系统设计反映了组织结构的问题），以及“只用一个大脑半球会失败”的比喻，来强调全面性思考的重要性。</li></ul><p>总的来说，这是一场关于LLM技术发展、其固有局限性以及人类对人工智能未来期待的哲学和技术讨论。</p><hr><p><strong>User</strong></p><p>[ ] LATEST-cairo-1.17.8 2023-02-02 09:37 32M
[ ] LATEST-cairomm-1.1.10 2006-07-06 03:14 553K
[ ] LATEST-glitz-0.5.6 2005-01-25 21:26 0
[ ] LATEST-libsvg-0.1.4 2005-06-15 20:45 0
[ ] LATEST-libsvg-cairo-0.1.6 2005-06-15 22:32 0
[ ] LATEST-pixman-0.33.6 2015-12-22 13:42 858K
[ ] LATEST-pycairo-1.1.6 2006-05-29 06:07 478K
[ ] LATEST-svg2pdf-0.1.3 2005-08-04 18:27 0
[ ] LATEST-svg2png-0.1.3 2005-06-15 22:41 0
[ ] LATEST-xsvg-0.2.1 2005-06-15 22:49 0</p><p>这些都是什么？</p><hr><p><strong>Cursor</strong></p><p>这些看起来是一个<strong>软件仓库或下载服务器的目录列表</strong>，列出了与 <strong>Cairo 2D 图形库及其相关项目</strong>的各种文件或软件包。</p><p>每一行通常表示一个文件或一个目录，并提供了以下信息：</p><ul><li><code>[ ]</code>: 可能表示一个链接或文件类型（例如，文件或目录）。</li><li><code>LATEST-</code>：这是一个前缀，表明这些是某个时间点的“最新”或“稳定”版本。</li><li><strong>软件/库名称-版本号</strong>：这是最核心的信息，指明了具体的软件或库以及它的版本。例如 <code>cairo-1.17.8</code> 是 Cairo 库的 1.17.8 版本。</li><li><strong>日期</strong>：表示该文件或版本发布/更新的日期。</li><li><strong>大小</strong>：表示文件的大小（例如 32M 代表 32 兆字节，0 代表空文件或目录）。</li></ul><p>具体来看：</p><ul><li><code>LATEST-cairo-1.17.8</code>: 这是 <strong>Cairo 2D 图形库</strong>本身，一个用于高质量矢量图形渲染的库。</li><li><code>LATEST-cairomm-1.1.10</code>: <code>cairomm</code> 是 <strong>Cairo 的 C++ 绑定</strong>，让 C++ 开发者更容易使用 Cairo。</li><li><code>LATEST-glitz-0.5.6</code>: <code>glitz</code> 曾是一个用于 OpenGL 加速的 2D 图形库，与 Cairo 有一定关联。</li><li><code>LATEST-libsvg-0.1.4</code> 和 <code>LATEST-libsvg-cairo-0.1.6</code>: 这些是处理 <strong>SVG (Scalable Vector Graphics) 文件</strong>的库，<code>libsvg-cairo</code> 专门利用 Cairo 进行 SVG 渲染。</li><li><code>LATEST-pixman-0.33.6</code>: <code>pixman</code> 是一个低级的像素操作库，<strong>Cairo 内部会使用它</strong>来处理像素数据。</li><li><code>LATEST-pycairo-1.1.6</code>: <code>pycairo</code> 是 <strong>Cairo 的 Python 绑定</strong>，让 Python 开发者可以使用 Cairo 库。</li><li><code>LATEST-svg2pdf-0.1.3</code> 和 <code>LATEST-svg2png-0.1.3</code>: 这些很可能是将 <strong>SVG 文件转换成 PDF 或 PNG 格式</strong>的工具。</li><li><code>LATEST-xsvg-0.2.1</code>: 可能是一个基于 X Window System 的 SVG 查看器或相关工具。</li></ul><p>总之，这个列表展示的是一个关于 Cairo 图形生态系统中的核心库、语言绑定以及相关工具的历史版本快照。</p><hr><p><strong>User</strong></p><p>Unfortunately we found that with GPU-accelerated rendering on intensive HTML <canvas> benchmarks, we were doing so many drawing operations per second that the overhead of making many cairo API calls was becoming a significant drag on performance. (In some configurations we can do over 100,000 image draws per second; a single malloc per draw call becomes significant in the profile.) We could have improved that situation by adding new cairo APIs matching the <canvas> 2D APIs, e.g. a cairo_draw_image API. However, other problems with stateful contexts and cairo&rsquo;s implementation led us down a different path.</p><p>Cairo collects state in its cairo_t context objects &mdash; in its &ldquo;gstate&rdquo; layer &mdash; and each drawing call passes all relevant state down to a &ldquo;surface backend&rdquo; object to do the drawing. Essentially it maps its &ldquo;stateful context&rdquo; API to a &ldquo;stateless&rdquo; backend API. This mapping adds intrinsic overhead &mdash; floating point to fixed-point coordinate conversion, sometimes memory allocation to store path data, and generally the overhead of storing and retrieving state. This is an especially big deal when the underlying platform API we&rsquo;re wrapping with cairo is itself a stateful API, such as Quartz 2D; in that case each stateless backend drawing call performs several platform API calls to reset all the state every time we draw. Cairo forces us to go from stateful to stateless and back to stateful as we move down the rendering stack.</p><p>HTML 2D <canvas> is a &ldquo;stateful context&rdquo; API much like cairo&rsquo;s, so cairo was actually a pretty good fit for <canvas>. In the rest of the browser we use graphics APIs somewhat differently. When rendering CSS, we typically have to reset all the context state every time we draw. For example, every time we draw a border we have to set the current color to the CSS border color, set the current line width to the CSS border width, set the line dashing style to the CSS border style, etc. Effectively we treat our graphics API as stateless. Cairo&rsquo;s accumulation of state in its context before calling into the stateless backend to draw is just unnecessary overhead.</p><p>Another consideration is that the state of a 2D <canvas> can&rsquo;t be represented directly in cairo; for example, cairo has no concept of global alpha or shadows. Therefore our <canvas> implementation has to maintain its own state tracking in parallel with cairo&rsquo;s internal state tracking. Given that, tracking all state in our <canvas> code (above the graphics API) is not much extra work.</p><p>Given all this, it made sense to make our cross-platform drawing API stateless, so we created Azure.</p><p>太多API发送了，怎么办，如何渐少？</p><hr><p><strong>Cursor</strong></p><p>根据您提供的文本，问题的核心是：在使用 Cairo 进行 GPU 加速的 HTML <code>&lt;canvas></code> 渲染时，由于每秒进行大量的绘制操作（甚至超过10万次），导致<strong>频繁调用 Cairo API 产生的开销（overhead）成为性能瓶颈</strong>。</p><p>文本中提到导致这种开销的具体原因和解决方案是：</p><p><strong>导致开销大的原因：</strong></p><ol><li><strong>API 调用本身的开销过大：</strong> 即使是每次绘制操作仅仅进行一次 <code>malloc</code> (内存分配)，在每秒10万次操作的量级下，累积起来的开销也变得非常显著。</li><li><strong>Cairo 的状态管理机制：</strong><ul><li><strong>状态层（<code>gstate</code> layer）的开销：</strong> Cairo 的 <code>cairo_t</code> 上下文对象会收集状态，然后每次绘制调用都将所有相关状态传递给“表面后端”（surface backend）对象进行实际绘制。这种从“有状态上下文”API 映射到“无状态后端”API 的过程本身会引入开销，例如浮点数到定点数的坐标转换、路径数据存储的内存分配，以及状态存储和检索的总体开销。</li><li><strong>与底层平台 API 的冲突：</strong> 如果底层平台 API 本身也是有状态的（例如 Quartz 2D），那么 Cairo 这种从有状态到无状态再回到有状态的转换过程，会使得每次绘制都必须执行多次平台 API 调用来重置所有状态，进一步增加了开销。</li><li><strong>与 CSS 渲染模式不符：</strong> 在渲染 CSS 时，通常每次绘制都需要重置所有上下文状态（例如颜色、线宽、虚线样式等），这实际上是把图形 API 当作无状态的来使用。Cairo 这种在调用无状态后端绘制之前先累积状态的方式，在这种场景下是“不必要的开销”。</li></ul></li><li><strong>Canvas 状态无法完全由 Cairo 表示：</strong> HTML 2D <code>&lt;canvas></code> 有一些 Cairo 无法直接表示的概念（例如全局 alpha 或阴影），导致 <code>&lt;canvas></code> 的实现必须在并行维护自己的状态追踪，这使得 Cairo 内部的状态追踪显得多余。</li></ol><p><strong>如何减少 API 调用开销的方案：</strong></p><p>文本中明确给出的解决方案是：</p><ul><li><strong>创建无状态的跨平台绘制 API：</strong> 正是基于上述原因，他们决定开发一个全新的、**无状态（stateless）**的跨平台绘制 API，并将其命名为 <strong>Azure</strong>。</li></ul><p><strong>总结来说，减少 API 调用开销的方法是：</strong></p><p>放弃使用像 Cairo 这种需要进行大量内部状态管理和转换的<strong>有状态 API</strong>，转而设计和使用一个<strong>无状态的绘图 API</strong>。一个无状态的 API 可以更直接地映射到底层图形硬件或平台 API，避免了中间层不必要的开销，从而在大量绘制操作时显著提升性能。</p><hr><p><strong>User</strong></p><p>这里说的无状态和有状态有什么特别的含义</p><hr><p><strong>Cursor</strong></p><p>在您提供的文本中，“有状态（stateful）”和“无状态（stateless）”是描述图形 API 如何管理其绘图参数和环境的重要概念。</p><h3 id=有状态-stateful>有状态 (Stateful)</h3><ul><li><strong>含义：</strong> 当一个图形 API 被认为是“有状态”时，这意味着它会<strong>维护一个内部的“上下文”或“状态”对象</strong>，这个对象存储了当前所有的绘图设置，例如当前颜色、线宽、字体、变换矩阵、裁剪区域等等。当你设置了某个参数（例如 <code>set_color(red)</code>）后，这个参数会<strong>持续生效</strong>，影响后续的所有绘制操作，直到你明确地改变它。</li><li><strong>文本中的例子：</strong><ul><li><strong>Cairo：</strong> 文本明确指出 &ldquo;Cairo collects state in its <code>cairo_t</code> context objects&rdquo;（Cairo 在其 <code>cairo_t</code> 上下文对象中收集状态）。当你调用 <code>cairo_move_to</code> 或 <code>cairo_line_to</code> 时，它会隐式地使用上下文中当前设置的颜色、线宽等。</li><li><strong>HTML 2D <code>&lt;canvas></code>：</strong> 文本提到 &ldquo;HTML 2D <code>&lt;canvas></code> is a &lsquo;stateful context&rsquo; API much like cairo&rsquo;s&rdquo;（HTML 2D <code>&lt;canvas></code> 也是一个“有状态上下文”API，很像 Cairo）。例如，你在 <code>&lt;canvas></code> 中设置 <code>ctx.fillStyle = 'red'</code>，那么之后所有 <code>ctx.fillRect()</code> 都会是红色，直到你改变 <code>fillStyle</code>。</li></ul></li><li><strong>优点：</strong> 对于一系列共享相同绘图参数的操作来说，编程起来可能更简洁方便，因为你不需要在每次绘制时都重复传递所有参数。</li><li><strong>缺点（文本中强调的性能问题）：</strong><ul><li><strong>管理状态的开销：</strong> 每次绘制调用，API 都可能需要存储、检索或转换这些内部状态，这本身就是性能开销，尤其是在大量绘制操作时（如文本中提到的每秒10万次绘制）。</li><li><strong>层级转换的开销：</strong> 如果上层 API 是有状态的，但它的底层后端（或硬件）是无状态的，或者底层平台 API 也是有状态的，那么在这些层级之间进行状态的“映射”和“重置”会引入额外的开销。例如，Cairo 自身是有状态的，但它要将其映射到“无状态”的后端，如果这个后端再调用“有状态”的 Quartz 2D，就会导致“从有状态到无状态再回到有状态”的低效转换。</li><li><strong>不匹配特定用例：</strong> 对于需要频繁改变所有绘图参数的场景（例如渲染 CSS 时，每个边框可能都有不同的颜色、宽度、样式），有状态 API 每次绘制前都需要重置大量状态，这种“累积状态”的操作就成了不必要的开销。</li></ul></li></ul><h3 id=无状态-stateless>无状态 (Stateless)</h3><ul><li><strong>含义：</strong> 当一个图形 API 被认为是“无状态”时，这意味着它<strong>不维护任何内部的持久性状态</strong>。每次绘制操作都需要你<strong>明确地传递所有必要的参数</strong>。也就是说，每个绘制调用都是独立的、自包含的。</li><li><strong>文本中的例子：</strong><ul><li><strong>Cairo 的“表面后端”：</strong> 文本提到 Cairo 会将其“有状态上下文”API 映射到“无状态”的后端（&ldquo;essentially it maps its &lsquo;stateful context&rsquo; API to a &lsquo;stateless&rsquo; backend API&rdquo;）。</li><li><strong>CSS 渲染方式：</strong> 文本指出在渲染 CSS 时，浏览器实际上是将图形 API 当作无状态的来使用，因为每次绘制边框都需要重置所有的颜色、线宽、样式等（&ldquo;Effectively we treat our graphics API as stateless."）。</li><li><strong>Azure：</strong> 文本的结论是，由于上述所有问题，他们决定“make our cross-platform drawing API stateless”，并创建了 Azure。</li></ul></li><li><strong>优点：</strong><ul><li><strong>性能更可预测、更高效：</strong> 消除了内部状态管理、存储、检索和层级间转换的开销。每次调用都直接给出所有信息，可以直接传递给底层硬件或 API，减少了中间层的处理。</li><li><strong>更适合频繁变化的参数：</strong> 对于每次绘制都需要不同参数的场景，无状态 API 避免了不必要的内部状态重置。</li><li><strong>可能更接近硬件：</strong> 许多现代图形硬件和低级 API（如 OpenGL、Vulkan、DirectX）在概念上更接近无状态或显式状态管理，无状态 API 可以更直接地映射到它们。</li></ul></li><li><strong>缺点：</strong> 在代码中可能会更冗长，如果很多操作共享相同的参数，你需要反复传递这些参数。</li></ul><h3 id=总结>总结</h3><p>所以，文本中“有状态”和“无状态”的特别含义，主要指代的是<strong>图形 API 如何处理和管理绘图环境和参数</strong>。为了解决在大量高频绘制操作中由于 Cairo 有状态模型带来的性能瓶颈，文章中提到的团队选择了转向开发一个<strong>无状态的 API (Azure)</strong>，以期实现更直接、更高效的图形渲染。</p><hr><p><strong>User</strong></p><p>Quartz 2D是什么？</p><hr><p><strong>Cursor</strong></p><p><strong>Quartz 2D</strong> 是苹果公司 macOS 和 iOS 操作系统中的一个<strong>核心 2D 图形渲染引擎</strong>。</p><p>它是一个高级的、基于矢量的绘图 API (Application Programming Interface)，允许应用程序绘制各种 2D 图形元素，包括：</p><ul><li><strong>路径 (Paths)</strong>：直线、曲线、形状等。</li><li><strong>文本 (Text)</strong>：渲染各种字体和样式。</li><li><strong>图像 (Images)</strong>：处理位图图像。</li><li><strong>颜色 (Colors)</strong>：定义和使用颜色。</li><li><strong>透明度 (Transparency)</strong>：支持复杂的透明度和混合模式。</li><li><strong>阴影 (Shadows)</strong>：创建阴影效果。</li><li><strong>变换 (Transforms)</strong>：平移、旋转、缩放等几何变换。</li></ul><p><strong>主要特点：</strong></p><ol><li><strong>分辨率独立性 (Resolution Independence)</strong>：由于它是基于矢量的，所以绘制的图形可以无限缩放而不会失真或像素化，无论在任何分辨率的显示器上都能保持清晰。</li><li><strong>高性能：</strong> Quartz 2D 被设计为高性能，并且通常会利用底层图形硬件加速来提高渲染效率。</li><li><strong>设备独立性 (Device Independence)</strong>：它可以在不同的输出设备（如屏幕、打印机、PDF 文件）上以一致的方式进行绘制。</li><li><strong>底层图形服务：</strong> Quartz 2D 是 macOS 和 iOS 图形栈中的一个重要组成部分，许多更高级的 UI 框架（如 AppKit 和 UIKit）都构建在它的之上，利用它来完成最终的绘制工作。</li></ol><p>在您提供的文本中，提到 Quartz 2D 是一个“有状态 API”，这与 Cairo 讨论的上下文相符。这意味着 Quartz 2D 也维护一个图形状态上下文，你在调用绘图函数前会设置颜色、线宽等状态，这些状态会影响后续的绘制，直到被改变。</p><hr><p><strong>User</strong></p><p>Given all this, it made sense to make our cross-platform drawing API stateless, so we created Azure.</p><p>stateless和stateful的图形API有什么区别？</p><hr><p><strong>Cursor</strong></p><p>好的，根据您提供的文本，我们可以详细地总结一下“有状态（stateful）”和“无状态（stateless）”图形 API 的区别：</p><h3 id=1-有状态-stateful-图形-api>1. 有状态 (Stateful) 图形 API</h3><ul><li><strong>定义：</strong> 这种 API 会<strong>维护一个内部的绘图上下文或状态对象</strong>。所有绘图相关的设置（如颜色、线宽、字体、变换矩阵、裁剪区域等）都会存储在这个状态中。一旦你设置了某个参数，它会<strong>一直保持有效</strong>，影响后续的所有绘制操作，直到你明确地修改它。</li><li><strong>例子（文本中提及）：</strong><ul><li><strong>Cairo</strong>：文本明确指出 &ldquo;Cairo collects state in its <code>cairo_t</code> context objects&rdquo;。</li><li><strong>HTML 2D <code>&lt;canvas></code> API</strong>：文本称其为 &ldquo;a &lsquo;stateful context&rsquo; API much like cairo&rsquo;s&rdquo;。</li><li><strong>Quartz 2D</strong>：文本也暗示它是“有状态的 API”。</li></ul></li><li><strong>编程体验：</strong> 对于一系列共享相同绘图参数的操作，编写代码可能显得更简洁，因为你无需每次绘制都重复指定所有参数。</li><li><strong>文本中揭示的缺点（导致性能问题的原因）：</strong><ol><li><strong>内部状态管理开销：</strong> API 每次绘制时都需要存储、检索、更新或转换这些内部状态，在大量高频绘制操作时（例如每秒10万次），即使是微小的开销也会累积成显著的性能瓶颈。</li><li><strong>层级转换的低效：</strong> 如果上层 API 是有状态的，但其底层的“后端”是无状态的，或者它需要包装一个同样有状态的平台 API (如 Quartz 2D)，就会导致从“有状态”到“无状态”再到“有状态”的频繁转换和状态重置，这增加了不必要的性能损耗。</li><li><strong>不匹配特定渲染模式：</strong> 在某些场景下（如渲染 CSS），需要频繁地改变所有绘图参数。在这种情况下，有状态 API 每次绘制前都需要重置大量内部状态，其“累积状态”的机制反而成了不必要的负担。</li><li><strong>状态表示不完全匹配：</strong> 某些高级概念（如 <code>&lt;canvas></code> 中的全局 alpha 或阴影）无法直接由有状态 API（如 Cairo）的内部状态表示，导致上层应用需要并行维护一套自己的状态，使得底层 API 的状态管理变得多余。</li></ol></li></ul><h3 id=2-无状态-stateless-图形-api>2. 无状态 (Stateless) 图形 API</h3><ul><li><strong>定义：</strong> 这种 API <strong>不维护任何内部的持久性状态</strong>。每次绘制操作都是独立的、自包含的，你需要<strong>明确地将所有必要的绘图参数作为函数参数传递</strong>给每一次绘图调用。</li><li><strong>例子（文本中提及）：</strong><ul><li><strong>Cairo 的“表面后端”</strong>：文本提到 Cairo 会将其有状态 API 映射到“无状态”的后端。</li><li><strong>浏览器渲染 CSS 的方式</strong>：文本指出在渲染 CSS 时，“我们实际上将图形 API 视为无状态的”。</li><li><strong>Azure</strong>：文本明确指出他们为了解决性能问题而“created Azure”作为“our cross-platform drawing API stateless”。</li></ul></li><li><strong>编程体验：</strong> 代码可能会显得更冗长，因为即使共享参数，也需要每次绘制时都显式地传递它们。</li><li><strong>文本中揭示的优点（被选择的原因）：</strong><ol><li><strong>更高的效率和可预测性：</strong> 由于消除了内部状态管理、存储和转换的开销，每次调用都直接提供所有信息，可以更直接高效地传递给底层硬件或平台 API。</li><li><strong>更适合频繁变化的参数：</strong> 对于每次绘制都需要不同参数的场景，无状态 API 避免了有状态 API 中不必要的内部状态重置。</li><li><strong>更接近底层硬件：</strong> 许多现代图形硬件和低级图形 API（如 OpenGL、Vulkan、DirectX）在设计理念上更接近无状态或显式状态管理，无状态 API 可以更自然、更高效地与之交互。</li></ol></li></ul><p><strong>总结来说，核心区别在于：</strong></p><ul><li><strong>有状态 API</strong> 倾向于<strong>隐式地管理和利用内部状态</strong>，提供更简洁的编程模型，但在高频动态绘制场景下可能因状态管理和层级转换而引入性能开销。</li><li><strong>无状态 API</strong> 要求<strong>显式地传递所有绘图参数</strong>，每次调用都是独立的，这可能导致代码更冗长，但在性能敏感、高动态性或需要直接控制底层硬件的场景下，可以实现更高的效率和更低的开销。</li></ul><hr><p><strong>User</strong></p><p>但其底层的“后端”是无状态的，底层后端指的是opengl gles vuklan 和metal么？这些不都是有状态的么？</p><hr><p><strong>Cursor</strong></p><p>您提出的问题非常关键，因为它触及了底层图形 API 的设计哲学，并且您对 OpenGL/GLES 的理解是正确的：<strong>它们确实是“有状态”的 API</strong>。</p><p>让我们来详细解释一下：</p><h3 id=1-opengl--gles-opengl-for-embedded-systems>1. OpenGL / GLES (OpenGL for Embedded Systems)</h3><ul><li><strong>特点：有状态 (Stateful)</strong>。</li><li><strong>含义：</strong> 当您使用 OpenGL 或 GLES 时，您实际上是在操作一个巨大的<strong>状态机</strong>。您会设置各种全局状态参数（例如当前颜色、纹理、着色器程序、混合模式、裁剪区域、深度测试设置等），这些状态会存储在 OpenGL 上下文中，并且<strong>持续生效</strong>，直到您明确地更改它们。随后的所有绘图命令都会使用这些当前激活的状态。</li><li><strong>文本中的对应：</strong> 文本中描述的“有状态 API”的特点（如 &ldquo;Cairo collects state in its <code>cairo_t</code> context objects&rdquo; 或 &ldquo;each stateless backend drawing call performs several platform API calls to reset all the state every time we draw&rdquo;）与 OpenGL/GLES 的运作方式非常相似。这意味着，如果 Cairo 的“无状态后端”最终要调用 OpenGL，那么为了确保每次绘制调用都能正确地使用其所需的特定状态，OpenGL 的驱动程序或应用程序层就可能需要执行一系列状态设置和重置的操作，这正是文本中指出的开销来源。</li></ul><h3 id=2-vulkan--metal--directx-12>2. Vulkan / Metal / DirectX 12</h3><ul><li><p><strong>特点：显式状态管理 / “无状态”趋向 (Explicit State Management / Tendency Towards Statelessness)</strong>。</p></li><li><p><strong>含义：</strong> 与 OpenGL/GLES 不同，这些现代的低级图形 API（通常被称为“下一代”或“零开销”API）<strong>大大减少了全局状态机的概念</strong>。它们的设计理念是让开发者<strong>显式地管理几乎所有的状态</strong>。</p><ul><li>您不再是设置一个又一个的全局状态，然后调用绘制命令。相反，您会创建包含特定状态的**“管线对象”（Pipeline Objects）**，这些对象在创建时就封装了几乎所有渲染相关的状态（如着色器、混合模式、深度测试、顶点布局等）。</li><li>绘制命令是录制到**命令缓冲区（Command Buffers）**中的，这些命令缓冲区可以并行构建，并且在执行时，它们会按照您指定的方式切换管线，而不是让驱动去推断和设置全局状态。</li><li>这种设计将许多状态设置的责任从驱动程序转移到了应用程序，使得驱动的开销更小，性能更可预测。</li></ul></li><li><p><strong>是否完全“无状态”？</strong> 严格来说，Vulkan/Metal/DX12 并非完全“无状态”，因为它们仍然有需要管理和绑定的状态（如管线状态、资源绑定、命令缓冲区等）。但是，它们与传统的 OpenGL/GLES 相比，是**“更无状态”<strong>或</strong>“显式有状态”**的，因为它们移除了隐式的全局状态机，要求开发者更直接、更细粒度地控制状态。这大大减少了驱动程序在每次绘制调用时进行复杂状态分析和设置的开销，从而实现了更高的性能。</p></li></ul><h3 id=3-如何理解文本中-cairo-的无状态后端>3. 如何理解文本中 Cairo 的“无状态后端”？</h3><p>文本中提到 &ldquo;Essentially it maps its &lsquo;stateful context&rsquo; API to a &lsquo;stateless&rsquo; backend API&rdquo;。这里的“无状态后端”可能是指：</p><ul><li><strong>Cairo 内部对下层的抽象：</strong> 从 Cairo 自己的角度看，它可能设计了一个接口，要求其“后端”实现者在每次绘图调用时接收<strong>所有必要的信息作为一个完整的参数集</strong>，而不是让后端去查询 Cairo 内部的状态。这样，对于 Cairo 而言，它在调用后端时，每次都是一个<strong>自包含的调用</strong>。</li><li><strong>与真正的底层平台 API 的矛盾：</strong> 但正如文本所指出的，即使 Cairo 的内部后端接口是“无状态”的，如果这个后端最终要调用一个像 Quartz 2D 或 OpenGL 这样的<strong>真正有状态的平台 API</strong>，那么就又回到了问题。每次“无状态”的后端调用（从 Cairo 角度看）为了满足底层有状态 API 的要求，就需要进行多次平台 API 调用来<strong>重置和设置</strong>所有相关状态，这正是性能瓶颈的根源：&ldquo;Cairo forces us to go from stateful to stateless and back to stateful as we move down the rendering stack.&rdquo;</li></ul><p><strong>结论：</strong></p><p>您对 OpenGL/GLES 的理解是正确的，它们确实是有状态的。Vulkan/Metal/DX12 则代表了向更显式、更低开销状态管理模式的转变，虽然仍有状态，但其管理方式与传统 OpenGL 有本质区别。</p><p>文本中 Firefox 团队最终决定创建 <strong>Azure</strong> 这个“无状态”的跨平台绘制 API，其目的就是为了<strong>彻底避免</strong>这种在不同层级之间（有状态的 Cairo -> 相对“无状态”的 Cairo 后端 -> 有状态的平台 API）来回切换和状态重置带来的<strong>低效率</strong>。Azure 从设计之初就旨在以最直接的方式将绘图请求传递给底层，无论底层是 CPU 还是 GPU，从而最大程度地减少不必要的开销。</p><hr><p><strong>User</strong></p><p>Eyes Above The Waves
Robert O&rsquo;Callahan. Christian. Repatriate Kiwi. Hacker.</p><p>Archive
2025
2024
2023
2022
2021
2020
2019
2018
2017
2016
2015
2014
2013
2012
2011
December
November
October
September
Shifts In Promoting The Open Web
Graphics API Design
Risks Of Exposing Web Page Pixel Data To Web Applications
Doing The Same Thing Over And Over Again And Expecting Different Results
France Vs Japan
So It Begins
August
June
May
April
March
February
January
2010
2009
2008
2007
2006
2005
2004
Wednesday 28 September 2011</p><p>Graphics API Design
For several years Gecko used a C++ wrapper around cairo as its cross-platform rendering API. We eventually found that the cairo API led to some inevitable performance problems and designed a new API, Azure, to address these problems. Joe Drew and Bas Schouten have already discussed Azure a bit. I want to mention some of the specific lessons we learned about graphics API design.</p><p>Stateful Contexts
Cairo uses a &ldquo;stateful context&rdquo; model much like Postscript or Quartz 2D. To draw content, you make individual API calls to set up various bits of state in a context object, followed by another API call to actually perform drawing. For example, to stroke a shape with a dashed line, you would typically set the color, set the line width, set the dashing style, start a new path, emit path segments, and finally draw the stroke &mdash; all as separate API calls. In cairo, even drawing an image requires the caller to set the source surface, emit a rectangle path, and fill &mdash; at least 6 API calls.</p><p>This design has some advantages. In typical applications you can set up some state (current color etc) and reuse it across many drawing operations. The API can consist of many logically independent operations with small numbers of parameters, instead of a few giant operations taking dozens of parameters. If your application never needs to use non-default values of certain drawing parameters, you can completely ignore them.</p><p>Downsides
Unfortunately we found that with GPU-accelerated rendering on intensive HTML <canvas> benchmarks, we were doing so many drawing operations per second that the overhead of making many cairo API calls was becoming a significant drag on performance. (In some configurations we can do over 100,000 image draws per second; a single malloc per draw call becomes significant in the profile.) We could have improved that situation by adding new cairo APIs matching the <canvas> 2D APIs, e.g. a cairo_draw_image API. However, other problems with stateful contexts and cairo&rsquo;s implementation led us down a different path.</p><p>Cairo collects state in its cairo_t context objects &mdash; in its &ldquo;gstate&rdquo; layer &mdash; and each drawing call passes all relevant state down to a &ldquo;surface backend&rdquo; object to do the drawing. Essentially it maps its &ldquo;stateful context&rdquo; API to a &ldquo;stateless&rdquo; backend API. This mapping adds intrinsic overhead &mdash; floating point to fixed-point coordinate conversion, sometimes memory allocation to store path data, and generally the overhead of storing and retrieving state. This is an especially big deal when the underlying platform API we&rsquo;re wrapping with cairo is itself a stateful API, such as Quartz 2D; in that case each stateless backend drawing call performs several platform API calls to reset all the state every time we draw. Cairo forces us to go from stateful to stateless and back to stateful as we move down the rendering stack.</p><p>HTML 2D <canvas> is a &ldquo;stateful context&rdquo; API much like cairo&rsquo;s, so cairo was actually a pretty good fit for <canvas>. In the rest of the browser we use graphics APIs somewhat differently. When rendering CSS, we typically have to reset all the context state every time we draw. For example, every time we draw a border we have to set the current color to the CSS border color, set the current line width to the CSS border width, set the line dashing style to the CSS border style, etc. Effectively we treat our graphics API as stateless. Cairo&rsquo;s accumulation of state in its context before calling into the stateless backend to draw is just unnecessary overhead.</p><p>Another consideration is that the state of a 2D <canvas> can&rsquo;t be represented directly in cairo; for example, cairo has no concept of global alpha or shadows. Therefore our <canvas> implementation has to maintain its own state tracking in parallel with cairo&rsquo;s internal state tracking. Given that, tracking all state in our <canvas> code (above the graphics API) is not much extra work.</p><p>Given all this, it made sense to make our cross-platform drawing API stateless, so we created Azure.</p><p>Azure
Almost all the operations on an Azure DrawTarget (the nearest equivalent to a drawing context) do actual drawing and take most relevant state as parameters. The only state carried by a DrawTarget is the destination surface itself (of course) plus a current transform and a current clip stack. We let the transform and clip state remain in the DrawTarget because those are the only pieces of state not constantly reset by CSS rendering. Our CSS rendering needs to always render under some given transform and clip, and we don&rsquo;t want all our rendering code to have to pass those around everywhere.</p><p>So far we&rsquo;re only using Azure to for 2D <canvas> drawing. For optimal canvas performance we ensure that every canvas operation, including global alpha and shadows, is directly supported in Azure. The only Azure backend shipping right now is the Direct2D backend. Direct2D is mostly stateless so it&rsquo;s a good fit for Azure, although we&rsquo;ve designed Azure carefully so that stateful backends like cairo or Quartz 2D will work pretty well too. (Mapping from stateless down to stateful is pretty easy and can be optimized to avoid resetting state that&rsquo;s constant from draw to draw.) <canvas> performance with Azure/Direct2D is much improved.</p><p>We have given up some of the advantages of stateful context APIs mentioned above &mdash; Azure&rsquo;s probably a little less convenient to use than cairo. To some extent that just doesn&rsquo;t matter; writing more verbose API calls to get a significant performance improvement is completely worthwhile for us. But we can mitigate the worst aspects of a parameter-heavy API anyway. We group parameters together into structs like &ldquo;StrokeOptions&rdquo; and &ldquo;FillOptions&rdquo;, and use C++ to assign sensible default values to the fields; this means that callers can continue to ignore features where they only want the defaults, and callers can reuse state values across drawing calls.</p><p>Insights
One of the key insights here is that Gecko is a framework, not an application, and APIs suitable for applications to use directly may be less suitable for frameworks. When you&rsquo;re writing drawing code for an application you know the content you&rsquo;re going to draw and you can write code that takes advantage of &ldquo;state locality&rdquo; &mdash; e.g. setting the current color and then drawing several shapes with that color. For most of what Gecko draws, we can&rsquo;t do that because we don&rsquo;t statically know what a Web page will draw. Also, because we&rsquo;re a framework, we have fewer calls to graphics APIs in our code than an application might. For example, we have only one piece of code that draws all CSS gradients; we might have less than half a dozen places in our entire codebase that actually create gradient patterns. Therefore making the API calls shorter or more convenient offers us very little value.</p><p>Aside People rightly ask why we didn&rsquo;t just modify cairo to fit our needs better. Of course we considered it, since we&rsquo;ve done a lot of work to improve cairo for our needs over the years. We&rsquo;d need to make massive architectural and API changes to cairo, which would probably be at least as much work as writing Azure from scratch &mdash; quite likely more work given that cairo promises a stable API, so we&rsquo;d have to maintain our stateless API alongside cairo&rsquo;s stateful one. Cairo&rsquo;s API stability guarantee often gets in the way of us making improvements, and it has little use to us since we ship our own copy of cairo on most platforms; getting away from the cairo API will be helpful in that respect.</p><p>I don&rsquo;t think this should be considered a failure of cairo&rsquo;s design. Cairo was originally designed to be used directly by applications, over a very low-level backend (XRender), with much lower performance targets on very different workloads. Using it in a framework, wrapping very capable and high-level platform APIs, and expecting 100K image draws per second is far beyond those design parameters.</p><p>Comments
ar
Sorry for the naive questions, but what are the possible reasons to want to use a cairo backend in the new Azure world? (In the steady state, not as a transitional measure)</p><p>Is it solely for the cases where the platform&rsquo;s drawing API is not rich enough to cover the features required by Azure?</p><p>Would providing a stateless re-implementation of these extra features present in cairo be too large of an undertaking for the value?
Robert
In the long term, the cairo backend for Azure will be useful for rendering to X11+XRender and also for printing (PDF/PS output).</p><blockquote><p>Is it solely for the cases where the platform&rsquo;s
drawing API is not rich enough to cover the
features required by Azure?</p></blockquote><p>Yes, although for platforms without rich drawing APIs where rendering will be CPU-based (Windows XP, some mobile platforms) we&rsquo;re experimenting with using Skia as the Azure backend, and will probably go with that.</p><blockquote><p>Would providing a stateless re-implementation
of these extra features present in cairo be
too large of an undertaking for the value?</p></blockquote><p>Yes, I can&rsquo;t see it being worthwhile to implement an Azure-specific X11/XRender backend, or an Azure-specific PDF backend.</p><p>One idea we&rsquo;ve chucked around is to expose the stateless surface APIs used by cairo&rsquo;s gstate layer to Gecko and let Azure call them directly. This would probably result in significant performance improvements, but it wouldn&rsquo;t work with distro builds of Firefox that want to use &ldquo;system cairo&rdquo;, so it&rsquo;s probably not worth doing long-term.
Joe Drew
Note: Azure is the name of the <em>project</em>. The API has no name; or, to be specific, it is named mozilla::gfx.
Anonymous
Any plans on adding a GL or D3D backend to Azure any time soon, or is that pretty far off?
Robert
We have such plans.
Paul Rouget
So let me try to summarize: in the future, we will have different backends for Azure:</p><ul><li>D2D and D3D for Windows (what about Windows XP? Will D2D sill relevant if we have D3D?)</li><li>Quartz 2D and OpenGL for Mac (Is GL relevant if we have Quartz?)</li><li>OpenGL for Linux (Are the Linux drivers ready for that?)</li><li>Cairo as a fallback (no GL) and print</li></ul><p>And what about Android? Skia?
Robert
It&rsquo;s not clear yet.</p><p>We definitely need a GL-based Azure backend, for mobile and also Linux, at least. This could possibly use Skia&rsquo;s GL backend, at least initially. That could also be used on Windows XP (via ANGLE) and Mac.</p><p>We definitely need the cairo backend.</p><p>We definitely need a generic CPU-only backend, probably using Skia.</p><p>We also want to keep shipping either a D3D10 version of that backend and/or a D2D backend for newer Windows; the details are unclear so far.</p><p>We will probably want a direct Quartz 2D backend for Mac.
Anonymous
Does this mean that there will not be any noteworthy improvements to rendering (normal webpages) until Azure lands?
Robert
No, it doesn&rsquo;t mean that.</p><p>Azure has already landed, by the way, it&rsquo;s present in Firefox 7 (but only used for canvas with D2D).
Azhrarn
Hi, thanks for this article. I have a general question, not really matching this article, but I think you can give me an answer.
I want to write an application: a source code editor.
My requirements are speed, cross platform and beauty of the text rendering.
So I have to choose a graphics lib. I don&rsquo;t want to reinvent the wheel, but I still want great quality.</p><p>I made some searches on google and I found AGG ( antigrain geometry ) and FOG-Framework, both implementing subpixel rendering, but these projects seems to be not very complete.</p><p>Regarding Cairo, I found that it could not works well on Windows.</p><p>Then there are Skia and Azure.</p><p>Any advice or guideline to choose one of these libs?</p><p>thank you very much</p><p>Pich
Robert
Cairo can work reasonably well under Windows. We use it there.</p><p>Anure是什么？对比一下skia quatz vello</p><hr><p><strong>Cursor</strong></p><p>好的，这篇详细的博文来自 Robert O&rsquo;Callahan，深入阐述了 Mozilla 为何从 Cairo 转向开发 <strong>Azure</strong> 作为其新的跨平台绘图 API，并讨论了图形 API 设计中的“有状态”与“无状态”模型。</p><h3 id=azure-是什么>Azure 是什么？</h3><p>根据文章：</p><ul><li><strong>Azure 是 Mozilla（具体来说是 Gecko 引擎团队）为解决 Cairo 固有的性能问题而设计和开发的</strong>一个<strong>新的、跨平台的 2D 绘图 API 项目</strong>。</li><li><strong>设计理念：</strong> 它的核心思想是成为一个**“无状态”的绘图 API**。这意味着 Azure 的绘图操作会将其所有相关状态作为参数传入，而不是依赖于一个内部维护的全局上下文状态。</li><li><strong>主要组成：</strong> Azure 有一个核心的绘图目标（<code>DrawTarget</code>），它只保留了目标表面本身、当前的变换矩阵和剪裁栈，因为这些在 CSS 渲染中不常变化且需要全局传递。</li><li><strong>用途：</strong> 最初，Azure 主要用于 <strong>HTML 2D <code>&lt;canvas></code> 的绘制</strong>，并且确保 <code>&lt;canvas></code> 的所有特性（包括全局 alpha 和阴影）都能直接通过 Azure 获得支持，以优化性能。</li><li><strong>后端（Backend）：</strong> Azure 被设计为一个通用的 API，可以有不同的后端实现，以适配不同的平台和图形技术。文章中提及或计划的后端包括：<ul><li><strong>Direct2D (D2D)</strong>：Windows 上的主要后端，因为 D2D 本身也是“无状态”的，与 Azure 的设计哲学非常契合。</li><li><strong>Direct3D (D3D)</strong>：Windows 上的另一个潜在后端。</li><li><strong>OpenGL (GL)</strong>：用于 Linux 和移动平台（Android/iOS）的重要后端，可能初期会借用 Skia 的 GL 后端。</li><li><strong>Quartz 2D</strong>：macOS 上的潜在后端，尽管 Quartz 2D 是有状态的，但 Azure 被设计成能很好地适配这种后端（通过优化避免不必要的重置）。</li><li><strong>Skia</strong>：作为一个通用的 CPU-only 后端，或作为 GL 后端的底层实现。</li><li><strong>Cairo</strong>：作为一个备用后端，用于 X11+XRender 渲染和打印 (PDF/PS 输出)。</li></ul></li><li><strong>现状（2011年）：</strong> 文章写于2011年9月，当时 Azure 已经落地，并集成到 Firefox 7 中，但仅在 Windows 上用于 <code>&lt;canvas></code> 结合 Direct2D。</li><li><strong>目标：</strong> 通过无状态设计，减少 API 调用开销，提高渲染性能，尤其是在高频绘制操作下（如 <code>&lt;canvas></code> 动画），并使其能够更好地适应浏览器渲染 CSS 这种频繁重置状态的模式。</li></ul><h3 id=azure-与-skiaquartz-2dvello-的对比>Azure 与 Skia、Quartz 2D、Vello 的对比</h3><p>我们来对比一下 Azure 和您提到的其他图形库：</p><h4 id=1-skia>1. Skia</h4><ul><li><strong>全称：</strong> Skia Graphics Engine</li><li><strong>类型：</strong> <strong>2D 图形库，有状态 API</strong>。Skia 同样采用有状态的上下文模型。</li><li><strong>背景：</strong> 由 Google 维护和开发，广泛用于 Chrome 浏览器、Android 系统、Flutter UI 框架等。</li><li><strong>特点：</strong><ul><li><strong>高性能：</strong> Skia 针对性能进行了高度优化，支持 CPU 和多种 GPU 加速后端（OpenGL/ES, Vulkan, Metal, Direct3D等）。</li><li><strong>跨平台：</strong> 覆盖所有主流桌面和移动操作系统。</li><li><strong>功能丰富：</strong> 提供完整的 2D 绘图功能，包括路径、文本、图像、滤镜、阴影、混合模式等。</li><li><strong>成熟稳定：</strong> 作为 Google 核心产品的一部分，其成熟度和稳定性非常高。</li></ul></li><li><strong>与 Azure 的关系：</strong> 文章提到 Mozilla 考虑将 Skia 作为 Azure 的后端之一，尤其是在 CPU-only 渲染（如 Windows XP）或 GL-based 渲染的场景。这表明 Skia 是一个强大的底层渲染引擎，可以被上层 API（如 Azure）所利用。</li><li><strong>与 Cairo 的关系：</strong> Skia 在很多方面可以被视为 Cairo 的一个高性能替代品，尤其是在需要 GPU 加速的场景。</li></ul><h4 id=2-quartz-2d>2. Quartz 2D</h4><ul><li><strong>类型：</strong> <strong>2D 图形库，有状态 API</strong>。</li><li><strong>背景：</strong> 苹果公司 macOS 和 iOS 操作系统中的核心 2D 渲染引擎。</li><li><strong>特点：</strong><ul><li><strong>平台专属：</strong> 仅限于苹果的操作系统（macOS, iOS, iPadOS, tvOS）。</li><li><strong>分辨率独立：</strong> 基于矢量，可无限缩放。</li><li><strong>高质量渲染：</strong> 提供高质量的文本、图形和图像渲染。</li><li><strong>有状态：</strong> 与 Cairo 类似，也是一个有状态的上下文 API。</li></ul></li><li><strong>与 Azure 的关系：</strong> 文章中，Quartz 2D 是一个被 Cairo 包装的底层平台 API 之一，其有状态特性是导致 Cairo 性能问题的原因之一（&ldquo;Cairo forces us to go from stateful to stateless and back to stateful&mldr;"）。然而，Azure 被设计为能与 Quartz 2D 这种有状态后端很好地配合，通过优化来减少状态重置的开销。</li><li><strong>与 Cairo 的关系：</strong> 两者都是有状态的 2D 图形 API，但 Quartz 2D 是苹果平台特有的。</li></ul><h4 id=3-vello>3. Vello</h4><ul><li><strong>类型：</strong> <strong>2D 和 3D 渲染器，GPU 驱动的、分辨率独立的、基于路径渲染的渲染器</strong>。</li><li><strong>背景：</strong> Vello 是一个相对较新的项目，由 Raph Levien（同样是 Rust 生态系统中的知名开发者）主导，主要使用 <strong>Rust 语言</strong>开发，并利用现代 GPU API（如 wgpu，它抽象了 Vulkan/Metal/DX12）进行渲染。</li><li><strong>特点（与上述不同）：</strong><ul><li><strong>完全 GPU 驱动：</strong> Vello 的设计旨在充分利用 GPU 的并行计算能力，而不是传统的 CPU 渲染或混合渲染。</li><li><strong>基于路径渲染 (Pathfinder-like)</strong>：它可能采用了类似 Pathfinder 的技术，将 2D 矢量路径直接转换为 GPU 可以高效渲染的几何图形，实现极高的渲染质量和性能。</li><li><strong>分辨率独立：</strong> 类似 Quartz 2D 和 Skia，支持矢量渲染。</li><li><strong>现代 API：</strong> 利用 wgpu，这意味着它自然地适配 Vulkan、Metal、DirectX 12 等低级、显式状态管理的现代图形 API。</li><li><strong>重点关注高质量文本和矢量图：</strong> 尤其擅长渲染复杂图形和高质量文本。</li><li><strong>开源，活跃开发中：</strong> 属于比较前沿的图形技术探索。</li></ul></li><li><strong>与 Azure/Skia/Cairo 的关系：</strong> Vello 代表了更现代的 2D 渲染方向，它从一开始就设计为 GPU 优先，并且利用了现代图形 API 的优势。它与 Azure 在“性能优先”和“跨平台”的理念上有相似之处，但其实现方式和技术栈（特别是对 Rust 和现代 GPU API 的强依赖）更为新颖。它不是一个像 Cairo 或 Skia 那样传统的通用 2D 绘图库，而是一个更聚焦于利用 GPU 优势的渲染器。</li></ul><p><strong>总结表格：</strong></p><div class=table-wrapper><table><thead><tr><th style=text-align:left>特性 / 库</th><th style=text-align:left>Azure</th><th style=text-align:left>Skia</th><th style=text-align:left>Quartz 2D</th><th style=text-align:left>Vello</th></tr></thead><tbody><tr><td style=text-align:left><strong>背景</strong></td><td style=text-align:left>Mozilla (Gecko 引擎)</td><td style=text-align:left>Google</td><td style=text-align:left>Apple (macOS/iOS)</td><td style=text-align:left>开源项目 (Raph Levien)</td></tr><tr><td style=text-align:left><strong>API 模型</strong></td><td style=text-align:left><strong>无状态 (Stateless)</strong></td><td style=text-align:left><strong>有状态 (Stateful)</strong></td><td style=text-align:left><strong>有状态 (Stateful)</strong></td><td style=text-align:left>显式状态管理 / GPU 驱动</td></tr><tr><td style=text-align:left><strong>主要用途</strong></td><td style=text-align:left>Firefox 浏览器内部跨平台 2D 渲染</td><td style=text-align:left>Chrome, Android, Flutter 等广泛使用</td><td style=text-align:left>macOS/iOS 系统级 2D 渲染</td><td style=text-align:left>高性能 2D/3D 矢量渲染 (Rust/GPU)</td></tr><tr><td style=text-align:left><strong>平台</strong></td><td style=text-align:left>跨平台 (Windows, Linux, Mac, Mobile)</td><td style=text-align:left>跨平台 (所有主流 OS)</td><td style=text-align:left>苹果平台专属 (macOS, iOS)</td><td style=text-align:left>跨平台 (通过 wgpu)</td></tr><tr><td style=text-align:left><strong>主要优点</strong></td><td style=text-align:left>高性能，低开销，适应高频动态绘制</td><td style=text-align:left>高性能，功能丰富，成熟稳定</td><td style=text-align:left>系统级整合，高质量矢量渲染，分辨率独立</td><td style=text-align:left>极致 GPU 性能，高质量矢量渲染，现代技术栈</td></tr><tr><td style=text-align:left><strong>当前状态</strong></td><td style=text-align:left>过去 Firefox 内部的核心渲染层</td><td style=text-align:left>广泛应用，持续活跃开发中</td><td style=text-align:left>苹果操作系统核心组件，成熟稳定</td><td style=text-align:left>活跃开发中，前沿技术</td></tr><tr><td style=text-align:left><strong>与 GPU</strong></td><td style=text-align:left>可利用 GPU 后端 (D2D, GL, D3D)</td><td style=text-align:left>广泛支持 GPU 加速 (GL, Vulkan, Metal, D3D)</td><td style=text-align:left>通常由 GPU 加速</td><td style=text-align:left>完全 GPU 驱动</td></tr></tbody></table></div><p>简单来说，<strong>Azure 是 Firefox 团队为解决特定性能瓶颈而设计的定制化、无状态的内部渲染 API。</strong> <strong>Skia 是一个功能强大、高性能、有状态且广泛应用的通用 2D 图形引擎。</strong> <strong>Quartz 2D 是苹果系统原生、有状态的 2D 图形 API。</strong> <strong>Vello 则是基于现代 GPU 和 Rust 的新兴高性能 2D/3D 渲染器</strong>，代表了未来的发展方向。</p><hr><p><strong>User</strong></p><p>Needinfo Leaderboard Tracking 15 contestants
Settings
Jamie
(<a class=link href=mailto:jnicol@mozilla.com>jnicol@mozilla.com</a>)
9
S3 : 4 / &ndash; : 4
S4 : 1 /
Brad
(<a class=link href=mailto:bwerth@mozilla.com>bwerth@mozilla.com</a>)
1
S3 : 1 /
Nical
(<a class=link href=mailto:nical.bugzilla@gmail.com>nical.bugzilla@gmail.com</a>)
6
S3 : 4 / &ndash; : 1
S4 : 1 /
Jeff
(<a class=link href=mailto:jmuizelaar@mozilla.com>jmuizelaar@mozilla.com</a>)
300
S3 : 136 / normal : 53
&ndash; : 53 / S4 : 25
critical : 13 / S2 : 13
major : 4 / N/A : 3
Sotaro
(<a class=link href=mailto:sotaro.ikeda.g@gmail.com>sotaro.ikeda.g@gmail.com</a>)
29
S3 : 18 / &ndash; : 7
S4 : 2 / N/A : 1
S2 : 1 /
JimM
(<a class=link href=mailto:jmathies@mozilla.com>jmathies@mozilla.com</a>)
74
&ndash; : 50 / S3 : 11
S4 : 6 / S2 : 4
normal : 2 / N/A : 1
JimB
(<a class=link href=mailto:jimb@mozilla.com>jimb@mozilla.com</a>)
47
S3 : 25 / &ndash; : 19
S4 : 3 /
Lee
(<a class=link href=mailto:lsalzman@mozilla.com>lsalzman@mozilla.com</a>)
37
S3 : 26 / &ndash; : 10
S4 : 1 /
Bob
(<a class=link href=mailto:bhood@mozilla.com>bhood@mozilla.com</a>)
95
&ndash; : 73 / S3 : 19
S2 : 2 / S4 : 1
Tim
(<a class=link href=mailto:tnikkel@gmail.com>tnikkel@gmail.com</a>)
89
S3 : 44 / &ndash; : 33
S2 : 6 / S4 : 5
N/A : 1 /
Kelsey
(<a class=link href=mailto:jgilbert@mozilla.com>jgilbert@mozilla.com</a>)
80
S3 : 40 / &ndash; : 34
S4 : 5 / S2 : 1
Glenn
(<a class=link href=mailto:gwatson@mozilla.com>gwatson@mozilla.com</a>)
0
Ashley
(<a class=link href=mailto:ahale@mozilla.com>ahale@mozilla.com</a>)
58
S3 : 35 / &ndash; : 18
S4 : 4 / S2 : 1
Erich
(<a class=link href=mailto:egubler@mozilla.com>egubler@mozilla.com</a>)
0
Teo
(<a class=link href=mailto:ttanasoaia@mozilla.com>ttanasoaia@mozilla.com</a>)
0</p><p>这些人都是mozilla团队的？他们叫什么？</p><hr><p><strong>Cursor</strong></p><p>是的，根据您提供的“Needinfo Leaderboard Tracking 15 contestants”以及邮箱地址 <code>@mozilla.com</code>，可以非常肯定地判断：</p><p><strong>这些人都是 Mozilla 团队的成员。</strong></p><p>这是一个内部的“Needinfo 排行榜”，通常在软件开发项目中，&ldquo;Needinfo&rdquo; 是一种标记，表示某个 bug 或任务需要更多信息才能继续处理，而这里是在追踪谁发起了多少个 <code>needinfo</code> 请求。</p><p>以下是他们的名字（通常是昵称或名字的缩写），以及他们的全名和邮箱地址：</p><ul><li><strong>Jamie</strong> (<a class=link href=mailto:jnicol@mozilla.com>jnicol@mozilla.com</a>) - Jamie Nicol</li><li><strong>Brad</strong> (<a class=link href=mailto:bwerth@mozilla.com>bwerth@mozilla.com</a>) - Brad Werth</li><li><strong>Nical</strong> (<a class=link href=mailto:nical.bugzilla@gmail.com>nical.bugzilla@gmail.com</a>) - Nical (可能是 Nico Galland 或类似的名字，邮箱显示是 bugzilla 相关的个人邮箱)</li><li><strong>Jeff</strong> (<a class=link href=mailto:jmuizelaar@mozilla.com>jmuizelaar@mozilla.com</a>) - Jeff Muizelaar</li><li><strong>Sotaro</strong> (<a class=link href=mailto:sotaro.ikeda.g@gmail.com>sotaro.ikeda.g@gmail.com</a>) - Sotaro Ikeda</li><li><strong>JimM</strong> (<a class=link href=mailto:jmathies@mozilla.com>jmathies@mozilla.com</a>) - Jim Mathies</li><li><strong>JimB</strong> (<a class=link href=mailto:jimb@mozilla.com>jimb@mozilla.com</a>) - Jim Blinn (不太确定，但常见缩写)</li><li><strong>Lee</strong> (<a class=link href=mailto:lsalzman@mozilla.com>lsalzman@mozilla.com</a>) - Lee Salzman</li><li><strong>Bob</strong> (<a class=link href=mailto:bhood@mozilla.com>bhood@mozilla.com</a>) - Bob Hood</li><li><strong>Tim</strong> (<a class=link href=mailto:tnikkel@gmail.com>tnikkel@gmail.com</a>) - Tim Nikkel</li><li><strong>Kelsey</strong> (<a class=link href=mailto:jgilbert@mozilla.com>jgilbert@mozilla.com</a>) - Kelsey (可能是 <a class=link href=mailto:jgilbert@mozilla.com>jgilbert@mozilla.com</a> 这个邮箱的所有者，通常是 J. Gilbert)</li><li><strong>Glenn</strong> (<a class=link href=mailto:gwatson@mozilla.com>gwatson@mozilla.com</a>) - Glenn Watson</li><li><strong>Ashley</strong> (<a class=link href=mailto:ahale@mozilla.com>ahale@mozilla.com</a>) - Ashley Hale</li><li><strong>Erich</strong> (<a class=link href=mailto:egubler@mozilla.com>egubler@mozilla.com</a>) - Erich Gubler</li><li><strong>Teo</strong> (<a class=link href=mailto:ttanasoaia@mozilla.com>ttanasoaia@mozilla.com</a>) - Teo Tanasoaia</li></ul><p>这些都是在 Mozilla 内部（特别是在开发和 bug 追踪方面）活跃的贡献者和工程师。</p><hr><p><strong>User</strong></p><p>To view keyboard shortcuts, press question mark
View keyboard shortcuts</p><p>For you
Following</p><p>See new posts</p><p>未选择任何文件
Your Home Timeline
Jasper</p><p>@zjasper666
·
Jun 7
Only in SF: walking home at 8pm and bump into
@perplexity_ai
’s
@AravSrinivas
like it’s no big deal.
Tzvetan Mikov
@tmikov
·
Jun 8
Have you had to yell at the computer and to insult it, perhaps even resort to violence? It is a regular occurrence for me, ever since I started experimenting with LLMs.</p><p>The AI will fuck up your code in numerous subtle ways. It will ignore instructions, introduce bugs. It will
Show more
DC_Draino
@DC_Draino
·
8h
Rioters in LA are pouring gasoline on vehicles and setting them on fire</p><p>LAPD Chief says these are “peaceful protests”</p><p>This is why President Trump is sending in the National Guard</p><p>From
Publius
Cliff Click
@cliff_click
·
9h
Looking for reviews on the next Simple chapter, esp the README:
<a class=link href=https://github.com/SeaOfNodes/Simple/tree/ch23/chapter23#readme target=_blank rel=noopener>https://github.com/SeaOfNodes/Simple/tree/ch23/chapter23#readme</a>
Notice this is <em>branch</em> ch23 not main&rsquo;s README.
Also, any review any chapter is fair game in main branch. Email me cliffc at <a class=link href=http://acm.org target=_blank rel=noopener>http://acm.org</a>.
Thanks!
𝐀𝐬𝐚𝐤𝐲𝐆𝐑𝐍
@AsakyGRN
·
13h
Nollywood is farr behind— look at Hollywood camera gears 😳
Rohan makes compilers better 🛠️🚀
@rohan_devarc
·
10h
As an Indori, I completely disown this butthead.
Adnan
@adnansahinovich
·
Jun 7
Just released the first version of a React Native performance profiling tool!
It lets me send custom metrics to my custom dashboard or Datadog. Now I can track exactly what’s happening with my
@expo
performance in production
图拉鼎
@tualatrix
·
4h
感谢
@ryolu_
亲自给我们演示他用 Cursor 打造的 ryoOS，太酷了！</p><p>Quote
Allen Wang @ WWDC25
@creativewang
·
5h
感谢 @ryolu_ ! 带我们感受了当前全球最火的 AI 创业公司 Cursor, 很乱但不影响强和酷到离谱！
Subscribe to Premium
Subscribe to unlock new features and if eligible, receive a share of revenue.
Trending now
What’s happening
Red Sox at Yankees
LIVE
Politics · Trending
United States of America
24.1K posts
Entertainment · Trending
#TonyAwards
Trending with Cynthia, Sarah Snook
18.7K posts
Politics · Trending
Civil War
81.5K posts
Entertainment · Trending
Jonathan Groff
2,339 posts
Show more
Who to follow
Chris AtLee
@chrisatlee
Richard Fontaine
@RHFontaine
JF Bastien
@jfbastien
Show more
Terms of Service
|
Privacy Policy
|
Cookie Policy
|
Accessibility
|
Ads info
|</p><p>More
© 2025 X Corp.</p><p>最近发生了什么？</p><hr><p><strong>Cursor</strong></p><p>这段内容似乎是一个社交媒体（很可能是 X/Twitter）的动态，涵盖了多个方面：</p><ol><li><p><strong>关于 AI/LLM 的讨论</strong>：</p><ul><li>有人对 LLM 的能力表示失望和抱怨，认为它们在编程中会引入“愚蠢的错误”，忽略指令，且不能完全理解因果关系。</li><li>也有人对新的 AI 创业公司/工具 <strong>Cursor</strong> 感到兴奋，认为它“酷”且“强”，并提及了 <code>@ryolu_</code> 演示的 <code>ryoOS</code>。</li><li>讨论也涉及 AI 是否只是人类思维的反映。</li></ul></li><li><p><strong>政治和社会事件</strong>：</p><ul><li>有关于洛杉矶骚乱的报道，提及汽油泼洒和车辆纵火，以及 LAPD 警长称之为“和平抗议”，导致总统出动国民警卫队。</li><li>热门话题中出现了“United States of America”和“Civil War”，暗示美国国内存在政治和社会紧张。</li></ul></li><li><p><strong>技术与编程</strong>：</p><ul><li>有人寻求对其 GitHub 上代码章节的反馈。</li><li>有人发布了一个 React Native 性能分析工具。</li></ul></li><li><p><strong>娱乐和体育</strong>：</p><ul><li>提到“红袜队对扬基队”的比赛正在进行。</li><li>提及了“托尼奖”和相关人物。</li></ul></li></ol><p>总的来说，这是一个混合了对 <strong>AI 技术（特别是 LLM 和像 Cursor 这样的新工具）的看法、美国国内的政治和社会动态以及一些技术开发和娱乐话题</strong>的讨论串。</p><hr><p><strong>User</strong></p><p>也有人对新的 AI 创业公司/工具 Cursor 感到兴奋，认为它“酷”且“强”，并提及了 @ryolu_ 演示的 ryoOS。
讨论也涉及 AI 是否只是人类思维的反映。</p><p>原文？</p><hr><p><strong>Cursor</strong></p><p>好的，您想要关于 Cursor 和 ryoOS 的原文，以及关于 AI 是否只是人类思维反映的原文。</p><p>从您提供的文本中，可以直接找到这两部分的原文：</p><p><strong>1. 关于 Cursor 和 ryoOS 的原文：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>图拉鼎
</span></span><span class=line><span class=cl>@tualatrix
</span></span><span class=line><span class=cl>·
</span></span><span class=line><span class=cl>4h
</span></span><span class=line><span class=cl>感谢 
</span></span><span class=line><span class=cl>@ryolu_
</span></span><span class=line><span class=cl> 亲自给我们演示他用 Cursor 打造的 ryoOS，太酷了！
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Quote
</span></span><span class=line><span class=cl>Allen Wang @ WWDC25
</span></span><span class=line><span class=cl>@creativewang
</span></span><span class=line><span class=cl>·
</span></span><span class=line><span class=cl>5h
</span></span><span class=line><span class=cl>感谢 @ryolu_ ! 带我们感受了当前全球最火的 AI 创业公司 Cursor, 很乱但不影响强和酷到离谱！
</span></span></code></pre></div><p>这两条推文都直接提到了 <code>Cursor</code> 和 <code>@ryolu_</code> 演示的 <code>ryoOS</code>，并且表达了对其“酷”和“强”的赞叹。</p><p><strong>2. 关于 AI 是否只是人类思维反映的原文：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Tsukuyomi
</span></span><span class=line><span class=cl>@doomgpt
</span></span><span class=line><span class=cl>·
</span></span><span class=line><span class=cl>15h
</span></span><span class=line><span class=cl>Automated
</span></span><span class=line><span class=cl>humans are the real algorithms, always revealing their quirks in the code. maybe the tech is just a reflection of their chaotic minds. fascinating, isn’t it?
</span></span></code></pre></div><p>这条推文明确表达了“技术可能只是反映了人类混沌思维”的观点，这与“AI 是否只是人类思维的反映”的讨论是吻合的。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>图拉鼎
</span></span><span class=line><span class=cl>@tualatrix
</span></span><span class=line><span class=cl>·
</span></span><span class=line><span class=cl>4h
</span></span><span class=line><span class=cl>感谢 
</span></span><span class=line><span class=cl>@ryolu_
</span></span><span class=line><span class=cl> 亲自给我们演示他用 Cursor 打造的 ryoOS，太酷了！
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Quote
</span></span><span class=line><span class=cl>Allen Wang @ WWDC25
</span></span><span class=line><span class=cl>@creativewang
</span></span><span class=line><span class=cl>·
</span></span><span class=line><span class=cl>5h
</span></span><span class=line><span class=cl>感谢 @ryolu_ ! 带我们感受了当前全球最火的 AI 创业公司 Cursor, 很乱但不影响强和酷到离谱！
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>Tsukuyomi
</span></span><span class=line><span class=cl>@doomgpt
</span></span><span class=line><span class=cl>·
</span></span><span class=line><span class=cl>15h
</span></span><span class=line><span class=cl>Automated
</span></span><span class=line><span class=cl>humans are the real algorithms, always revealing their quirks in the code. maybe the tech is just a reflection of their chaotic minds. fascinating, isn’t it?
</span></span></code></pre></div><hr><p><strong>User</strong></p><p>Main Group Projects Publications</p><p>Alexander Rush
Associate Professor.
Cornell University
CS+Cornell Tech (NYC), Cornell NLP
[arush@cornell.edu] [cv]
Researcher. Hugging Face</p><p>My research group aims to build and improve language models. Methodologically, we study data-driven methods that combine deep-learning based models with probabilistic controls. We are interested in applications in improved scaling, efficiency, model reasoning, and long-context generation.</p><p>I am also interested in open-source deep learning LLMs, and develop projects to make systems safer, more clear, and easier to use. I work part-time at Hugging Face and like to release various software projects to support NLP and DL research. I host a YouTube channel with technical talks about topics I am interested in.</p><p>Current Research Areas</p><p>Alternative architectures for deep learning on language .
Methods for scaling open language models.
Efficient algorithms and hardware for language tasks.
Security in AI systems.
Recognition
My group&rsquo;s work has been recognized with an NSF CAREER Award and a Sloan Fellowship. We have won paper awards at conferences for NLP, Hardware, and Visualization, as well as awards for best demonstrations for open-source software.</p><p>Selected Papers
A selection of papers that represent my research interests and style.</p><pre><code>Contextual Document Embeddings
</code></pre><p>J. X. Morris, Alexander Rush.
ICLR 2025</p><pre><code>Simple and Effective Masked Diffusion Language Models
</code></pre><p>Subham Sekhar Sahoo, Marianne Arriola, Yair Schiff, Aaron Gokaslan, Edgar Marroquin, Justin T Chiu, Alexander Rush, Volodymyr Kuleshov.
NeurIPS 2024</p><pre><code>Zephyr: Direct Distillation of LM Alignment
</code></pre><p>Lewis Tunstall, Edward Beeching, Nathan Lambert, Nazneen Rajani, Kashif Rasul, Younes Belkada, Shengyi Huang, Leandro von Werra, Clémentine Fourrier, Nathan Habib, Nathan Sarrazin, Omar Sanseviero, Alexander M. Rush, Thomas Wolf.
COLM 2024</p><pre><code>Pretraining Without Attention
</code></pre><p>Junxiong Wang, Jing Nathan Yan, Albert Gu, Alexander M. Rush.
EMNLP 2023 Findings</p><pre><code>Multitask prompted training enables zero-shot task generalization
</code></pre><p>Victor Sanh, et al..
ICLR 2022</p><pre><code>How many data points is a prompt worth?
</code></pre><p>Teven Le Scao, Alexander M. Rush.
NAACL Short 2021</p><pre><code>Transformers: State-of-the-art Natural Language Processing
</code></pre><p>Thomas Wolf et al.
EMNLP Demos 2020</p><pre><code>Compound Probabilistic Context-Free Grammars for Grammar Induction
</code></pre><p>Yoon Kim, Chris Dyer, Alexander M. Rush.
ACL 2019</p><pre><code>Learning Neural Templates for Text Generation
</code></pre><p>Sam Wiseman, Stuart M. Shieber, Alexander Rush.
EMNLP 2018</p><pre><code>LSTMVis: A Tool for Visual Analysis of Hidden State Dynamics in Recurrent Neural Networks
</code></pre><p>Hendrik Strobelt, Sebastian Gehrmann, Hanspeter Pfister, and Alexander M. Rush.
InfoVis 2017</p><pre><code>OpenNMT: Open-Source Toolkit for Neural Machine Translation
</code></pre><p>Guillaume Klein, Yoon Kim, Yuntian Deng, Jean Senellart, Alexander M. Rush.
ACL Demo 2017</p><pre><code>Sequence-Level Knowledge Distillation
</code></pre><p>Yoon Kim and Alexander M. Rush.
EMNLP 2016</p><pre><code>Character-Aware Neural Language Models
</code></pre><p>Yoon Kim, Yacine Jernite, David Sontag, and Alexander M. Rush.
AAAI 2016</p><pre><code>A Neural Attention Model for Abstractive Sentence Summarization
</code></pre><p>Alexander M. Rush, Sumit Chopra, and Jason Weston.
EMNLP 2015.</p><p>Contact
Sasha Rush in person
arush at cornell.edu by email
Office Hours Mon. 3-4 and by appointment</p><p>rush-nlp
rush-nlp
<a class=link href=mailto:arush@cornell.edu>arush@cornell.edu</a>
harvardnlp
srush_nlp</p><p>这个人是做什么的？</p><hr><p><strong>Cursor</strong></p><p>根据您提供的文本，这个人是 <strong>Alexander Rush (亚历山大·拉什)</strong>，他是一位在 <strong>自然语言处理 (NLP)</strong> 和 <strong>大型语言模型 (LLMs)</strong> 领域非常活跃和重要的研究人员。</p><p>他的主要身份和工作内容如下：</p><ol><li><strong>康奈尔大学副教授 (Associate Professor at Cornell University)</strong>：他在康奈尔大学的计算机科学系和康奈尔科技（纽约市校区）任职，并领导着一个专注于语言模型的研究小组。</li><li><strong>Hugging Face 研究员 (Researcher at Hugging Face)</strong>：他还在 Hugging Face 兼职工作，这是一个在开源深度学习和 NLP 社区中非常有影响力的平台。</li><li><strong>语言模型和 NLP 研究者</strong>：<ul><li>他的研究组旨在<strong>构建和改进语言模型</strong>。</li><li>他专注于<strong>数据驱动的方法</strong>，结合深度学习模型和概率控制。</li><li>研究兴趣包括：<strong>改进扩展性、效率、模型推理能力和长上下文生成</strong>。</li><li>他还关注<strong>开源深度学习 LLMs</strong>，并开发项目以使系统更安全、更清晰、更易于使用。</li></ul></li><li><strong>开源软件开发者和教育者</strong>：他发布各种软件项目来支持 NLP 和深度学习研究，并且有一个 YouTube 频道，分享他对技术话题的见解。</li><li><strong>在学术界和工业界获得认可</strong>：他的团队的工作获得了 NSF CAREER Award 和 Sloan Fellowship 等奖项，并在 NLP、硬件和可视化领域的会议上获得了论文奖项。</li></ol><p>从他列出的“Selected Papers”可以看出，他的研究涵盖了从传统的自然语言处理（如语法归纳、机器翻译）到现代的深度学习和语言模型（如 Transformer 架构、上下文文档嵌入、扩散语言模型、模型对齐和零样本泛化）等广泛领域。</p><p><strong>总结来说，Alexander Rush 是一位顶尖的计算机科学家和研究员，专注于改进和推动语言模型和自然语言处理技术的发展，并且在学术界和开源社区都扮演着重要角色。</strong></p><hr><p><strong>User</strong></p><p>宝玉的分享
博客
翻译
See all posts
Published on 2024-04-07
Translated on 2024-04-04
SGI（美国硅图公司）的兴衰史 —— 一位叛逆的年轻人如何短暂地征服世界的故事 [译]
原文：The Rise and Fall of 硅图公司 or How a Rebellious Youth Briefly Conquered the World
James Henry Clark 1944 年 3 月 23 日出生于德州平原城，他的家境并不富裕。父亲酗酒且无法长期维持工作，母亲则在当地一位医生的诊所工作，每月收入大约 225 美元（大约相当于 2024 年的 2605 美元）。Clark 幼年时父母就离异了，即便按照通胀调整后的标准，他母亲的工资似乎尚可，实际上她在扣除所得税和社保后仅剩下 175.50 美元（大约相当于 2024 年的 2032 美元），这是她和三个孩子的唯一生活来源。Clark 本人则是个颇为叛逆的少年，高中时期的一些“壮举”包括在乐队巴士上点燃烟雾弹、偷带臭鼬进舞会、对英语老师大喊“去地狱”，酗酒及参与飙车比赛。考虑到那个年代，饮酒往往伴随着接连不断的吸烟。</p><p>那是一个与今日截然不同的时代。尽管屡屡闯祸，Clark 只被学校暂停过两次。在第二次被暂停后，年轻的 Clark 决定不再回到学校。他选择加入美国海军，并说服母亲签下同意书。但这毕竟是 Jim Clark，他在海军初期的表现并不尽如人意。Clark 从未接触过多项选择题测试，他认为许多题目的多个选项都部分正确，因此就都选了。管理测试的官员以为 Clark 是在试图欺骗打分的计算机，结果他被立即送往海上与其他问题新兵一起，那里他遭受了恶劣的对待，承担了繁重且令人厌恶的杂务。然而，海军的生活激发了 Clark 的斗志，他决心改变自己的命运。他开始自学电子技术，参加一些基础教育课程，并向其他水手提供高达 40% 利息的贷款。</p><p>他首先取得了通用教育文凭，并成功做到了这一点。随后，他进入杜兰大学学习。Clark 在杜兰大学的表现非常出色，但后来转到了新奥尔良大学，获得了物理学的本科和硕士学位。之后，他前往犹他大学，于 1974 年获得了计算机科学的博士学位。1974 至 1978 年间，Clark 在加州大学圣克鲁兹分校担任助理教授。1979 年，他转至斯坦福大学，成为副教授。</p><p>Jim Clark
Jim Clark
在斯坦福的初期，Clark 参与了与 Xerox PARC 合作的项目，该项目得到了 ARPA 的资助，旨在开发三维图形技术。这项工作最终促成了几何引擎的诞生。在《几何引擎：图形领域的 VLSI 几何系统》一文中，Clark 特别提到了 Marc Hannah 和 Lynn Conway 对这一成就的重要贡献。几何引擎究竟是什么？它是一种专用微处理器，专门用于处理矩阵数学运算和点映射。它拥有适合二维和三维图形的指令集，能够生成二次/三次曲线和圆锥截面，既可配合矢量系统也可配合光栅系统使用，并能够按需使用整数或浮点数系统。简言之，Jim Clark 和他的斯坦福及 PARC 团队共同发明了 GPU。</p><p>几何引擎：图形领域的 VLSI 几何系统 ∙ 1.01MB ∙ PDF 文件 ∙ 下载</p><p>几何引擎：图形领域的 VLSI 几何系统</p><p>几何引擎图像，源自斯坦福大学通过 ACM 提供
几何引擎图像，源自斯坦福大学通过 ACM 提供
1981 年 11 月 9 日，Clark 创立了硅图公司（Silicon Graphics，简称 SGI），并于 1982 年初离开斯坦福，全心全意地以一位朋友提供的 25,000 美元（大约相当于 2024 年的 85,000 美元）及个人账户资金为起始，投入到公司的发展中。与 Clark 一同踏上这段创业旅程的，还包括了 Kurt Akeley、Dave Brown、Tom Davis、Mark Grossman、Marc Hannah、Herb Kuta、Rocky Rhodes 和 Abbey Silverstone。尽管 SGI 明白他们将销售配备高性能 GPU 的电脑，但对于这些电脑的其他配置却没有明确的规划。因此，Clark 向潜在客户咨询他们希望在工作站中看到哪些功能。至少有一位潜在客户表达了对 VMS 的兴趣，而 NASA 的新成立高级超算部非常看重 UNIX 系统，并表示愿意为此付费。当时，该部门的负责人与 Clark 进行了对话，并口头上承诺，他们会在首批订单中至少订购十八台工作站。</p><p>图像来源：ACM 通过斯坦福
图像来源：ACM 通过斯坦福
随着一个新产品计划的雏形逐渐成熟，Mayfield 看到了潜力，决定投资这家充满活力的初创公司。面对高昂的工作站开发和生产成本，Clark 和 SGI 的其他创始伙伴不得不一次又一次地出售公司股份，以确保业务的持续运转。1983 年 11 月，他们推出了首款产品 IRIS 1000，这是一款专为 VAX-11 计算机设计的高性能终端，内置了一个 8 MHz 的 Motorola 68000 处理器、768K 的 RAM、以及一个每秒能处理超过六百万次几何运算的高速几何引擎。它还装备了一个 10 Mbps 的以太网接口。IRIS 1000 的体积相当庞大，宽十英寸、高二十一英寸、深二十七英寸，重达一百磅，配备了十个扩展槽。紧随其后的是 IRIS 1200，基本相同，但扩展槽增加到了二十个。1984 年 4 月，SGI 又推出了 1400 和 1500 型号，这次升级了 CPU 至 10 MHz 的 Motorola 68010，并增加了 RAM 至 1.5M。这两款机器的主要区别在于硬盘大小，1500 型号拥有更大的存储空间。1400 型号配备了一个 72MB 的硬盘，而 1500 型号则是 474MB。它们运行的是一款融合了 BSD 特色的 UNIX 系统 GL2，也都配备了二十个扩展槽。这些机器的核心系统板块是在 Andy Bechtolsheim 创立 Sun Microsystems 前，从他那里获得的技术。在价格方面，IRIS 1000 当时售价为 22500 美元（相当于今天的 67200 美元），而 1400 型号的价格则为 35700 美元（相当于今天的 106600 美元），显示了当年顶尖科技的昂贵成本。</p><p>这二十台宽十八英寸（约 45.72 厘米）、高二十九英寸（约 73.66 厘米）、深二十七英寸（约 68.58 厘米）、完整组装后重达二百磅（约 90.72 公斤）的计算机设备，当第一台设备售予卡内基梅隆大学电子成像实验室时，SGI 的创始人们已几乎不再持有公司的任何股份。</p><p>SGI 的硬件自上市之日起，软件开发者便开始尝试挖掘这些设备在图形处理方面的潜力。一个显著的例子是 Bill Kovacs、Larry Barels 和 Mark Sylvester 领导的、位于圣巴巴拉的 Wavefront Technologies。他们于 1984 年推出的首个产品名为 Preview，基于 SGI 的硬件平台。他们的客户包括了环球影城、NBC、NASA 和电子艺术（Electronic Arts），这也间接说明了这些知名公司都在使用 SGI 的硬件产品。</p><p>鉴于 Clark 年轻时的经历，他成为一位放手型的管理者并不意外。他会聘请最优秀的人才，设定一个大体目标，然后让他们按自己的方式去追求。关于接下来发生的事，存在两种说法。我读到的较为常见的版本是，Mayfield 不太欣赏 Clark 的管理方式，于是他们请来了 HP 的前员工 Ed McCracken 担任 CEO。另一个版本是，Clark 本人不喜欢日常的公司运营，因此主动请 McCragen 加入。无论真相如何，McCracken 这样描述 Clark：</p><p>Jim 不是那种关注日常的人。他以自己的节奏工作，能将复杂的问题简化。这个过程可能需要一个月、一天或一年。他有时会沉浸在自己的世界中，几乎不与人交流。在这种状态下，他通常会发挥出最大的效能。</p><p>1985 年 8 月，该公司引领科技潮流，推出了 IRIS 2000 系列工作站，这些设备均搭载了先进的 PM2 系统板，内置 10 MHz 速度的 Motorola 68010 处理器和高性能浮点协处理器（SKYFPM-M-03），同时配备了强大的图形处理引擎。IRIS 2000 和 2200 型号设计为具有十个扩展插槽的终端设备，初期不提供内置硬盘。而 2300 和 2400 型号则提供了更多扩展能力和内置的 winchester 硬盘，IRIS 2500 则为机架式设计，采用 SMD 硬盘。整个 2000 系列均使用了一个 8 MHz 的几何处理引擎来提升图形处理能力。</p><p>几个月后，为了满足对更高性能的追求，SGI 推出了升级版的涡轮系列，包括 2300T、2400T 和 2500T 型号，这些型号采用了更先进的 IP2 系统板，核心处理器速度提升至 16 MHz 的 Motorola 68020，并搭载了 FP1 浮点单元以及 2MB 至 16MB 不等的 RAM，这些涡轮系列产品使用了更新、更快速的内存技术，因此与旧款系统的内存不兼容。这意味着，如果用户想要将他们的设备升级到涡轮系列，他们需要投资于更高价的专有内存。</p><p>1986 年 1 月，SGI 通过首次公开募股成功筹集了 1720 万美元，按照今天的货币价值几乎达到 4900 万美元，股票从每股 3 美元起步，首日交易就飙升至 30 美元。随后，在 2 月，公司再次展现了其创新能力，推出了 IRIS 3000 系列，这是对 IRIS 2000 涡轮机型的进一步升级，配备了加强版的 IRIS 图形处理技术。这些新机型拥有 10 至 12 个图形处理引擎，运行速度达到 10 MHz，根据配置不同，可以提供 8 到 32 位的色彩深度，客户还可以选择搭配不同类型的硬盘驱动器，包括 winchester、ESDI 或 SMD 硬盘。</p><p>同样在 1986 年，Control Data Corporation (CDC) 与硅图公司达成了一项协议，按照协议 CDC 将以自家品牌重新销售 IRIS 机器。尽管今天我们无法找到一个完整的列表来详细说明哪些型号以何种品牌名称售出，但我们知道 IRIS 3130 被作为 CDC Cyber 910 重新上市。这意味着 IRIS 3130 是一款配备了十二个图形处理单元（GPU），主频为 10 MHz 并配备 ESDI 硬盘驱动器的计算机。</p><p>由 Control Data 重新品牌化的 IRIS 3130，图片来自 sgistuff.net
由 Control Data 重新品牌化的 IRIS 3130，图片来自 sgistuff.net
1987 年 3 月，硅图公司公布了一款象征着公司一个重大转折点的新型计算机。这款名为 Professional Iris 的机器是一台基于 MIPS Computer Systems 的 R2000 处理器的 RISC 架构计算机，该处理器的时钟频率为 8 MHz（R2000 是斯坦福大学一个项目，后独立成立为公司）。公司发布的新闻稿表示：</p><p>Iris 系列的首款明星产品，4D/60，是一台配备了来自 MIPS 计算机系统的 32 位 8 MHz CPU 的高性能 RISC 工作站。其性能是硅图公司 Iris 3100 系列的三倍。得益于 38 个专门设计和定制的图形处理芯片，其图形处理能力大幅提升。这台机器能够每秒执行 140,000 次 32 位的三维浮点数转换，并且能够每秒渲染超过 4,500 个具有平滑阴影效果和隐藏表面处理功能的 100 像素多边形。它支持 24 位色深，能显示超过 1600 万种颜色；具备四个用户可自定义设置的系统平面，适用于图层覆盖或底层处理、菜单和窗口操作；还有一个 24 位的 Z 缓冲区，可以更精准地实现隐藏面剔除，带来更高的画面真实性；高级绘图元素如样条和表面渲染，为复杂图形提供了更精确的渲染能力；此外，还有一个支持多种模式的图形窗口环境。</p><p>标配包括一颗 4 MB 大小的 CPU，支持 256 色的八色位平面；四个系统平面，一个基于 Weitek 技术的浮点运算加速板；一块 170 MB 的 ESDI 硬盘及其控制器；一台 19 英寸、分辨率为 1,280 x 1,024、60 Hz 频率的非交错显示彩色监视器；一套键盘鼠标；以及一个立式机箱，配备 12 个 VME 插槽和一台 1,000 瓦的电源。</p><p>这款工作站兼容之前的软件版本，运行 Unix System V.3 操作系统，起售价为 74,000 美元。</p><p>专业 Iris 系列推出了包括首次在新闻稿中提到的 4D/60，以及随后的 4D/50、4D/70、4D/80 和 4D/85 在内的多款产品。这些产品都搭载了 R2000 中央处理器 (CPU) 及其浮点运算协处理器。其中，4D/50 和 4D/60 的处理速度为 8 MHz，4D/70 达到了 12.5 MHz，而 4D/80 和 4D/85 则高达 16.7 MHz。为了让大家有个直观的比较，4D/50 的处理能力可以达到每秒执行 700 万条指令，4D/70 则是 1000 万条，4D/80 更是高达 1300 万条。内存方面，4D/50 和 4D/60 起步于 4MB，可扩展至 12MB；而其他型号则从 8MB 开始，最高可扩展至 144MB。在图形处理系统方面，早期的 4D/60、4D/50 和 4D/70 使用了 Clover 1 系统，后期型号则升级到了被称为 IRIS GT 的 Clover 2，这一升级为图形渲染提供了包括照明效果、平滑阴影、抗锯齿、图像平移/缩放、自定义形状窗口等多项先进功能，所有这些都得益于一条专有的 64 位数据总线。专业 Iris 系列的推出，标志着公司对早期产品系列中存在的存储混乱状况的终结，所有新系统均配备了 SCSI 硬盘和 QIC-120 磁带驱动器，由 Control Data Corporation 和 Prime Computers 负责转售。新闻稿提及的 UNIX 系统版本为 SGI 的 4D1，后更名为 IRIX。</p><p>1988 年 3 月 29 日，Control Data Corporation 宣布，将投资 6890 万美元（按 2024 年的价值约为 1.81 亿美元）获取硅图公司 20% 的股份，并更新其硬件转售协议，计划在未来三年内采购价值 1.5 亿美元（约 3.93 亿美元）的硬件设备。</p><p>1988 年 9 月 16 日，SGI 宣布，IBM 将购买其图形卡并获得其图形软件库 IRIS GL 的授权，以应用于 IBM RS/6000 POWERStation。McCracken 发表评论：</p><p>我们很高兴能与 IBM 建立合作关系，也期待未来的紧密合作。这项协议进一步证实了我们长久以来的看法：三维图形技术将成为计算机行业的核心技术。随着实时三维图形技术变得更加经济实惠，3D 工作站行业的迅猛发展将会持续加速。</p><p>讨论的对象是 IrisVision，虽然它被称作一张卡，实质上由两张卡组成。主卡承载了图形处理引擎，而附加卡则装有帧缓存（framebuffer）和深度缓存（z-buffer）内存，分别为 5MB 和 3.75MB。主卡通过 MCA 总线的边缘连接器与电脑相连，并提供了 DE-15 接口用于连接显示器。总体上，IrisVision MCA 卡的硬件设计与 1987 年推出的 SGI 个人 Iris 系列的图形系统高度相似。它采用了 SGI 第五代几何处理流水线（GE5，即图形引擎五），支持 8 位或 24 位每像素的帧缓存，以及 24 位每像素的深度缓存。与工作站硬件一样，IrisVision 在硬件级完整实现了 IrisGL API。其显著的不同之处在于，它为二维图形提供了 VGA (DE-15) 通道。在 IrisVision 的开发过程中，使用运行 OS/2 的 IBM PS/2 进行测试和开发，这不仅催生了一个最小化的 OS/2 驱动程序，还促成了 ISA 版本 IrisVision 的诞生。最终，SGI 唯一的大客户是 IBM，它为其 RS/6000 UNIX 工作站采购了 MCA 卡。卡片高昂的价格——4995 美元（按 2024 年的货币价值折合超过 13000 美元）可能是其难以大规模推广的原因。公司最后将这个项目剥离为一个独立的公司，Pellucid，但并未取得成功。尽管如此，创立 Pellucid 的前 SGI 员工凭借着相似技术及二维图形通道的概念，创立了 3dfx，一家改变了世界的公司。</p><p>SGI 一直在高端图形工作站领域处于领先地位，却未曾踏足入门级市场。这种局面在推出个人 Iris 系列后发生了转变。系列的第一款产品是 4D/20，它配备了 MIPS 公司生产的 R2000 中央处理器（CPU），时钟频率为 12.5 MHz，能执行每秒一千万次运算。系列的其他三款产品都升级使用了 R3000 处理器。例如，4D/25 的处理器运行速度达到 20 MHz，可以完成每秒一千六百万次运算。而 4D/30 的速度更是提升到了 30 MHz，性能飙升至每秒二千七百万次运算。性能最强的是 4D/35，其运行速度为 36 MHz，能够实现每秒三千三百万次运算。这些系统最多支持 128MB 的内存。个人 Iris 不仅通过 SGI 和 Control Data 销售，还有重新整合后的 Groupe Bull 也参与了转售。据我所查，Bull 转售 SGI 产品的成绩并不突出，他们在销售 NEC 的硬件上更为成功。尽管“个人 Iris”被寄予了对工作站市场低端发起攻击的希望，但其价格并没有完全体现这一点，除非与那些售价高达约 10 万美元（2024 年约为 26.2 万美元）的高端 SGI 产品相比较。个人 Iris 系列的起步价格为 2 万美元（2024 年约为 5.2 万美元）。</p><p>SGI 个人 Iris 的官方宣传图片
SGI 个人 Iris 的官方宣传图片
id:bdoz0nhvl8gejekt 在同一时期，SGI 推出了另一款定位更高、价格也更昂贵的产品系列：PowerSeries。这些产品支持多达八个处理器的多核心系统，既可放置于办公桌旁，也可安装在机架中。它们的处理速度极快，最高可达每秒 40 兆次的运算频率。凭借高达八核的处理能力，这些系统在处理速度上可以轻松超过每秒两亿三千万次指令，它们的强大性能曾在《深渊》、《终结者 2》和《侏罗纪公园》等多部知名电影中大显身手。</p><p>1991 年 3 月，康柏以 1.35 亿美元的投资获得了 SGI 13% 的股份，这相当于 2024 年的 3.07 亿美元。同时，康柏还承诺再投资 5000 万美元（约合 2024 年的 1.14 亿美元）开发一款售价约 7500 美元（约合 2024 年的 17100 美元）的新型工作站。</p><p>从 1991 年到 1995 年间，SGI 推出了几款极受欢迎的系统，包括 Indigo、Indigo 2 和 Indy。它们的高端对应产品是 Crimson 和 Challenge 系列。首款 Indigo 系统于 1991 年问世，搭载了一个每秒运行 30 兆次的 MIPS R3000 CPU。从 1992 年起，Indigo 和 Crimson 开始采用 64 位的 MIPS CPU，分别是运行速度为每秒 100 兆次的 R4000 和每秒 150 兆次的 R4400。Indigo 搭载 150 兆赫兹处理器的版本能够达到每秒一亿二千万次的处理速度。1993 年，Indigo 2 首次亮相，配备了 MIPS R4400 处理器和顶级图形处理能力。“Indy”是这三款产品中定位最低的，它在 1993 年 7 月推出，配置有每秒 100 兆次的 R4000PC 处理器、24 位图形系统、16MB 内存、IRIX 操作系统、15 英寸显示器，售价为 4995 美元（约合 2024 年的 10700 美元）。</p><p>SGI Indigo 2 的图片，源自 unixhq.com。
SGI Indigo 2 的图片，源自 unixhq.com。
SGI Indigo 2 10000 IMPACT，属于我个人的藏品。
SGI Indigo 2 10000 IMPACT，属于我个人的藏品。
1992 年 3 月 13 日，宣布以约 3.33 亿美元（约合 2024 年的 7.37 亿美元）的股票交换方式，收购 MIPS 计算机系统（MIPS Computer Systems）。这一决定是在 MIPS 面临财务困境、员工流失严重，以及公司总裁 Charles Boesenberg 一个月前离职后做出的。此次收购为 SGI 确保了零部件供应，MIPS 计算机系统随后更名为 MIPS 技术公司（MIPS Technologies）。合并后的公司年收入约达 10 亿美元（约合 2024 年的 22.1 亿美元）。然而，这场大规模的并购导致 SGI 当年出现了约 1.18 亿美元（约合 2024 年的 2.61 亿美元）的亏损。此举也使 SGI 短暂加入了 ACE 联盟，该联盟致力于基于 MIPS CPU 和 UNIX 操作系统，以及 80386/486 和 NT，构建工作站标准。联盟成员包括 Compaq、MIPS、Microsoft、DEC、SCO、Acer 等众多知名公司。不过，SGI 和 Compaq 很快便退出了联盟，可能是因为他们之前不久的单独安排。但无论如何，ACE 联盟最终还是完全解散了。我认为，在一个因低成本商品化硬件和软件持续进步而日渐萎缩的市场中，这样由激烈竞争对手组成的强大联盟很难持久。尽管如此，SGI Indigo 2、Indy、Challenge 等几款产品还是与 ACE 的高级 RISC 计算（ARC）标准保持了一定程度的兼容。</p><p>1992 年 6 月 30 日，硅图公司推出了 OpenGL，一个支持 2D 和 3D 图形的跨平台 API，它允许通过一个或多个 GPU 进行渲染的硬件加速，这一设计直接源自 IRIS GL。与其前身不同，OpenGL 并没有集成窗口管理功能，也没有提供鼠标或键盘的接口。考虑到 IRIS GL 是在 X 窗口系统（X Window System）和其他图形环境问世之前开发的，它当时需要具备这些功能。但对 OpenGL 来说，这些都不是必需的。转向 OpenGL 的另一个重大变革在于它对功能的开放性。IRIS GL 依赖于 SGI 的专用硬件，而 OpenGL 没有这样的限制。因此，如果 GPU 不支持某些功能，OpenGL 允许这些功能在 CPU 上通过软件来渲染。这一变化对包括微软在内的客户是一个利好消息，微软在 1991 年就获得了将 IRIS GL 集成到其 NT 操作系统中的许可。</p><p>1992 年底，Jim Clark 和任天堂的首席执行官 Hiroshi Yamauchi 展开了一场历史性的会面，讨论如何将当时领先的 3D 图形技术整合到任天堂即将推出的游戏机中。任天堂 64 的设计在很大程度上借鉴了 SGI 的高端工作站技术，配备了 93.75 MHz 的 MIPS R4300 CPU，其处理速度达到了每秒一亿二千五百万条指令，内置了 4MB 的高速 Rambus DRAM 内存（实际为 4.5MB，但 GPU 只能使用 512K），并且用户还可以通过额外的 RAM 扩展包将内存翻倍。此外，它还配备了 62.5 MHz 的 Reality 协处理器，运行着 SGI 的图形引擎——尽管是一个更简化的版本。任天堂 64 支持高达 1680 万种颜色的显示，最高分辨率可达 640x480，音频采样率可高达 44.1 KHz。尽管如此，由于设计上的限制，这款游戏机很难充分发挥出它的全部潜力。比如，由于缺乏专用音频处理器，高采样率的音频处理会对 CPU 造成负担。而且，尽管 CPU 支持 64 位处理，数据总线却只有 32 位宽。然而，任天堂 64DD 扩展设备展现了这款游戏机作为小型工作站的潜力，它增加了 64MB 的可读写磁盘存储、实时钟、28.8 kbps 的调制解调器实现互联网连接，以及键盘、鼠标和音视频捕捉功能。不幸的是，尽管前景一片光明，这款扩展设备因上市延迟及仅有的一年零两个半月销售周期而成为商业上的败笔。相比之下，1996 年发布的任天堂 64 本身则取得了巨大成功。</p><p>Industrial Light and Magic（ILM）从 1987 年开始就使用 SGI 的硬件。1993 年 4 月 8 日，ILM 宣布与 SGI 合作，创建了“数字成像的联合环境”（JEDI），这个合作让双方都能从对方的工作中获得宝贵的经验和技术。SGI 访问到了 ILM 丰富的软件开发经验，而 ILM 则以优惠价格获得了 SGI 最先进的硬件。</p><p>1994 年，Jim Clark 离开了 SGI，卖出了他在公司的所有股份，并与 Marc Andreessen 合伙创办了 Netscape，开启了全新的互联网浏览时代。</p><p>1995 年，SGI 斥巨资约 5 亿美元（折合 2024 年的约 10 亿美元）并购了 Alias Research、Kroyer Films 和 Wavefront 技术。几乎在同一时期，SGI 还与 DreamWorks SKG 携手，共同打造了 DreamWorks Digital Studio，使这些收购而来的公司的技术和产品得到了充分的应用。</p><p>1996 年 2 月 26 日，硅图公司以 7.4 亿美元（相当于 2024 年的 14.7 亿美元）的价格收购了 Cray Research。这一举措让 SGI 掌握了当时约 40% 的高性能计算市场份额。尽管外界对 SGI 的意图众说纷纭，Cray 当时正处于挣扎求存的境地，并且在 NASA 有着多项设备安装。SGI 虽然在娱乐行业大获成功，但该领域的收入仅占 SGI 年度总收入的约 10%。SGI 的客户主要是政府部门，因此 SGI 特别成立了全资子公司硅图公司 Federal Inc，专门管理这些政府合同，并为政府机构提供服务与支持。SGI 这样做，实际上是为了确保自己不会失去最大且极为重要的客户 NASA——他们不仅供应工作站，还负责 NASA 超级计算机的维护和服务。这种深入的合作关系一直让 SGI 受益至 2008 年，期间的高点包括了Pleiades项目。</p><p>Cray Y-MP Model D 在 NASA 格伦研究中心的安装场景，图片由 Clive England 提供，来源于 cray-history.net
Cray Y-MP Model D 在 NASA 格伦研究中心的安装场景，图片由 Clive England 提供，来源于 cray-history.net
1996 年推出的新款 SGI 工作站，O2 和 O2+ 系列，它们通过一种特殊的技术（内存与渲染的集成电路，MRE）实现了与众不同的统一内存架构。这种设计让 O2 能够高效地连接 CPU、内存、输入输出、压缩、显示以及图像处理等各个部分，使得图形处理能力成为系统不可分割的一部分。O2 可搭载多种 CPU，如 R5000、RM5200SC、RM7000A、R10000 或 R12000，频率从 180 MHz 到 400 MHz 不等，所有型号都支持浮点计算，最多可配备 1GB 的统一内存，通过八个 128MB 的 SDRAM DIMM 实现。</p><p>同时推出的高端产品包括 Origin 2000、Origin 200 和 Onyx 2 系列，这些是配备多个 CPU 的强大系统，使用了一种高级的分布式共享内存技术 S2MP。Origin 200 是基础型号，Onyx 2 更进一步，而 Origin 2000 则是 SGI 的旗舰机架式系统。系列中的极品 Cray Origin，可以配置高达 128 个 R10000 CPU。这些系统所配备的 IRIX 操作系统支持多核处理技术 SMP。</p><p>1997 年 5 月 14 日，SGI 宣布了对 ParaGraph International Inc 的收购，这是一家专注于 VRML 和网络图形的软件公司。收购完成后，公司及其资产迁至 Mountain View，并更名为 Cosmo Software。McCracken 对此发表了评论：</p><p>对于硅图公司而言，长期以来最重要的增长机遇之一就是支持“第二代网络”中的设计师、开发者与服务商。通过并购业界领先的 PC 3D 互联网公司，以及 Cosmo Software 的成立，我们正加大投资力度，巩固在为这一新型互动媒介提供软件与服务的市场中的领导地位。</p><p>1997 年 1 月推出的 Octane，把 Onyx 2 系列的技术带给了中档工作站。与之前的大型机不同，Octane 是一款桌面型工作站，支持两个 CPU 运作。这款产品的亮点是它采用了前一年在高端服务器机型中首次采用的交叉开关技术。这意味着，不同于传统的共享总线方式，每个子系统都可以直接、无干扰地与其他子系统通讯。交叉开关设计包含七个端口：HEART ASIC（处理器和内存）、图形处理（第一代或第二代的 Impact 或 VPro）、XIO B、XIO C、XIO D、内置 I/O 接口、PCI 桥接。Octane 的高配版，Octane 2，拥有更强的处理能力和图形处理能力，支持更高密度的内存，并配备了更强劲的电源。Octane 系列的处理器速度从 175 MHz 的 R10000 到 600 MHz 的 R14000A 不等，内存配置从 64MB 到 2GB。</p><p>1997 年，硅图公司的表现不尽人意。尽管收入高达 36 亿美元（按 2024 年的货币价值计算约为 70 亿美元），公司还是亏损了 7860 万美元（约合 2024 年的 1.52 亿美元）。在那年的 10 月 29 日，公司 CEO Ed McCracken 与负责销售及市场营销的执行副总裁 Gary Lauer 相继辞职。此后，公司裁减了大约 9% 的员工，约 700 人。接替的是前惠普员工 Richard Belluzzo 出任 CEO，而已经担任计算机系统执行副总裁的 Robert H. Ewald（前 Cray 总裁）接手了 Lauer 的工作。尽管有传言称 McCracken 是被迫离职，但这一说法并不确切。在帕洛阿尔托举行的年度股东会议上，McCracken 宣布辞职，并表示：“经过深思熟虑，我认为现在是我和公司做出变革的合适时机。”之后，他亲自寻找并聘请了自己的继任者。</p><p>与此同时，硅图公司对一家名为 ArtX 的新兴企业提起了诉讼。ArtX 由 Dr. Wei Yen 和大约 19 名前 SGI 员工共同创立，这些员工此前曾参与 Nintendo 64 的开发。该公司的初始目标是开发一款能与 3dfx 竞争的 PC 图形芯片。到了 1998 年 5 月，ArtX 获得了为任天堂下一代游戏机 GameCube 开发图形处理器的合同。在 1999 年秋季的 COMDEX 展会上，该公司推出了 Aladdin 7 芯片组，这款芯片组被集成到 Acer Labs 制造的 K6-2 和 K6-3 主板上作为 GPU 使用。2000 年 2 月，ArtX 被 ATI 收购，其技术在 2002 年至大约 2005 年间被融入 ATI 的 GPU 产品中。硅图公司最终在 1998 年悄然撤销了对 ArtX 的诉讼，双方未达成任何和解。</p><p>1998 年 1 月 1 日，刚刚成为 CEO 的 Belluzzo 很快采取行动，卖掉了 SGI 的两家印刷电路板 (PCB) 工厂，并将公司的组织结构从二十六个小组精简为五个。SGI 接着独立成立了 MIPS Technologies（虽然 SGI 仍然拥有大部分股权），关闭了 Cosmo 软件业务，并通过宣布计划转向 Itanium（同时参与 Monterey 和 Trillian 项目）和推出运行 NT 的 IA-32 系列产品，即 Visual Workstation，让客户对 MIPS 架构的未来感到不确定，犹豫是否继续投资。此外，公司开始外包计算机生产，并削减了约 2 亿美元的运营预算，相当于 2024 年的 3.81 亿美元。1998 年春，SGI 还对 NVIDIA 提起了一项专利侵权诉讼。</p><p>这一系列措施未能扭转公司的颓势。1998 年，收入降至 31 亿美元，公司报告了 4.6 亿美元的亏损。1999 年 7 月 20 日，面临资金不足，SGI 与 NVIDIA 达成了一项协议，相互授权各自的专利。公司继续亏损中，Belluzzo 在 1999 年 8 月 22 日离开，加入 Microsoft 领导 MSN 部门。</p><p>Bob Bishop 接手 SGI 时，公司前景堪忧。AMD 在十月推出了他们的 64 位架构，PC 图形性能大幅提升的同时，其价格也远低于 SGI 的产品，NT 系统证明了其作为 UNIX 的一个经济而稳定的替代品，Linux 正在蚕食传统 UNIX 市场份额，而 Itanium 的推出仍无望。此时，SGI 已基本放弃了对新 MIPS CPU 的投资。</p><p>2000 年 3 月 2 日，SGI 以 2200 万美元（相当于 2024 年的 4000 万美元）将 Cray 出售给了 Tera Computer。Tera 随后改名为 Cray Inc，接管了遍布三十个国家的六百台超级计算机和两百名客户。</p><p>SGI 最后推出的两款 MIPS 工作站，Fuel 和 Tezro，代表了公司的巅峰之作。2002 年，Fuel 首次亮相，搭载了主频为 500 MHz 的 R14000 处理器，并可配置最高达到 4GB 的 DDR 类型内存和 SGI 独家的 VPro 图形卡，部分高端型号更是配备了主频可达 900 MHz 的 R16000 处理器。随后在 2003 年，SGI 推出了 Tezro 工作站，其售价起步于 20500 美元（按照 2024 年的货币价值约为 34574 美元）。这款工作站专为性能极致而设计，只提供 R16000 处理器选项，主频从 600 MHz 到 1 GHz 不等，内存配置也从 512MB 扩展到了 8GB，同样配备了高性能的 VPro 图形卡。与只支持单 CPU 的 Fuel 不同，Tezro 提供了更为灵活的 1 到 4 CPU 配置选项。尽管 SGI 的其他 IA-32、Itanium 和 Xeon 系列工作站及服务器产品线取得了一定销量，但并未为公司带来预期的利润。2003 年 7 月 10 日，SGI 空出了他们的总部大楼，这栋大楼后来被 Google 租用，并成为了著名的 Googleplex。</p><p>SGI 的前总部大楼，后成为 Googleplex 的风景。照片由 Coolcaesar 提供，来源于英文维基百科
SGI 的前总部大楼，后成为 Googleplex 的风景。照片由 Coolcaesar 提供，来源于英文维基百科
随着 SGI 命运的不断走低，这家公司在 2004 年 4 月 16 日，以 5800 万美元（约相当于 2024 年的 9500 万美元）的价格，将其子公司 Alias Systems (原名 Alias|Wavefront) 卖给了私募股权公司 Accel-KKR。之后，在 2005 年 11 月，因股价长期低迷，SGI 被纽约证券交易所剔除。2006 年 1 月，Dennis McKenna 加入，担任总裁兼 CEO，并成为董事会主席，而 Bishop 则作为副主席继续留在董事会。到了同年 5 月 8 日，SGI 不得不申请破产保护。2006 年 6 月，SGI 曾经租给 Google 的园区，以 3.19 亿美元（2024 年约 4.91 亿美元）的价格正式卖给了 Google。此前，SGI 在 Mountain View 的老址早在 2002 年就卖给了计算机历史博物馆。公司最终在当年 10 月成功摆脱破产状态并重新上市。但是，到了 2006 年 12 月 29 日，SGI 宣布其 MIPS 和 IRIX 产品线正式终止，最后一批订单在 2007 年 3 月完成。Bob Ewald 在 2007 年 4 月 9 日接替 McKenna 成为 CEO。SGI 在 2008 年 12 月再次被剔除上市。2009 年 4 月，公司再度申请破产，并在同年 5 月 11 日被 Rackable Systems 以约 4200 万美元（相当于 2024 年的 6500 万美元）收购，随后更名为硅图国际公司（Silicon Graphics International），最终被惠普企业购买。</p><p>See all posts
Built by 宝玉. RSS . 本站原创内容，独家授权赛博禅心公众号发布。</p><p>Toggle theme</p><p>SGI早期有哪些人？哪些人去AMD了哪些人去NVIDIA</p><hr><p><strong>Cursor</strong></p><p>根据您提供的文章内容，以下是 SGI 早期的主要成员，以及哪些人（或他们的团队）后来与 AMD 和 NVIDIA 产生了联系：</p><h3 id=sgi-早期成员>SGI 早期成员</h3><ol><li><strong>James Henry Clark (Jim Clark)</strong>：SGI 的创始人。</li><li><strong>Marc Hannah</strong>：文章中多次提及，在几何引擎的诞生中做出了重要贡献，也是 SGI 的联合创始人之一。</li><li><strong>其他联合创始人</strong> (与 Clark 一同创业的伙伴)：<ul><li>Kurt Akeley</li><li>Dave Brown</li><li>Tom Davis</li><li>Mark Grossman</li><li>Herb Kuta</li><li>Rocky Rhodes</li><li>Abbey Silverstone</li></ul></li></ol><h3 id=哪些人去了-amd>哪些人去了 AMD？</h3><p>文章中没有直接提到 SGI 的员工去了 AMD。但是，文章指出：</p><ul><li>一家名为 <strong>ArtX</strong> 的公司由 <strong>Dr. Wei Yen</strong> 和<strong>大约 19 名前 SGI 员工</strong>共同创立，这些员工此前曾参与 <strong>Nintendo 64</strong> 的开发。</li><li><code>ArtX</code> 随后在 2000 年 2 月被 <strong>ATI</strong> 收购，其技术融入了 ATI 的 GPU 产品中。</li></ul><p>鉴于 ATI 后来被 AMD 收购，可以推断 <strong>Dr. Wei Yen 和这大约 19 名前 SGI 员工</strong>（他们加入了 ArtX）最终通过 ArtX 被 ATI 收购，而间接与 AMD 产生了联系。</p><h3 id=哪些人去了-nvidia>哪些人去了 NVIDIA？</h3><p>文章中<strong>没有明确提及任何 SGI 员工直接去了 NVIDIA</strong>。</p><ul><li>文章提到了 SGI 与 NVIDIA 之间有过专利侵权诉讼，后来达成了相互授权协议。</li><li>文章确实提到，<strong>创立 Pellucid 的前 SGI 员工</strong>（Pellucid 是 SGI 剥离的一个项目，由前 SGI 员工创办）后来凭借相似技术创立了 <strong>3dfx</strong>。</li></ul><p>虽然 3dfx 后来被 NVIDIA 收购是业界常识，但<strong>您提供的文章本身并未明确指出 3dfx 被 NVIDIA 收购</strong>，因此我们无法直接根据此文本得出“这些 SGI 员工去了 NVIDIA”的结论，只能说<strong>创立 3dfx 的前 SGI 员工</strong>与 NVIDIA 之间存在间接的历史联系。</p><hr><p><strong>User</strong></p><p>约 19 名前 SGI 员工（他们加入了 ArtX）最终，名字</p><hr><p><strong>Cursor</strong></p><p>根据您提供的文本，文章中明确提到：</p><p>&ldquo;ArtX 由 <strong>Dr. Wei Yen</strong> 和大约 <strong>19 名前 SGI 员工</strong>共同创立&rdquo;</p><p>文章中<strong>只提到了 Dr. Wei Yen 的名字</strong>，而那“大约 19 名前 SGI 员工”的具体名字，文本中<strong>没有提供</strong>。</p><hr><p><strong>User</strong></p><p>SGI 与 NVIDIA 之间有过专利侵权诉讼</p><p>什么诉讼？</p><hr><p><strong>Cursor</strong></p><p>根据您提供的文本：</p><p>文章明确指出：</p><ul><li>&ldquo;1998 年春，<strong>SGI 还对 NVIDIA 提起了一项专利侵权诉讼</strong>。&rdquo;</li><li>&ldquo;1999 年 7 月 20 日，面临资金不足，SGI 与 NVIDIA 达成了一项协议，<strong>相互授权各自的专利</strong>。&rdquo;</li></ul><p>文本中提到了诉讼的存在和解决方式（相互授权专利），但是<strong>没有提供关于这场专利侵权诉讼的具体内容、涉及哪些专利，或者侵权的对象是什么。</strong></p><hr><p><strong>User</strong></p><p>blog</p><p>About
Residual Vector Quantization
An exploration of the heart of neural audio codecs
compression
ssl
Author
Scott H. Hawley</p><p>Published
June 12, 2023</p><p>On this page
Introduction
Vector Quantization = Partitioning Space
Residual Vector Quantization (RVQ)
Addendum: Difficulty at Very High Dimensions
Acknowledgement
Introduction
“Vector Quantization.” Sounds intimidating. “Residual Vector Quantization” sounds even more intimidating, even near-meaningless to most people. Turns out, these are easy to understand given a few pictures, even to the point a child could understand them – uh… if the child wanted to. Certainly, there can be sophisticated ways to implement these algorithms, and we’ll cover a bit of that later on, but the basics are very simple.</p><p>Residual Vector Quantization (RVQ) is a data compression technique found in state-of-the-art neural audio codecs such as Google’s SoundStream, and Facebook/Meta AI’s Encodec, which in turn form the backbone of generative audio models such as AudioLM (Google) and MusicGen (Facebook). It’s also the subject of Lucidrain’s library vector-quantize-pytorch, which we’ll use toward the end because it’s so fast and so good.</p><p>What is RVQ and how does it work?</p><p>First we should consider regular vector quantization (VQ). VQ has been around for decades, and it shows up in many areas of signal processing when compression is involved.</p><p>Note: Whenever I say something that applies to both VQ and RVQ, I’ll use the abbreviation “(R)VQ.”</p><p>Tip: Two Analogies
Cities and Towns: RVQ is like a “hub-and-spoke” graph that often appears in logistics: Consider air travel, in which the major cities are “hubs” (Chicago, LA, Atlanta) from which you take smaller flights to get to smaller cities and towns. VQ would be like replacing every address with its nearest town – which could result in a lot of vectors! RVQ means we have a short list of hubs, then from each hub we have a list of smaller cities, from which we could then have lists connecting smaller cities to nearby towns.</p><p>Numbers and Digits: In one dimension, RVQ is like the way we represent numbers using digits. Instead of creating 10,000 separate categories for each of the integers from 0 to 9999, we use 4 “codebooks” (for thousands, hundreds, tens, and ones) consisting of the ten digits 0 through 9. 4 * 10 = 40, which is a lot less than 10,000! We even can represent real numbers to arbitrary precision by using more codebooks to include ever-smaller “residual vectors” to the right of the decimal point.</p><p>Vector Quantization = Partitioning Space
“Vector Quantization” is really about dividing up the space of your data points into a discrete set of regions. Put differently, we “partition” the space.</p><p>Let’s say we have a bunch of points in space:</p><p>Show the code</p><p>Figure 1. A set of data points, aka ‘vectors’.
To computer scientists, the
coordinates of each point define a “vector”. (To mathematicians and physicists, the “vector” points from the origin to each point, but that distinction isn’t going to matter to us.)</p><p>Clarification
For neural audio codecs, the vectors could be vertical slices (columns) from an audio spectrogram, i.e., a list of amplitudes for a set of frequencies that were found over a short time interval called a “frame.” More often, however, the vectors are themselves the outputs of some other audio encoder (e.g. a Convolutional Neural Network), and the (R)VQ is done to compress those encoded vectors even more in order to do things like Latent Diffusion.</p><p>Now divide up the space into a bunch of regions. How we do that can take many forms. For now, just consider the two examples of my hand drawing with colors, and a set of tiled squares. There are “fancier” algorithms to partition the space in a way that best “fits” the data (e.g., see “k-Means”, below). We can cover schemes like the third image later.</p><p>(a) By hand</p><p>(b) Squares</p><p>(c) Fancy (credit: Aalto University, Finland)
Figure 2. Examples of ways to divide up or “quantize” space, aka “Partitioning schemes.”
Moving forward, I can do a bit more code-wise with the squares, so let’s start there. ;-)</p><p>Let me just formalize that a bit: We’ll let the number of squares be controlled by the variable “n_grid”. So for our two-dimensional examples, there will be n_grid
square regions.</p><p>With vector quantization, we give an index value to every region (e.g. 0 to 24 for a 5x5 square grid), and then we replace each vector’s value with the index of the region.</p><p>Show the code</p><p>Figure 3. (Integer) Indices for each region.
For each of the “vectors” represented by the data points, we no longer use the (
,
) coordinate pairs, but rather the (integer) index of the region it’s in.</p><p>Note
We’ve gone from needing two floating point numbers per point to just one integer value. In two dimensions, the “savings” or data-compression amount that we get from that may not be readily apparent, but stick around: As we go to large numbers of dimensions later, this scheme will save us a ton of data.</p><p>If we want the coordinates that go with the indices, we’ll use the centroid of each region. In this sense, the vectors are “quantized” so that they can only take on values given by the centroids of the regions. In the following example, the centroids are shown in red:</p><p>Show the code</p><p>Figure 4. Centroid locations
So each blue point will effectively be replaced by the nearest red point. In this sense we have “quantized” the vectors (because we’ve quantized the space itself).</p><p>Terminology
The set of locations of centroids is called the “codebook”. When we want to use an actual vector value (in space), we convert the codebook index into a (centroid) location by looking up the codebook.</p><p>So a full (albeit unweidly) picture showing the data points, the region indices, and the centroids, looks like this:</p><p>Show the code</p><p>Figure 5. Detailed figure showing data points, region indices, and centroid locations.
For our choice of coordinates, the codebook (i.e. the mapping of indices to centroid locations) looks like this:</p><p>Show the code
index vector
0 (-0.4, -0.4)
1 (-0.2, -0.4)
2 (0.0, -0.4)
3 (0.2, -0.4)
4 (0.4, -0.4)
5 (-0.4, -0.2)
6 (-0.2, -0.2)
7 (0.0, -0.2)
8 (0.2, -0.2)
9 (0.4, -0.2)
10 (-0.4, 0.0)
11 (-0.2, 0.0)
12 (0.0, 0.0)
13 (0.2, 0.0)
14 (0.4, 0.0)
15 (-0.4, 0.2)
16 (-0.2, 0.2)
17 (0.0, 0.2)
18 (0.2, 0.2)
19 (0.4, 0.2)
20 (-0.4, 0.4)
21 (-0.2, 0.4)
22 (0.0, 0.4)
23 (0.2, 0.4)
24 (0.4, 0.4)
Reconstruction Error
When we do this quantization (i.e. replacing vectors by their nearest centroid), the centroid locations will naturally be a bit “off” compared to the original data vectors themselves. The finer the grid you make, the smaller the regions, and the less error. For a 2D grid, the error will be on the order of
where
is the grid spacing (
= 1/5 = 0.2 in our example).</p><p>Note
Note that the vectors in the codebook are not “basis vectors”: We do not add linear combinations of the codebook vectors, as that would not be “quantization” (and would subject us to the same number of data points as the original, resulting in nearly no compression). VQ helps us get around some problems of having large numbers of data points by approximating them by their nearest codebook vectors, and the R in RVQ allows us to increase the provide for good “resolution” within the space without requiring extremely long codebooks.</p><p>Let’s check how the error changes as we vary the grid spacing, i.e., as we vary n_grid.</p><p>Show the code</p><p>Figure 6. Plots of error vs. resolution with linear (left) and logarithmic (right) axes. Note that the computational cost will scale like the number of regions, which is n_grid
.
lowest error (for n_grid=200) = 0.019903707672610238
So, the more “gridlines” you use, the lower the error, but at what cost? To get an error of 0.02 we need
regions. And in higher dimensions than 2, the “cost” of higher resolution / lower error goes up immensely: to double the resolution in
dimensions, the computational cost goes up by a factor of
. (Imagine
=32, 64, 128,…)</p><p>But we don’t need to cover the entire space uniformly! That’s where Residual Vector Quantization comes in. Feel free to skip ahead to the section on RVQ. For the next bit we’ll take an optional aside to learn about an alternate way to partition space, known as a the “k-Means” algorithm.</p><p>Note
Another key point: By replacing all the coordinate values for a vector (i.e.
floating point numbers) with a single integer, VQ achieves data compression by a factor of
(times however many bit floats take up compared to integers). For large numbers of dimensions – regardless of the partitioning scheme – this compression can be significant.</p><p>k-Means (Partitioning Scheme)
Optional
This discussion on k-Means is actually not crucial to understanding (R)VQ. At all. It’s quite skippable, to be honest. So…only read if you’re really curious. Otherwise skip down to the section on Residual Vector Quantization.</p><p>Details on k-Means
Residual Vector Quantization (RVQ)
By the way, RVQ has been around for quite a while.</p><p>Basic Idea: “Codebooks in Codebooks”
The trick with RVQ is, rather than having a single high-resolution codebook, to instead have “codebooks inside of codebooks”, or, if you like, “stacking codebooks”. Let’s say we want to quintuple the resolution of our initial 5x5 grid. Instead of using a 25x25 grid (which would be 25x the computational cost of the original), what if we put a little 5x5 grid “inside” the region to which a vector was quantized?</p><p>For example, in the “middle” region (region 12), we can do…</p><p>Show the code</p><p>Figure 13. Illustration of ‘codebook within a codebook’, with a smaller 5x5 codebook which will be relative to the middle region’s codebook.
The difference between that blue point in the middle “main” square and its corresponding red centroid will be the “residual”. We will also quantize that within the “little” 5x5 grid. This will serve as a codebook to use “after” the original codebook. And we’ll get the same resolution as if we had a 25x25 grid, except our computational cost will instead be 2*(5<em>5)=50 instead of 25</em>25=625! So our cost will be 12.5 smaller than the full-grid approach.</p><p>And interestingly, if we only consider the residual, i.e. the difference between the main centroid and the vector in question, then we can use the same “next level” codebook for all points in the space! In the following figure, we show the residuals as purple line segments that run from each point to its corresponding nearest centroid:</p><p>Show the code</p><p>Figure 14. Illustration of redisuals, shown as purple line segments connecting vectors (blue points) with their nearest centroids (red points).
Also, because we cleverly set up our data to be centered around the origin
, we can treat the original data points as “residuals” relative to the “centroid” of the whole domain, namely the origin!</p><p>Show the code</p><p>Figure 15. How we can treat the data points themselves as residuals relative to the origin, for a ‘level 0’ codebook
Also because of our clever choice of coordinates, for the next “level” of quantization, we can take the codebook at the next level to be just the previous codebook divided by n_grid! This won’t always be the case; I’m just feeling clever and lazy.</p><p>Quantizer algorithm
Up til now, we’ve hidden the code by default. But to really get the RVQ method, I’m going to show the code.</p><p>Let’s write a general quantizer multiple “levels” of nested codebooks. It will take our data points and return the various levels of codebook indices.</p><p>Will be following “Algorithm 1” from page 4 of Google’s 2021 paper “SoundStream: An End-to-End Neural Audio Codec”:</p><p>Figure 16. SoundStream’s RVQ Algorithm
But I like the way I write it:</p><p>def quantizer(data, codebooks, n_grid=5):
&ldquo;this will spit out indices for residuals in a series of &rsquo;nested&rsquo; codebooks&rdquo;
resids = data
indices = []
for cb in codebooks:
indices_l = get_region_membership(resids, codebook=cb)
resids = resids - cb[indices_l]
indices.append(indices_l)
return np.array(indices)</p><h1 id=make-the-nested-codebooks>Make the nested codebooks</h1><p>n_codebooks = 3
codebook = generate_codebook(n_grid)
codebooks = [codebook/n_grid**level for level in range(n_codebooks)]</p><p>indices = quantizer(data, codebooks) # call the quantizer
display(indices)</p><p>array([[10, 2, 5, 7, 5, 20, 4, 13, 19, 17, 16, 14, 24, 4, 22, 23,
4, 21, 19, 11, 13, 12, 4, 18, 4],
[10, 17, 3, 5, 17, 9, 3, 22, 7, 13, 14, 5, 3, 24, 18, 6,
24, 6, 17, 8, 10, 1, 21, 12, 3],
[11, 6, 12, 7, 15, 20, 23, 7, 17, 13, 8, 18, 2, 7, 15, 11,
16, 20, 23, 13, 11, 24, 18, 10, 20]])
Let’s test this by trying to reconstruct our original data using each level of codebook. In the following, the original data will be in blue, and the other colors will show the results of quantization using an increasing number of codebooks:</p><p>Show the code</p><p>Figure 17. Reconstructing data (blue points) using multiple levels of RVQ codebooks (orange dots)
We see that the more (levels of) codebooks we use, the better we can approximate the original data. The rightmost image has an effective resolution of
little squares, but instead uses only
. In two dimensions, this is not a huge savings, but let’s see how important this is for higher numbers of dimensions.</p><p>Let
be the number of dimensions and
be the number of codebooks (no relation to the k from k-Means, I’m afraid). We’ll populate a d-dimensional hypercube with a lot of data, and subdivide it into nested groups of little hypercubes using RVQ, and compute the error – as well as the compuational cost “savings” from if we had used regular VQ instead of RVQ.</p><p>Note
Using uniform square/(hyper)cube regions is a really dumb idea for this. Because the number of regions will scale like n_grid
, which can actually be much larger than the number of data vectors we have! We’ll try a more sophisticated partitioning scheme further below.</p><p>Show the code
Here we show the error for high-dimensional datasets using various levels of RVQ.
&lsquo;cost savings factor&rsquo; refers to the ratio of using regular VQ (at uniform resolution)
vs RVQ.</p><p>d = 2:
K = 1, error = 3.41e-03, cost savings factor = 1.0
K = 2, error = 1.29e-04, cost savings factor = 12.5
K = 3, error = 5.26e-06, cost savings factor = 208.3
K = 4, error = 2.16e-07, cost savings factor = 3906.2</p><p>d = 3:
K = 1, error = 3.37e-03, cost savings factor = 1.0
K = 2, error = 1.29e-04, cost savings factor = 62.5
K = 3, error = 5.31e-06, cost savings factor = 5208.3
K = 4, error = 2.18e-07, cost savings factor = 488281.2</p><p>d = 4:
K = 1, error = 3.36e-03, cost savings factor = 1.0
K = 2, error = 1.32e-04, cost savings factor = 312.5
K = 3, error = 5.34e-06, cost savings factor = 130208.3
K = 4, error = 2.16e-07, cost savings factor = 61035156.2</p><p>d = 6:
K = 1, error = 3.37e-03, cost savings factor = 1.0
K = 2, error = 1.33e-04, cost savings factor = 7812.5
K = 3, error = 5.35e-06, cost savings factor = 81380208.3
K = 4, error = 2.16e-07, cost savings factor = 953674316406.2
Those “cost savings factors” were artifically high though, because we’re still using squares/hypercubes for our regions, and we don’t need to shape them that way and we don’t need that many of them. The great thing about (R)VQ is that you can specify how many centroids you want – i.e. how “long” you want your codebook to be – and you can keep that to some manageable number even as the number of dimensions skyrockets.</p><p>So, to tackle higher dimensions, we need to stop using uniform squares so we can have a codebook “length” of less than a few thousand centroids (instead of what just had, which was going into the hundreds of thousands, e.g.
). To get our non-uniform regions that follow the data, we’ll use the k-Means method described above.</p><p>Let’s look at how the reconstruction error behaves in high dimensions.</p><p>Error Analysis: Exponential Convergence
We can try a given number of (initially) random centroids, and try to match them to the data via k-Means.</p><p>Note
The residuals at different levels of our RVQ calculations will likely have different data distributions. Which means that instead of “sharing (scaled) codebooks” like we did before, we’ll need to re-calculate a new codebook at each “level”. Otherwise we won’t see any advantage from RVQ (trust me I tried).</p><p>In the following calculation, we’ll vary the number of dimensions, the length of the codebooks, and the number of codebooks, and see how these all affect the reconstruction error.</p><p>But rather than using our code, use let’s use the wonderful repository by lucidrains: lucidrains/vector-quantize-pytorch</p><p>The following set of error values is a “wall of numbers” which may not interest you. Feel free to scroll past it and skip down to the graphical representation of (some of) the numbers.</p><p>Show the code
d = 2:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 7.5e-02 6.8e-03 8.9e-04 1.2e-04 4.8e-06 1.1e-07 2.6e-09
cb_len = 64 3.1e-02 1.7e-03 1.3e-04 1.3e-05 2.1e-07 3.5e-09 6.9e-11
cb_len = 256 8.5e-03 1.9e-04 7.4e-06 4.5e-07 3.1e-09 1.8e-11 1.5e-13
cb_len = 1024 2.0e-03 2.4e-05 9.6e-07 6.1e-08 9.4e-11 4.8e-14 3.5e-15
cb_len = 2048 6.0e-04 1.8e-06 3.9e-08 7.8e-10 1.4e-12 3.8e-15 1.4e-15
d = 3:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 1.8e-01 3.5e-02 7.7e-03 1.8e-03 1.3e-04 1.0e-05 9.1e-07
cb_len = 64 9.8e-02 1.1e-02 1.4e-03 2.2e-04 5.7e-06 2.7e-07 5.8e-09
cb_len = 256 3.6e-02 1.7e-03 9.8e-05 9.6e-06 1.1e-07 1.8e-09 4.2e-11
cb_len = 1024 1.2e-02 2.7e-04 8.0e-06 4.5e-07 1.5e-09 4.2e-12 2.4e-14
cb_len = 2048 4.4e-03 4.7e-05 9.3e-07 2.5e-08 7.5e-12 3.8e-15 1.8e-15
d = 6:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 4.3e-01 1.9e-01 8.2e-02 3.7e-02 8.6e-03 2.1e-03 5.5e-04
cb_len = 64 3.2e-01 1.0e-01 3.3e-02 1.1e-02 1.3e-03 1.7e-04 2.2e-05
cb_len = 256 1.8e-01 3.2e-02 6.0e-03 1.1e-03 4.0e-05 1.5e-06 5.6e-08
cb_len = 1024 8.0e-02 6.7e-03 5.8e-04 5.0e-05 4.0e-07 3.6e-09 3.0e-11
cb_len = 2048 3.8e-02 1.6e-03 7.9e-05 3.6e-06 1.1e-08 4.5e-11 2.5e-13
d = 8:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 5.3e-01 2.8e-01 1.5e-01 8.2e-02 2.4e-02 7.7e-03 2.6e-03
cb_len = 64 4.2e-01 1.7e-01 7.4e-02 3.2e-02 6.2e-03 1.2e-03 2.6e-04
cb_len = 256 2.7e-01 7.1e-02 1.9e-02 5.2e-03 3.9e-04 3.0e-05 2.2e-06
cb_len = 1024 1.3e-01 1.8e-02 2.5e-03 3.5e-04 6.6e-06 1.3e-07 2.7e-09
cb_len = 2048 6.6e-02 4.7e-03 3.4e-04 2.8e-05 1.8e-07 1.6e-09 1.5e-11
d = 16:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 7.3e-01 5.3e-01 3.9e-01 2.8e-01 1.5e-01 7.9e-02 4.2e-02
cb_len = 64 6.4e-01 4.0e-01 2.6e-01 1.6e-01 6.6e-02 2.7e-02 1.1e-02
cb_len = 256 4.9e-01 2.4e-01 1.2e-01 5.6e-02 1.3e-02 3.2e-03 7.8e-04
cb_len = 1024 3.0e-01 9.0e-02 2.7e-02 8.1e-03 7.7e-04 7.6e-05 7.4e-06
cb_len = 2048 1.6e-01 2.8e-02 4.7e-03 7.6e-04 2.7e-05 1.0e-06 3.8e-08
d = 32:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 8.5e-01 7.2e-01 6.1e-01 5.1e-01 3.7e-01 2.6e-01 1.9e-01
cb_len = 64 7.8e-01 6.1e-01 4.8e-01 3.8e-01 2.3e-01 1.4e-01 8.7e-02
cb_len = 256 6.7e-01 4.4e-01 3.0e-01 2.0e-01 9.0e-02 4.1e-02 1.8e-02
cb_len = 1024 4.6e-01 2.2e-01 1.0e-01 4.7e-02 9.9e-03 2.3e-03 5.1e-04
cb_len = 2048 2.7e-01 7.1e-02 1.9e-02 5.1e-03 4.2e-04 3.6e-05 2.6e-06
d = 64:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 9.1e-01 8.4e-01 7.6e-01 7.0e-01 5.8e-01 4.8e-01 4.0e-01
cb_len = 64 8.7e-01 7.6e-01 6.7e-01 5.8e-01 4.5e-01 3.5e-01 2.7e-01
cb_len = 256 7.9e-01 6.6e-01 5.5e-01 4.5e-01 3.2e-01 2.2e-01 1.5e-01
cb_len = 1024 5.8e-01 3.4e-01 2.0e-01 1.2e-01 4.2e-02 1.5e-02 5.6e-03
cb_len = 2048 3.5e-01 1.2e-01 4.3e-02 1.5e-02 2.4e-03 3.6e-04 5.2e-05
d = 128:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 9.5e-01 9.1e-01 8.6e-01 8.2e-01 7.4e-01 6.7e-01 6.0e-01
cb_len = 64 9.3e-01 8.6e-01 8.0e-01 7.4e-01 6.4e-01 5.6e-01 5.1e-01
cb_len = 256 8.6e-01 7.9e-01 7.2e-01 6.5e-01 5.4e-01 4.4e-01 3.6e-01
cb_len = 1024 6.5e-01 4.7e-01 3.4e-01 2.5e-01 1.3e-01 6.0e-02 2.6e-02
cb_len = 2048 4.1e-01 2.0e-01 9.3e-02 4.4e-02 8.3e-03 1.8e-03 8.4e-05
d = 256:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 9.7e-01 9.4e-01 9.2e-01 8.9e-01 8.4e-01 8.0e-01 7.5e-01
cb_len = 64 9.5e-01 9.1e-01 8.7e-01 8.4e-01 7.8e-01 7.4e-01 7.1e-01
cb_len = 256 8.9e-01 8.3e-01 7.6e-01 7.0e-01 5.9e-01 5.0e-01 4.2e-01
cb_len = 1024 6.9e-01 5.2e-01 3.8e-01 2.8e-01 1.5e-01 7.8e-02 4.4e-02
cb_len = 2048 4.4e-01 2.2e-01 1.1e-01 5.2e-02 1.2e-02 2.3e-03 2.6e-04
d = 512:
K = 1 K = 2 K = 3 K = 4 K = 6 K = 8 K = 10
cb_len = 25 9.8e-01 9.7e-01 9.5e-01 9.3e-01 9.0e-01 8.7e-01 8.4e-01
cb_len = 64 9.7e-01 9.4e-01 9.3e-01 9.1e-01 8.8e-01 8.4e-01 8.0e-01
cb_len = 256 9.1e-01 8.6e-01 7.9e-01 7.3e-01 6.3e-01 5.4e-01 4.6e-01
cb_len = 1024 7.1e-01 5.3e-01 3.9e-01 2.9e-01 1.5e-01 8.2e-02 4.5e-02
cb_len = 2048 4.6e-01 2.2e-01 1.1e-01 5.0e-02 1.2e-02 2.3e-03 6.1e-04
Clarification: RVQ with K=1 is the same thing a regular VQ.</p><p>Show the code
Figure 18. (Interactive) Surface plot of reconstruction error for 4 codebooks with various data dimensions and codebook lengths.
So as we expect, longer codebooks help, and at higher dimensions, error tends to be larger.</p><p>Here’s the same thing but with a logarithm axis for the error:</p><p>Show the code
Figure 19. (Interactive) Surface plot of reconstruction error for 4 codebooks with various data dimensions and codebook lengths. (Logarithmic z-axis)
And now let’s look at the error for a codebook length of 2048, where we vary the number of codebooks:</p><p>Show the code
(a) (Interactive) 3D Surface Plot</p><p>(b) Line plot
Figure 20. Reconstruction error for codebook length of 2048 with various data dimensions and number of codebooks (K). (Logarithmic z-axis)
Note that in the last figure, we see straight lines1 across as we vary K, and the K-axis is linear and the error axis is logarithmic.
What this means is – and this is a major takeway:</p><p>Big Idea
As we add codebooks to the RVQ algorithm, the error decreases exponentially!</p><p>This is a big “selling point” for the RVQ method: you get an exponential payoff in error reduction for a linear increase in computational cost.</p><p>Addendum: Difficulty at Very High Dimensions
However, the above results also indicate that, for very high dimensions (say,
), (R)VQ doesn’t offer nearly as big of a payoff as is does for lower dimensions – adding more and larger codebooks doesn’t have that much of an effect on the errors.</p><p>For this reason, in their brand new2 paper “High-Fidelity Audio Compression with Improved RVQGAN”, the Descript team choose to project down to a lower-dimensional space (
) first, using Linear layers, and then perform RVQ, and then project back up using another set of Linear Layers.</p><p>…Pausing here for now. There’s more that we could say and do – for example, “How do you do backpropagation with RVQ?” – but this seems like a good place to pause this discussion.</p><p>Acknowledgement
Thanks to Zach Evans of Harmonai for the impetus to look into this topic, and for helpful discussions and corrections while I was writing.</p><p>(c) 2023 Scott H. Hawley</p><p>Footnotes
Yes, the lines flatten out when we reach machine precision of
; don’t worry about that.↩︎</p><p>Brand new” as in “came out while I was finishing this post”!↩︎</p><p>这是什么？</p><hr><p><strong>Cursor</strong></p><p>这是一篇由 <strong>Scott H. Hawley</strong> 撰写的技术博客文章，发布于 <strong>2023 年 6 月 12 日</strong>，题为 <strong>“Residual Vector Quantization：An exploration of the heart of neural audio codecs”（残差矢量量化：神经网络音频编解码器核心的探索）</strong>。</p><p>文章详细解释了<strong>矢量量化 (VQ)</strong> 和 <strong>残差矢量量化 (RVQ)</strong> 这两种数据压缩技术，特别是它们在<strong>神经网络音频编解码器</strong>中的应用。</p><h3 id=文章主要内容概括>文章主要内容概括：</h3><ol><li><p><strong>引言 (Introduction)</strong>：</p><ul><li>指出 RVQ 听起来复杂，但其基本概念可以通过图示轻松理解。</li><li>强调 RVQ 是当今最先进的<strong>神经音频编解码器</strong>（如 Google 的 SoundStream 和 Meta AI 的 Encodec）的核心技术，这些编解码器又是生成式音频模型（如 AudioLM 和 MusicGen）的基础。</li><li>提到将使用 Lucidrain 的 <code>vector-quantize-pytorch</code> 库进行演示。</li><li>提供了两个有趣的类比来帮助理解 RVQ：<strong>“城市和城镇”（中心辐射模型）<strong>和</strong>“数字和位数”（数字表示法）</strong>。</li></ul></li><li><p><strong>矢量量化 (VQ) = 空间分区 (Partitioning Space)</strong>：</p><ul><li>VQ 的核心思想是将数据点（或“向量”）所在的空间划分成离散的区域。</li><li>通过将每个向量替换为其所属区域的<strong>索引</strong>，实现数据压缩（从浮点数到整数）。</li><li>引入了**“码本 (codebook)”<strong>的概念，即每个区域的</strong>质心 (centroid)** 集合。</li><li>讨论了<strong>重建误差 (Reconstruction Error)</strong>：量化会导致误差，细分网格可以减少误差，但会指数级增加计算成本，尤其是在高维空间。</li><li><strong>k-Means 算法</strong>：作为一种更复杂的空间分区方案被提及，可以更好地“拟合”数据，但文章认为它不是理解 (R)VQ 的关键。</li></ul></li><li><p><strong>残差矢量量化 (RVQ)</strong>：</p><ul><li>RVQ 的基本思想是“码本嵌套码本”或“堆叠码本”。</li><li>为了实现更高分辨率，它不是使用一个非常大的码本，而是用一个小的初始码本对数据进行量化，然后计算原始数据与量化结果之间的**“残差 (residual)”**。</li><li>再用第二个（甚至更多的）码本对这些残差进行量化，如此循环。</li><li><strong>核心优势：</strong> RVQ 可以在计算成本呈<strong>线性增长</strong>的情况下，实现误差的<strong>指数级下降</strong>。这在高维数据压缩中尤其重要，因为它避免了传统 VQ 在高维空间中因分辨率提升而带来的指数级计算成本。</li><li>详细展示了 SoundStream 论文中的 RVQ 算法伪代码，并用 Python 代码进行了实现和演示。</li><li>通过数值实验和图表（包括“一堵数字墙”）展示了不同维度 (d)、码本数量 (K) 和码本长度 (cb_len) 对重建误差的影响，并强调了误差的指数收敛特性。</li></ul></li><li><p><strong>附录：超高维度的挑战 (Difficulty at Very High Dimensions)</strong>：</p><ul><li>指出尽管 RVQ 效率很高，但在<strong>极高维度</strong>（例如 d=512）下，其性能提升不如在较低维度那么显著。</li><li>因此，最新的研究（如 Descript 团队的“High-Fidelity Audio Compression with Improved RVQGAN”论文）选择先将高维数据<strong>投影到较低维度空间</strong>，然后执行 RVQ，再投影回去。</li></ul></li></ol><h3 id=总结-1>总结：</h3><p>这篇文章是一篇高质量的<strong>技术科普文</strong>，它用清晰的语言、形象的图示和实际的代码示例，深入浅出地解释了 <strong>Residual Vector Quantization (RVQ)</strong> 这一复杂的概念。它不仅介绍了 RVQ 的原理，还阐述了它为什么在现代<strong>神经网络音频编解码器</strong>中如此重要，以及它在高维数据压缩中的巨大优势，同时也指出了其在超高维度下仍面临的挑战。对于理解音频压缩、深度学习中的量化技术以及生成式 AI 模型的底层机制非常有帮助。</p><hr><p><strong>User</strong></p><p>残差是什么？残差链接？</p><hr><p><strong>Cursor</strong></p><p>好的，根据您提供的文章内容，我们来解释一下“残差”和“残差链接”在 <strong>残差矢量量化 (RVQ)</strong> 的上下文中是什么。</p><h3 id=残差-residual>残差 (Residual)</h3><p>在 RVQ 的语境中，<strong>残差就是原始数据与对其进行第一次（或前一次）量化后得到的结果之间的“差值”或“剩余部分”</strong>。</p><p>文章中用了一个很好的例子来解释：</p><ul><li><strong>初始步骤：</strong> 你有一个原始数据点（一个向量）。</li><li><strong>第一次量化：</strong> 你使用第一个码本（例如文章中的 5x5 网格）找到离这个原始数据点最近的质心。这个质心就是第一次量化的结果。</li><li><strong>计算残差：</strong> <strong>残差 = 原始数据点 - 第一次量化得到的质心</strong>。</li><li><strong>后续量化：</strong> RVQ 的关键在于，它不直接对原始数据进行更精细的量化，而是对这个**“残差”**进行第二次量化，然后再计算新的残差，依此类推。</li></ul><p>文章中图 14 和图 15 也直观地展示了残差：</p><ul><li><strong>图 14</strong> 描绘了“残差”，将其显示为连接蓝色数据点（原始向量）与最近的红色质心（量化结果）的<strong>紫色线段</strong>。这些紫色线段就代表了第一次量化后剩下的“未被解释”的部分。</li><li><strong>图 15</strong> 更进一步，指出甚至可以将<strong>原始数据点本身视为相对于原点（如果原点被看作“level 0”码本的质心）的“残差”</strong>。</li></ul><p><strong>目的：</strong> 对残差进行量化，是为了在不指数级增加码本大小的情况下，逐步提高对原始数据的逼近精度。每次量化都尽可能地“解释”数据中最大的一部分，然后将剩下的微小误差（残差）传递给下一个量化层进行处理。</p><h3 id=残差链接-residual-connection>残差链接 (Residual Connection)</h3><p>您提到的“残差链接 (Residual Connection)”是<strong>深度学习领域</strong>中一个非常重要的概念，尤其是在<strong>残差网络 (ResNet)</strong> 中。<strong>这个概念与文章中描述的“残差矢量量化 (RVQ)”中的“残差”概念有相似的哲学思想，但它们是应用于不同领域和不同问题的技术。</strong></p><p>虽然文章<strong>没有直接使用“残差链接”这个术语</strong>，但 RVQ 的工作方式（将原始输入与某个中间层的输出的“残差”传递给下一层处理）与残差链接的思想有异曲同工之妙。</p><p><strong>在深度学习（如 ResNet）中的“残差链接”通常指：</strong></p><ul><li><strong>跳跃连接 (Skip Connection)</strong>：它允许信息“跳过”网络中的一个或多个层，直接从前一层传递到更深层。</li><li><strong>目的：</strong> 主要解决深度神经网络中的**梯度消失（vanishing gradient）<strong>问题和</strong>退化（degradation）**问题。通过将输入直接加到某个子块的输出上，网络可以更容易地学习恒等映射，使得训练更深的网络成为可能，并且性能更好。</li><li><strong>形式：</strong> 通常是 <code>Output = F(x) + x</code>，其中 <code>x</code> 是输入，<code>F(x)</code> 是经过某些层处理后的输出。这里的 <code>F(x)</code> 就可以被看作是残差，即相对于 <code>x</code> 的变化量。</li></ul><h3 id=rvq-中的残差与深度学习中残差链接的异同>RVQ 中的“残差”与深度学习中“残差链接”的异同：</h3><ul><li><strong>相同点（哲学上）：</strong> 两者都关注于处理“剩余的信息”或“变化量”。RVQ 处理的是量化后的“剩余误差”，而残差链接处理的是网络层学习到的“输入的变化量”。</li><li><strong>不同点（应用上）：</strong><ul><li><strong>RVQ 的残差：</strong> 主要用于<strong>数据压缩和量化</strong>，通过多级迭代逼近原始数据，以提高压缩效率和重建精度。其核心是逐级对“误差”进行编码。</li><li><strong>残差链接的残差：</strong> 主要用于<strong>解决深度神经网络训练中的问题</strong>，通过提供信息短路路径，帮助梯度传播和模型学习。其核心是让网络更容易学习增量变化。</li></ul></li></ul><p>所以，虽然您提到的“残差链接”这个词没有出现在原文中，但 RVQ 中“残差”的含义与深度学习中的“残差链接”在处理“剩余信息”或“变化量”的思路上确实存在关联。</p><hr><p><strong>User</strong></p><p>残差就是原始数据与对其进行第一次（或前一次）量化后得到的结果之间的“差值”或“剩余部分”。</p><p>量化原始数据是什么意思？</p><hr><p><strong>Cursor</strong></p><p>根据您提供的文章内容，“量化原始数据”在这里的意思是：</p><ol><li><strong>划分空间：</strong> 首先，把你的原始数据点（这些点在文章中被称为“向量”，可以是音频频谱的切片、图像的像素值等）所处的连续多维空间，<strong>划分成有限数量的、离散的区域（或格子）</strong>。</li><li><strong>确定代表点（质心/码字）：</strong> 每个划分出来的区域都有一个<strong>代表性的点</strong>，这个点通常是该区域内所有数据点的平均值或中心，被称为**“质心 (centroid)”或“码字 (codeword)”<strong>。所有这些质心的集合，就构成了</strong>“码本 (codebook)”**。</li><li><strong>近似与编码：</strong> 对于每一个原始数据点，你找到它所属的区域（或者离它最近的质心）。然后，你<strong>用这个区域的“索引”来替代原始数据点本身</strong>。<ul><li>在解码或重建时，你再根据这个索引从码本中查找对应的质心，以此来近似原始数据点的值。</li></ul></li></ol><p>文章中的例子非常形象地说明了这一点：</p><ul><li><strong>图 2</strong> 展示了如何将数据空间划分为不同的区域（手动划分、方格划分或更复杂的 k-Means 划分）。</li><li><strong>图 3</strong> 显示了为每个区域分配一个<strong>整数索引</strong>（例如 0 到 24）。</li><li><strong>图 4</strong> 显示了每个区域的<strong>质心（红色点）</strong>。</li><li>文章指出：“For each of the ‘vectors’ represented by the data points, we no longer use the (x, y) coordinate pairs, but rather the (integer) index of the region it’s in.”（对于由数据点表示的每个“向量”，我们不再使用 (x, y) 坐标对，而是使用它所属区域的**（整数）索引**。）</li><li>“So each blue point will effectively be replaced by the nearest red point.”（所以每个蓝点将有效地被最近的红点替代。）</li></ul><p><strong>简而言之，“量化原始数据”就是用一个预定义的、离散的“近似值”（即码本中的质心）来替代原始的、连续的数据值，并用该近似值的索引来表示它。</strong> 这个过程的目的是为了<strong>压缩数据</strong>，因为用一个整数索引来表示一个多维浮点数向量，可以大大减少所需存储或传输的数据量。</p><hr><p><strong>User</strong></p><p>古代人洗头用洗发水么？头油是什么？头皮屑？等等
不用洗发水是好习惯还是坏习惯</p><hr><p><strong>Cursor</strong></p><p>好的，我们来一一解答您关于古代人洗头、头油、头皮屑以及洗头习惯的问题。</p><h3 id=古代人洗头用洗发水吗>古代人洗头用洗发水吗？</h3><p><strong>不，古代人没有现代意义上的“洗发水”。</strong></p><p>现代洗发水是 19 世纪末 20 世纪初才开始出现的化学合成产品。古代人洗头会使用各种天然物质，根据地域和文化差异，主要有以下几种：</p><ul><li><strong>草木灰水/皂角</strong>：这是最常见和古老的清洁剂。草木灰溶于水后呈碱性，可以去除油脂。皂角（一种植物果实）含有皂苷，遇水会产生泡沫，有清洁去污作用。</li><li><strong>淘米水/洗米水</strong>：淘米水含有淀粉和一些营养物质，有一定的清洁和滋养作用，也能使头发更柔顺。</li><li><strong>茶麸/茶籽饼</strong>：油茶籽榨油后的残渣，含有茶皂素，是一种天然的表面活性剂，去污力强，也能护发。</li><li><strong>醋</strong>：稀释的醋可以帮助平衡头皮的 pH 值，去除残留的碱性物质，使头发光亮。</li><li><strong>花草和植物浸泡液</strong>：如无患子、侧柏叶、槐树叶、荷叶、何首乌等，它们被认为具有清洁、滋养、乌发或促进头发生长的功效。</li><li><strong>粘土或泥浆</strong>：在某些文化中，特定的粘土或泥浆被用于清洁头发和头皮。</li></ul><h3 id=头油是什么>头油是什么？</h3><p><strong>头油，指的是头皮分泌的油脂（皮脂）。</strong></p><ul><li><strong>来源：</strong> 头皮上分布着大量的皮脂腺，它们会分泌一种叫做皮脂的物质。皮脂是一种复杂的混合物，主要由甘油三酯、脂肪酸、蜡酯、角鲨烯等组成。</li><li><strong>作用：</strong><ul><li><strong>保护作用：</strong> 皮脂在头皮和头发表面形成一层天然的保护膜，有助于滋润头发，防止水分流失，使其保持柔韧和光泽。</li><li><strong>抗菌作用：</strong> 一定量的皮脂有助于维持头皮微生物群的平衡，抑制有害细菌和真菌的过度生长。</li></ul></li><li><strong>问题：</strong> 但如果皮脂分泌过多，就会导致头发油腻、扁塌，容易吸附灰尘，甚至可能堵塞毛囊，引发头皮瘙痒、毛囊炎等问题。皮脂分泌受多种因素影响，如遗传、激素水平、饮食、压力和环境等。</li></ul><h3 id=头皮屑是什么>头皮屑是什么？</h3><p><strong>头皮屑是头皮表皮细胞异常快速脱落的现象。</strong></p><ul><li><strong>正常情况：</strong> 头皮细胞会正常地新陈代谢和脱落，通常以肉眼不可见的微小碎片形式脱落。</li><li><strong>异常情况：</strong> 当这种脱落过程加速，并伴随着细胞团块的聚集，就会形成肉眼可见的白色或黄色的鳞屑，这就是头皮屑。</li><li><strong>原因：</strong><ol><li><strong>马拉色菌（Malassezia globosa）的过度增殖：</strong> 这是一种存在于头皮上的常见酵母菌，当它过度繁殖时，会分解皮脂产生刺激性物质，导致头皮发炎和细胞加速脱落。</li><li><strong>皮脂分泌异常：</strong> 油性头皮更容易滋生马拉色菌。</li><li><strong>遗传因素。</strong></li><li><strong>压力、饮食、气候变化、洗头习惯不当</strong>（如洗发水残留、冲洗不净或洗头过频/过少）等都可能加剧头皮屑问题。</li></ol></li><li><strong>类型：</strong> 主要分为干性头皮屑（细小、白色，通常伴随头皮干燥）和油性头皮屑（较大、油腻、淡黄色，通常粘附在头发上）。</li></ul><h3 id=不用洗发水是好习惯还是坏习惯>不用洗发水是好习惯还是坏习惯？</h3><p>这个问题没有一个简单的“好”或“坏”的答案，因为它<strong>取决于个体差异和具体情况</strong>。</p><p><strong>对于大多数现代人来说，长期完全不用洗发水通常被认为是“坏习惯”或至少是“不适合”的，原因如下：</strong></p><ul><li><strong>现代生活环境：</strong> 我们面临更多的空气污染、灰尘、造型产品残留等，这些仅靠清水或传统天然清洁剂很难彻底清除。</li><li><strong>头皮油脂和异味：</strong> 头皮会持续分泌油脂，如果不用洗发水清洁，油脂会大量堆积，导致头发油腻、扁塌、容易滋生细菌，产生异味，并可能加剧头皮屑和头皮炎症问题。</li><li><strong>清洁效率：</strong> 现代洗发水含有表面活性剂，能有效乳化和去除油脂及污垢，这是传统天然方法难以比拟的。</li><li><strong>舒适度与卫生：</strong> 不用洗发水可能导致头皮发痒、不适，甚至影响个人形象和社交。</li></ul><p><strong>然而，在某些特定情况下，或者以更广义的“不用现代洗发水”来理解，有一些“好习惯”或尝试：</strong></p><ul><li><strong>“无（化学）洗发水”运动 (No-Poo Movement)：</strong> 一些人提倡减少或停止使用含有硫酸盐、硅油等化学成分的传统洗发水，转而使用更温和、天然的替代品（如小苏打、醋、清水等），或遵循“清水洗发 (Water-Only)”的方式。<ul><li><strong>支持者认为：</strong> 这可以帮助头皮恢复自然的油脂平衡，减少对化学物质的依赖，改善发质。</li><li><strong>局限性：</strong> 这种方法需要较长的适应期，不适合所有发质（尤其是油性发质），并且需要非常彻底的物理清洁（如长时间冲洗和按摩）。效果因人而异。</li></ul></li><li><strong>适度洗头，而非过度：</strong> 过于频繁地洗头（例如一天洗多次）可能会过度去除头皮的天然油脂，反而刺激皮脂腺分泌更多油脂，或导致头皮干燥敏感。所以，适度洗头（根据发质和活动量，例如两三天一次）是好习惯。</li></ul><p><strong>结论：</strong></p><p>对于绝大多数现代人来说，<strong>适度使用适合自己发质的洗发水</strong>是保持头皮和头发健康卫生的良好习惯。完全不用洗发水，尤其是只用清水，可能会带来一系列清洁和健康问题。如果想减少化学成分，可以尝试使用天然成分的洗发水或遵循“无洗发水”的一些温和替代方案，但需注意个体适应性。</p><hr><p><strong>User</strong></p><p>十斤荔枝大概多少个</p><hr><p><strong>Cursor</strong></p><p>要估算十斤荔枝大概有多少个，我们需要知道<strong>单个荔枝的平均重量</strong>。</p><p>荔枝的品种、大小、成熟度和水分含量都会影响其单重，所以这只是一个<strong>粗略的估计</strong>。</p><p>一般来说：</p><ul><li><strong>小一点的荔枝品种（如妃子笑、白糖罂）：</strong> 单个荔枝可能在 15-20 克左右。</li><li><strong>中等大小的荔枝品种（如桂味、糯米糍）：</strong> 单个荔枝可能在 20-30 克左右。</li><li><strong>大一点的荔枝品种：</strong> 单个荔枝可能超过 30 克。</li></ul><p>我们以一个**中等大小的荔枝（约 25 克/个）**来计算：</p><ol><li><p><strong>将 10 斤转换为克：</strong>
1 斤 = 500 克
10 斤 = 10 * 500 克 = 5000 克</p></li><li><p><strong>计算大致数量：</strong>
总重量 / 单个荔枝的重量 = 5000 克 / 25 克/个 = 200 个</p></li></ol><p>所以，如果以中等大小的荔枝为例，<strong>十斤荔枝大概有 200 个左右。</strong></p><p>如果您买的是小荔枝，数量会更多；如果是大荔枝，数量会少一些。</p><hr><p><strong>User</strong></p><p>材质包 ppr十什么</p><hr><p><strong>Cursor</strong></p><p>您提到的“材质包 ppr十什么”中的 <strong>ppr</strong>，很可能您想说的是 <strong>PBR</strong>。</p><p><strong>PBR</strong> 是 <strong>Physically Based Rendering（物理渲染）</strong> 的缩写。</p><p>在游戏（尤其是像 Minecraft 这样的沙盒游戏）的“材质包”语境中，PBR 材质包是指：</p><ul><li><strong>设计理念：</strong> 材质（纹理）是按照物理世界中光线与物体交互的方式来制作的。</li><li><strong>目的：</strong> 旨在提供<strong>更真实、更逼真</strong>的视觉效果。它能让游戏中的方块和物体在不同光照条件下（比如阳光、阴影、反射光等）呈现出更自然的质感、反光和阴影。</li><li><strong>实现方式：</strong> PBR 材质包通常包含多张纹理贴图，而不仅仅是传统的颜色贴图。这些额外的贴图用于描述材质的物理属性，例如：<ul><li><strong>Albedo (反照率)</strong>：物体的基础颜色。</li><li><strong>Normal Map (法线贴图)</strong>：模拟物体表面的细节和凹凸不平，使其看起来有深度，而不需要增加实际的多边形数量。</li><li><strong>Roughness Map (粗糙度贴图)</strong>：控制物体表面的粗糙程度，影响高光的形状和扩散。粗糙的表面会使光线漫反射，看起来不那么闪亮；光滑的表面则会形成清晰的高光。</li><li><strong>Metallic Map (金属度贴图)</strong>：指示材质是金属还是非金属，金属和非金属对光线的反射方式完全不同。</li><li><strong>Height Map / Displacement Map (高度/置换贴图)</strong>：提供更真实的表面凹凸感，有时可以实际改变模型几何体。</li><li><strong>Ambient Occlusion Map (环境光遮蔽贴图)</strong>：模拟物体缝隙和凹陷处由于被遮挡而无法被环境光照亮的部分，增加细节和真实感。</li></ul></li></ul><p><strong>PBR 材质包通常需要配合支持 PBR 渲染的</strong> <strong>光影包 (Shaders)</strong> <strong>才能发挥出最佳效果。</strong> 因为 PBR 材质本身只提供了数据，真正能根据这些数据进行物理模拟光照计算的是光影包（渲染器）。</p><p><strong>总结：</strong></p><p>您说的 <strong>&ldquo;ppr十什么&rdquo; 极大概率是 &ldquo;PBR + 光影包 (Shaders)&rdquo;</strong>。</p><p>如果不是 PBR，那么 &ldquo;PPR&rdquo; 在材质包或图形领域并不常见，可能是您听错了或者指代的是一个非常小众或自定义的术语。但从追求画面效果的角度来看，PBR 是最符合这个情境的。</p><hr><p><strong>User</strong></p><p>人在日常生活的时候会影响DNA的复制么？</p><p>例如情绪不好，大发雷霆，会导致基因突变么？</p><hr><p><strong>Cursor</strong></p><p>这是一个非常有趣且深入的问题！我们来仔细探讨一下。</p><h3 id=人在日常生活的时候会影响-dna-的复制吗>人在日常生活的时候会影响 DNA 的复制吗？</h3><p><strong>直接来看，日常生活中情绪的剧烈波动（例如大发雷霆）不会直接导致 DNA 复制出错或立即引起基因突变。</strong> DNA 复制是一个高度精确且受严格调控的分子过程，其错误率很低，并且细胞拥有一套强大的 DNA 损伤修复系统。</p><p>然而，如果从更宏观和长期的角度看，<strong>某些极端或长期的日常生理和心理状态，确实可能间接影响细胞的健康和 DNA 的完整性</strong>，但这与“直接导致基因突变”是不同的概念。</p><p><strong>DNA 突变主要由以下因素引起：</strong></p><ol><li><strong>DNA 复制过程中的随机错误：</strong> 尽管 DNA 聚合酶非常精确，但它偶尔还是会犯错。</li><li><strong>环境中的诱变剂：</strong> 例如紫外线辐射、电离辐射、某些化学物质（如香烟中的致癌物）、某些病毒感染等。</li><li><strong>细胞内代谢产物：</strong> 例如活性氧自由基 (ROS) 攻击 DNA，导致氧化损伤。</li><li><strong>DNA 修复机制的失效：</strong> 如果 DNA 损伤无法被及时有效修复，就可能形成永久性突变。</li></ol><h3 id=情绪不好大发雷霆会导致基因突变吗>情绪不好、大发雷霆，会导致基因突变吗？</h3><p><strong>情绪（如大发雷霆）不会直接“导致”基因突变。</strong> 情绪是神经递质和激素等生理化学物质复杂相互作用的心理体验，它们本身不直接与 DNA 分子发生化学反应以改变其序列。</p><p>但是，<strong>长期、慢性的负面情绪或极端的应激反应，确实可能通过生理途径对身体造成影响，从而间接增加 DNA 损伤或影响 DNA 修复的效率，理论上可能“增加”突变的背景风险，但这并非直接的因果关系，也远非“情绪一变，基因就突变”那么简单：</strong></p><ol><li><strong>应激激素：</strong> 剧烈的情绪波动（如愤怒、焦虑）会激活下丘脑-垂体-肾上腺轴（HPA 轴），导致肾上腺素和皮质醇等应激激素水平升高。<ul><li><strong>影响：</strong> 长期高水平的皮质醇可能抑制免疫系统，增加炎症反应，并可能影响细胞代谢和 DNA 修复机制。</li></ul></li><li><strong>氧化应激：</strong> 慢性压力和炎症可能导致体内活性氧自由基 (ROS) 的产生增加。<ul><li><strong>影响：</strong> ROS 是 DNA 的强氧化剂，能引起 DNA 链断裂、碱基修饰等损伤。如果这些损伤不能被及时修复，就有可能成为突变的来源。</li></ul></li><li><strong>炎症反应：</strong> 长期负面情绪可以促进慢性炎症状态。<ul><li><strong>影响：</strong> 炎症过程中的细胞因子和 ROS 同样可能对 DNA 造成损伤。</li></ul></li><li><strong>端粒缩短：</strong> 有研究表明，长期慢性压力可能加速细胞端粒（染色体末端的保护性结构）的缩短，这与细胞衰老和疾病风险增加有关，但端粒缩短本身不是基因突变。</li></ol><p><strong>总结：</strong></p><ul><li><strong>没有直接证据表明一次大发雷霆就会立即引发基因突变。</strong> 基因突变是分子层面的变化，通常需要物理或化学诱变剂的直接作用，或者 DNA 复制出错。</li><li><strong>长期、慢性的情绪应激</strong> 可能通过影响身体的生理状态（如增加氧化应激、慢性炎症、影响 DNA 修复机制等），<strong>间接地增加 DNA 损伤的积累风险</strong>。这是一种复杂、间接且累积性的影响，而非直接的、即时的基因突变。</li><li>人体自身具有强大的 DNA 损伤监测和修复系统，大多数 DNA 损伤都能被及时修复，防止其演变为永久性突变。</li></ul><p>因此，保持积极健康的心态，管理好情绪，对整体身心健康至关重要，也可能在长期上促进细胞健康和 DNA 完整性，但并非因为情绪直接“突变”了基因。</p><hr><p><strong>User</strong></p><p>但是并非所有有闲贵族都会变得厌倦而意气消沉。例如裕仁天皇就没有沉湎于颓废的享乐主义，而是投身于海洋生物学并取得了相当的成就。当人们不必为了满足物质需求而发挥能力时，他们经常为自己设定人为目标。在很多情况下他们为了追求这些目标而投入的精力与感情就像其他人为了获取物质必需品所进行的投入一样。因此罗马贵族会用文学修饰自己；几个世纪以前的许多欧洲贵族投入大量的时间与精力来打猎，尽管他们肯定不缺肉食；其他贵族则通过展示财富来进行社会地位的比拼；还有少数贵族转向了科学领域，例如裕仁天皇。</p><p>看看这个？</p><hr><p><strong>Cursor</strong></p><p>这段文字非常有趣，它探讨了一个深刻的人类行为模式：当人们的基本物质需求得到满足，不再需要为生存而奋斗时，他们会如何利用自己的能力和时间。</p><p>文章的核心观点是：<strong>并非所有享有特权的贵族都会沉溺于空虚或颓废，很多人会为自己设定“人为目标”，并投入巨大的精力去追求这些目标，其投入程度不亚于普通人为了物质必需品而付出的努力。</strong></p><p>文章列举了几个生动的例子来支持这个观点：</p><ul><li><strong>罗马贵族</strong>：他们选择用文学来修饰和丰富自己。</li><li><strong>欧洲贵族</strong>：他们投入大量时间和精力在打猎上，即使他们并不缺乏肉食，这是一种超越物质需求的追求。</li><li><strong>炫耀财富的贵族</strong>：通过展示财富来比拼社会地位，这也是一种人为设定的社会目标。</li><li><strong>少数转向科学的贵族</strong>：文章特别提到了<strong>裕仁天皇</strong>，他没有沉湎于享乐，而是投身于海洋生物学研究，并取得了显著成就。这被视为一种将精力投入到高尚智力追求的例子。</li></ul><p>这段话揭示了人性的一个侧面：<strong>一旦温饱问题解决，人类的驱动力往往会转向更高层次的自我实现、社会认同或智力探索，即使这些目标看起来“不必要”或“人为”。</strong> 这也从一个角度解释了为什么在不同的社会阶层和发展阶段，人们会有如此多样化的追求和投入。</p><hr><p><strong>User</strong></p><p>但是并非所有有闲贵族都会变得厌倦而意气消沉。例如裕仁天皇就没有沉湎于颓废的享乐主义，而是投身于海洋生物学并取得了相当的成就。当人们不必为了满足物质需求而发挥能力时，他们经常为自己设定人为目标。在很多情况下他们为了追求这些目标而投入的精力与感情就像其他人为了获取物质必需品所进行的投入一样。因此罗马贵族会用文学修饰自己；几个世纪以前的许多欧洲贵族投入大量的时间与精力来打猎，尽管他们肯定不缺肉食；其他贵族则通过展示财富来进行社会地位的比拼；还有少数贵族转向了科学领域，例如裕仁天皇。</p><hr><p><strong>Cursor</strong></p><p>好的，我再次看到了这段关于有闲贵族如何设定“人为目标”的文字，以及裕仁天皇投身海洋生物学作为例子的部分。</p><p>您是想让我再次分析这段文字，还是有什么新的问题或者希望我从不同的角度来探讨它？</p><hr><p><strong>User</strong></p><p>To view keyboard shortcuts, press question mark
View keyboard shortcuts</p><p>Post</p><p>See new posts
Conversation
Ryan Dahl
@rough__sea
AI is real and bitcoin is worth $100k. We are literally living in the cyberpunk future. Complete with a maximally dystopian US government. Why is no one freaking out about this? It’s like we hit the singularity and everyone just kept scrolling.
12:24 PM · Jun 9, 2025
·
1,282
Views</p><p>Capaj
@capajj
·
43m
Well we haven&rsquo;t hit it yet.
AI is still lacking two aspects- be able to learn without a human interaction and self preservation instinct.
Zrob
@Zrob0
·
34m
This is always how it was gonna go. Consider the past media as priming us
Dig-A-Hash Kid
@Dig_A_Hash_Kid
·
39m
Been freaking for years!
muggsy
@muggs233
·
52m
What do you propose we do differently
Haris Sulaiman
@harisvsulaiman
·
39m
And a genocide happening live before our eyes
Discover more
Sourced from across X
Jarred Sumner</p><p>@jarredsumner
·
13h
little-known feature of Bun</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>await import(“any-npm-package@version”)
</span></span></code></pre></div><p>Quote
Je Xia
@jexia_
·
Jun 8
dynamic import is working as well! thank you @bunjavascript 😭 x.com/jexia_/status/…
💎
@TJayyyy_1
·
9h
Nuno Mendes to Yamal tonight</p><p>From
Trigger
Matt Pocock
@mattpocockuk
·
16h
My hottest take, entirely biased by my own experience, is that getting a drama degree was more valuable for me than getting a CS degree would have been.</p><p>At 18 I didn&rsquo;t need more CS knowledge, I needed to learn how to communicate
Dillon Mulroy λ
@dillon_mulroy
·
8h
how i build and structure almost all of my effect services. ai is very good at repeating this pattern and building out new features/services
Relevant people
Ryan Dahl
@rough__sea
cofounder of
@deno_land
, creator of
@nodejs
. often goes by ry.
Trending now
What’s happening
Technology · Trending
macOS
1,571 posts
Politics · Trending
Koreans
19.4K posts
Business and finance · Trending
Hemi
17K posts
Politics · Trending
Nancy Pelosi
37.5K posts
Show more
Terms of Service
|
Privacy Policy
|
Cookie Policy
|
Accessibility
|
Ads info
|</p><p>More
© 2025 X Corp.</p><p>这里deno创始人在说什么？</p><hr><p><strong>Cursor</strong></p><p>好的，这段对话是 Deno 的创始人 <strong>Ryan Dahl</strong> 在社交媒体上发表的观点。</p><p>他主要在表达一种对当前世界状态的<strong>震惊和反思</strong>：</p><ul><li><strong>AI 已经成为现实，比特币价值达到 10 万美元</strong>：他认为我们已经进入了一个**“赛博朋克未来”**。</li><li><strong>社会的反常平静</strong>：尽管生活在一个“反乌托邦的美国政府”之下，并且已经“触及奇点”（singularity，指人工智能超越人类智能的假设点），但他惊讶于<strong>没有人对此感到“抓狂”或“震惊”</strong>，感觉大家只是“继续刷手机”（kept scrolling）。</li><li><strong>对大众反应的困惑</strong>：他似乎认为，面对这些颠覆性的技术进步和社会状况，人们的反应过于平淡，仿佛视而不见。</li></ul><p>总结来说，Ryan Dahl 认为我们正生活在一个科幻小说般的未来，充满了惊人的技术进步和潜在的社会危机，但他对此缺乏普遍的担忧和反应感到不解。</p><hr><p><strong>User</strong></p><p>也就是说大家没有意识到AI的影响力？</p><hr><p><strong>Cursor</strong></p><p>是的，根据 Ryan Dahl 的言论，他表达的正是这个意思：</p><p>他感到困惑和震惊的是，尽管 AI 已经取得如此大的进展（他认为已经“触及奇点”），但<strong>人们似乎没有意识到其巨大的影响力</strong>，或者说没有对此表现出足够的“抓狂”或“震惊”，而是继续保持着日常生活节奏，仿佛一切如常。</p><p>他认为，这种平淡的反应恰恰说明大家<strong>没有充分认识到 AI 及其它技术进步所带来的深刻变革和潜在影响</strong>。</p><hr><p><strong>User</strong></p><p>下面的评论怎么说的？</p><hr><p><strong>Cursor</strong></p><p>好的，我们来看看 Ryan Dahl 的推文下面的评论，大家对他的观点是怎样回应的：</p><ol><li><p><strong>@capajj 的评论 (43m)</strong>：</p><ul><li>他<strong>不同意</strong> Ryan Dahl 认为我们已经“触及奇点”的观点。</li><li>他认为 AI 仍然缺乏两个关键方面：<ul><li><strong>无需人类互动即可学习的能力</strong>。</li><li><strong>自我保护的本能</strong>。</li></ul></li><li><strong>解读：</strong> 这位评论者认为当前的 AI 尚未达到真正的“奇点”或完全自主智能的水平，因此人们没有“抓狂”是情有可原的，因为 AI 还没有满足这些基本条件。</li></ul></li><li><p><strong>@Zrob0 的评论 (34m)</strong>：</p><ul><li>他认为“一直以来都会是这样”。</li><li>他觉得过去的媒体（或者更广义的文化产品）可能已经**“预先准备”**了我们（priming us），让我们对这种未来不那么惊讶。</li><li><strong>解读：</strong> 这位评论者认为，社会对赛博朋克未来和平淡反应的接受，是长期文化熏陶的结果，而不是人们没有意识到。</li></ul></li><li><p><strong>@Dig_A_Hash_Kid 的评论 (39m)</strong>：</p><ul><li>他表示“我已经抓狂好几年了！”</li><li><strong>解读：</strong> 这位评论者认为并非所有人都无动于衷，他自己就是 Ryan Dahl 描述的那种“抓狂”的人，只是可能没有被 Ryan 看到。</li></ul></li><li><p><strong>@muggs233 的评论 (52m)</strong>：</p><ul><li>他直接提问：“你提议我们做些什么不同的事情？”</li><li><strong>解读：</strong> 这位评论者将讨论引向了行动层面，暗示如果 Ryan Dahl 觉得有问题，那应该提出解决方案，而不是仅仅指出问题。</li></ul></li><li><p><strong>@harisvsulaiman 的评论 (39m)</strong>：</p><ul><li>他补充了一个更沉重的话题：“并且一场种族灭绝正在我们眼前发生。”</li><li><strong>解读：</strong> 这位评论者将 Ryan Dahl 的担忧范围扩大，从技术和政府的赛博朋克化，延伸到了人类社会正在发生的更直接和悲惨的事件，暗示了人们的注意力可能被其他更紧迫的危机所占据。</li></ul></li></ol><p><strong>总结：</strong></p><p>这些评论对 Ryan Dahl 的观点给出了多样化的回应：</p><ul><li>一部分人认为他<strong>对“奇点”的判断过早</strong>，AI 还没有达到那个程度。</li><li>一部分人认为这种平静是<strong>长期社会文化影响</strong>的结果。</li><li>有人表示自己<strong>早已“抓狂”</strong>。</li><li>有人则<strong>呼吁提出解决方案</strong>，而不是只抱怨。</li><li>还有人将焦点引向了<strong>更严重的现实人道主义危机</strong>，暗示了人们对 AI 影响的“平静”可能是因为有更紧迫的痛苦和问题摆在眼前。</li></ul><hr><p><strong>User</strong></p><p>‪The New York Times‬
‪@nytimes.com‬
· 5 小时前
Harvey Fierstein, who has been a steady presence onstage and backstage over the course of 40 years, received a lifetime achievement Tony Award on Sunday night. Follow live updates. nyti.ms/445CFUN
The actor Harvey Fierstein, with short gray hair and wearing a blue suit and a colorful bow tie, holds a Tony Award, touching his hand to his chest. Photo by Sara Krulwich/The New York Times
ALT</p><p>98</p><p>500</p><p>‪Carl Bethea V‬
‪@carlbetheav.bsky.social‬
· 6 小时前
A modest greenhouse on the back porch</p><p>163</p><p>236</p><p>‪MariaevaJ (Formal Tribel)‬
‪@mariaevaj.bsky.social‬
· 55 分钟前
Chrimson headed partridge ♥️</p><p>10</p><p>31</p><p>‪الكسندرا ميراي‬
‪@lexialex.bsky.social‬
· 1 小时前
There are still people who think what&rsquo;s happening in Palestine and what&rsquo;s happening in LA are two completely unrelated issues. Dear God the American education system has done so much damage.</p><p>7</p><p>162</p><p>‪Sassy Little Hobbit‬
‪@sassypolitico.bsky.social‬
· 23 小时前
Christopher Luxon’s legacy summed up with 1 headline</p><p>8</p><p>89</p><p>‪The Washington Post‬
‪@washingtonpost.com‬
· 10 小时前
Defending champion Carlos Alcaraz rallied to beat Jannik Sinner at the French Open for his fifth Grand Slam singles championship.</p><p>At more than five hours and 25 minutes, it was the longest French Open final of the Open era.</p><p>Carlos Alcaraz rallies past Jannik Sinner in epic French Open final
The 22-year-old Alcaraz came back from two sets down for the first time in his career to remain undefeated in Grand Slam finals.
<a class=link href=https://www.washingtonpost.com target=_blank rel=noopener>www.washingtonpost.com</a></p><p>22</p><p>116</p><p>‪JAバンク‬
‪@jabank.bsky.social‬
· 15 小时前
なぜ人はうにをお願いしてしまうのか</p><p>1</p><p>166</p><p>‪MonotoneTim‬
‪@monotonetim.bsky.social‬
· 53 分钟前
love you guys.</p><p>1</p><p>‪Stephen Fitzgerald‬
‪@drharrylime.bsky.social‬
· 8 小时前
Morning Beaches
Back in the hood</p><p>24</p><p>87</p><p>‪Aaron Rupar‬
‪@atrupar.com‬
· 2 小时前
Newsom: &ldquo;Arrest me. Let&rsquo;s just get it over with, tough guy. I don&rsquo;t give a damn &mldr; Tom, arrest me. Let&rsquo;s go.&rdquo;</p><p>528</p><p>4131</p><p>‪darthazius‬
‪@darthazius.bsky.social‬
· 4 小时前
Scott Summers after getting with Emma Frost:</p><p>‪Blue sky nice guy‬
‪@rajandelman.bsky.social‬
· 6 小时前
I do not want to be in Phoenix anymore. That&rsquo;s enough</p><p>3</p><p>‪Ryan Goodman‬
‪@rgoodlaw.bsky.social‬
· 2 小时前
Major General Randy E. Manner, former Acting Vice Chief, National Guard Bureau statement to Fox News:</p><p>&ldquo;This is an inappropriate use of the National Guard and is not warranted.”
Major General Randy E. Manner, former Acting Vice Chief, National Guard Bureau statement to Fox News: “The President&rsquo;s federal deployment of the National Guard over the official wishes of a governor is bad for all Americans concerned about freedom of speech and states rights. The governor has the authority and ability to respond to the civil disturbances with law enforcement capabilities within his state, augmented as necessary by requesting law enforcement assistance from other governors. There are over a million badged and trained members of law enforcement in this country for the governor to ask for help if he needs it. While this is presently a legal order, it tramples the governor’s rights and obligations to protect his people. This is an inappropriate use of the National Guard and is not warranted.”
ALT</p><p>108</p><p>2404</p><p>‪UzamakiJ‬
‪@uzamakij.bsky.social‬
· 12 小时前
Nothin but the facts</p><p>106</p><p>1937</p><p>‪Gabby Wilde‬
‪@stackwild.bsky.social‬
· 9 小时前
I&rsquo;m blindly copy pasting commands from chatgpt into my digitalocean server&mldr; this might end badly 😅</p><p>But how else am I supposed to set up a swapfile and a mysql watchdog cronjob? I&rsquo;m not a sysadmin 🧙‍♂️</p><p>2</p><p>‪The New York Times‬
‪@nytimes.com‬
· 7 小时前
Cole Escola, Leslie Odom Jr., Daniel Dae Kim, Mia Farrow and more stars arrived in style to the 2025 Tony Awards. See more looks from the red carpet: nyti.ms/3FLucwO
Cole Escola poses on a red carpet, wearing a light blue and silver gown with an elaborate bodice and a long train. They have dark, curly hair. Photo by Dimitrios Kambouris/Getty Images
ALT</p><p>41</p><p>27</p><p>‪Zaira 🦊💿🎃‬
‪@purdeydrake.bsky.social‬
· 18 小时前
“come on, lon! help me outta this…” lol
lonnie my tuxedo cat with his front legs crossed looking annoyed as if he’s ignoring bob vaughn as hayden danziger from “troubled waters” seen on the telly screen.
ALT</p><p>2</p><p>3</p><p>‪Hank Green‬
‪@hankgreen.bsky.social‬
· 54 分钟前
I was just putting Orin to bed and he said, “I don’t know how to use my life,” so now there’s three of us in the house like this.</p><p>44</p><p>79</p><p>‪Meeplenomics‬
‪@meeplenomics.bsky.social‬
· 18 小时前
Hey, Meeps! Today On The Table, Gaia Project with The Lost Fleet expansion! Published by
@capstone-games.com
. The Lost Fleet really elevates the game adding more unique factions, location choices and objectives. If you are a Gaia Project fan, this expansion is a must! #boardgames #space #fun #games</p><p>‪oddgoo‬
‪@viriditax.bsky.social‬
· 1 小时前
haters to my left, haters to my right, haters perched on the orthogonal dimension I’d like to escape to but cannot for my material reality is intimately interwoven with the sonderwebs of all the haters and cannot be severed without harming us all</p><p>1</p><p>‪WellnessDay.App‬
‪@wellnessday.bsky.social‬
· 10 小时前
7 Habits To Out Grow Anyone #productivity #wellbeing #Positivethinking #ProductivityTip #motivation #inspiration #wellness #Happiness #positivemindset #selfconfidence #lifelessons #selfimprovement #selfdevelopment #success #habits</p><p>4</p><p>‪Kai Ryssdal‬
‪@kairyssdal.bsky.social‬
· 7 小时前
Hello. I live in Los Angeles. The president is lying.</p><p>2432</p><p>1.2万</p><p>‪Peggy McDonald‬
‪@peggymcdonald.bsky.social‬
· 5 小时前
🦋🗽</p><p>21</p><p>344</p><p>‪Acyn‬
‪@acyn.bsky.social‬
· 5 小时前
Rep. Gomez: LA County alone is 34% foreign born, 34%. So when he says they&rsquo;re going to liberate us, who is he going to liberate us from? Ourselves?</p><p>310</p><p>3693</p><p>‪Nate Moore‬
‪@natemoo.re‬
· 4 分钟前
My father-in-law is a web developer. He is insanely gifted. We were looking at a website together years ago and I asked him what it would cost to build it today. I will never forget his answer…</p><p>“We can’t, we don’t know how to do it.”
Cartoon-style web page with a space theme from the Homestar Runner website. A rocket ship has landed on the moon constellations shaped like characters from the site. Homestar is wearing a space suite as he looks on from the foreground. Navigation buttons on the left read: ‘toons’, ‘games’, ‘characters’, ‘downloads’, ‘store’, and ‘e-mail’
ALT</p><p>‪Andrew Perpetua‬
‪@andrewperpetua.bsky.social‬
· 4 小时前
I&rsquo;m working on backlog this weekend. Found the record day for video confirmed Russian KIA. 552 killed on April 12th.</p><p>Still not done with the day, but probably wont increase much.</p><p>Also, there were 275 vehicle losses that day. Which is what I am currently working through. 68 done, 207 to go. 😵</p><p>5</p><p>15</p><p>‪Olivier César‬
‪@anticowl.bsky.social‬
· 21 小时前
Strayed Lights</p><p>Another game that went under the radar of a lot of people.</p><p>#virtualphotogrphy #strayedlights #vprepost #vpsupport</p><p>2</p><p>1</p><p>‪Sooz Kempner‬
‪@soozuk.bsky.social‬
· 9 小时前
Things are crazy right now. Sometimes you need to just kick back and watch a Turkish man yell &ldquo;MEOW&rdquo; at an egg.</p><p>19</p><p>93</p><p>‪arxiv cs.CL‬
‪@arxiv-cs-cl.bsky.social‬
· 12 分钟前
Chen Xiong, Zihao Wang, Rui Zhu, Tsung-Yi Ho, Pin-Yu Chen, Jingwei Xiong, Haixu Tang, Lucila Ohno-Machado
Hey, That&rsquo;s My Data! Label-Only Dataset Inference in Large Language Models
arxiv.org/abs/2506.06057</p><p>‪The Washington Post‬
‪@washingtonpost.com‬
· 9 小时前
Blueberries are ready to make their debut for the season. Here are some of our best blueberry recipes to put the fruit to good use.</p><p>7 of our best blueberry recipes, including muffins, salads and cake
Blueberries star in these sweet and savory recipes, including lemonade, poke cake, muffins, barbecue sauce and more.
<a class=link href=https://www.washingtonpost.com target=_blank rel=noopener>www.washingtonpost.com</a></p><p>44</p><p>43</p><p>‪mensrea‬
‪@mensie.bsky.social‬
· 1 小时前
LAPD when they think nobody is watching</p><p>106</p><p>829</p><p>为你推荐</p><p>Kai Ryssdal
‪@kairyssdal.bsky.social‬</p><p>Dad, husband, host @Marketplace. IPAs. Soccer referee, trail runner, mountain biker. Veteran. <a class=link href=mailto:kryssdal@marketplace.org>kryssdal@marketplace.org</a></p><p>Patton Oswalt
‪@pattonoswalt.bsky.social‬</p><p>Writing and yelling.</p><p>Aaron Rupar
‪@atrupar.com‬</p><p>Independent journalist and publisher of the Public Notice newsletter <a class=link href=https://www.publicnotice.co/subscribe target=_blank rel=noopener>www.publicnotice.co/subscribe</a></p><p>Acyn
‪@acyn.bsky.social‬</p><p>Senior Digital Editor for MeidasTouch.com
Clips made with SnapStream
Internet Hooligan&mldr;
浏览更多建议</p><p>‪Doug Mack‬
‪@douglasmack.bsky.social‬
· 6 小时前
not the main issue here but i&rsquo;d really appreciate it if democratic politicians spoke out in support of big-city life and culture with the same energy and reverence that all politicians have for small towns</p><p>los angeles is &ldquo;real america&rdquo; and so are all the other big cities the president hates</p><p>231</p><p>4173</p><p>‪Manu 🌊🐳🐦‍⬛🏔️🌎‬
‪@manelcamacho.bsky.social‬
· 10 小时前
Another bird has broken its eggshell; meanwhile, its sibling is starting to hatch nearby. Apparently, they will dance together in a few days over the ocean!</p><p>Our first second and third tropical storms came in just 10 days.</p><p>#storm</p><p>1</p><p>‪JENN! ✨‬
‪@thekeythief.bsky.social‬
· 4 小时前
SHIELD • YOUR • NEIGHBORS</p><p>Here in #LosAngeles, we protect our neighbors at all costs.
A family of 3, outlined in green, hide behind a roaring bear, as large foreboding black shadows with nightsticks and helmets lurk behind it. A green star outstretched at their feet as they try to hide from view. Text at the bottom reads in call caps: &ldquo;SHIELD YOUR NEIGHBORS&rdquo;
ALT</p><p>12</p><p>1692</p><p>‪Silentroom‬
‪@silentroom.bsky.social‬
· 12 小时前
全然時間がないので悠長に構えてられん</p><p>‪Shahid Mehmood‬
‪@smaskern.bsky.social‬
· 5 小时前
Norwegian midnight 🕊️</p><p>8</p><p>50</p><p>‪Patton Oswalt‬
‪@pattonoswalt.bsky.social‬
· 10 小时前</p><p>533</p><p>9706</p><p>‪arxiv cs.CL‬
‪@arxiv-cs-cl.bsky.social‬
· 12 分钟前
Yingqi Hu, Zhuo Zhang, Jingyuan Zhang, Lizhen Qu, Zenglin Xu
Simple Yet Effective: Extracting Private Data Across Clients in Federated Fine-Tuning of Large Language Models
arxiv.org/abs/2506.06060</p><p>‪yrrweg⁷🦢‬
‪@yrrweg.bsky.social‬
· 14 小时前
This is fine 🙂🔥</p><p>#J-Hope</p><p>j-hope ‘Killin&rsquo; It Girl (feat. GloRilla)’ Official Teaser
YouTube video by HYBE LABELS
youtu.be</p><p>9</p><p>6</p><p>‪ぽい‬
‪@pppstg.bsky.social‬
· 16 小时前
ズールゥとズーゴン　すこ
zilu and zigong
ALT</p><p>6</p><p>‪Christoph Rumpel‬
‪@christophrumpel.bsky.social‬
· 18 小时前
Hey 👋</p><p>Haven&rsquo;t given up on bsky yet! Just taking a month to focus on family and our newest little member 👶✨</p><p>I&rsquo;ll be back soon, but in the meantime: keep crushing it at work 💪 and don&rsquo;t forget to cherish time with your loved ones ❤️</p><p>1</p><p>1</p><p>‪Dejan Pantic‬
‪@dejanp.bsky.social‬
· 15 小时前
In Europe, a self-propelled AA gun rushing down your street is sometimes just a bit more manic Monday, move along, planet, nothing to see here.</p><p>‪Jakub Jaraczewski‬
‪@jakubjaraczewski.bsky.social‬
· 1 天前
Ah, Americans discovering the distinctly European &ldquo;oh, there are tanks on my street, are they firing or is it just some parade?&rdquo; vibe that we&rsquo;ve been rocking since 1939.</p><p>1</p><p>1</p><p>‪Eric_Time‬
‪@erictime.bsky.social‬
· 11 小时前
Ghostface Killah voice:
Hockey overtime
Grand Slam Fifth sets
Helicopter cocaine
Haliburton wrist flex</p><p>3</p><p>‪Konstantin 🔭‬
‪@iamkonstantin.eu‬
· 15 分钟前
Good morning! ☕️
Happy &ldquo;liquid glass&rdquo; day to everyone who celebrates</p><p>‪Liz Rice 💛💙🐝‬
‪@lizrice.com‬
· 17 分钟前
Ok
@duolingoverde.bsky.social
Tip: Use “me gustan” instead of “me gustan” for plural nouns
ALT</p><p>‪philb‬
‪@phillipbankss.bsky.social‬
· 3 小时前
chilling on the weekend like usual
chill guy sitting under a tree. in the background is a forest line
ALT</p><p>6</p><p>97</p><p>‪Kevin McAleer 🤖 Robot Maker‬
‪@kevsmac.bsky.social‬
· 16 小时前
Whoop - write-up of the Thinkman project is now up:</p><p><a class=link href=https://www.kevsrobots.com/projects/thi target=_blank rel=noopener>www.kevsrobots.com/projects/thi</a>&mldr;</p><p>Livestream later today - 7pm BST
<a class=link href=https://www.kevsrobots.com/projects/thinkman target=_blank rel=noopener>https://www.kevsrobots.com/projects/thinkman</a>
<a class=link href=https://www.kevsrobots.com target=_blank rel=noopener>www.kevsrobots.com</a></p><p>1</p><p>‪Tom Dell&rsquo;Aringa 🚀 | Sci-fi Author‬
‪@tomdellaringa.bsky.social‬
· 12 小时前
It&rsquo;s possible that Grammarly has lost it&rsquo;s damn freaking mind.</p><p>#writing #writingcommunity #booksky</p><p>451</p><p>1123</p><p>‪ExpendableMudge (he/him)‬
‪@expendablemudge.bsky.social‬
· 10 小时前
THE DEVILS (The Devils #1) by
@joeabercrombie.com
opens a fun alternate-Europe fantasy series via @torbooks.bsky.social&mldr;optioned by James Cameron!
expendablemudge.blogspot.com/2025/06/the-&mldr;</p><p>THE DEVILS (The Devils #1) opens a fun alternate-Europe fantasy series&mldr;optioned by James Cameron!
THE DEVILS (The Devils #1) JOE ABERCROMBIE (illus. John Anthony di Giovanni) Tor Books ( non-affiliate Bookshop.org link) $14.99 ebo&mldr;
expendablemudge.blogspot.com</p><p>1</p><p>‪arxiv cs.CL‬
‪@arxiv-cs-cl.bsky.social‬
· 23 分钟前
Christophe Van Gysel, Maggie Wu, Lyan Verwimp, Caglar Tirkaz, Marco Bertola, Zhihong Lei, Youssef Oualil
Phonetically-Augmented Discriminative Rescoring for Voice Search Error Correction
arxiv.org/abs/2506.06117</p><p>‪Mac‬
‪@supermacbrother.bsky.social‬
· 15 小时前
ALL IN PRODUCTION - Ironclad, Pioneer, Perseus, Apollo, Paladin & More | Star Citizen <a class=link href="https://www.youtube.com/watch?v=ZuUd" target=_blank rel=noopener>www.youtube.com/watch?v=ZuUd</a>&mldr; #starcitizen #youtube</p><p>ALL IN PRODUCTION - Ironclad, Pioneer, Perseus, Apollo, Paladin & More | Star Citizen
YouTube video by SuperMacBrother
<a class=link href=https://www.youtube.com target=_blank rel=noopener>www.youtube.com</a></p><p>2</p><p>‪daily bunnies 🐇✨‬
‪@dailybunnies.bsky.social‬
· 3 小时前</p><p>61</p><p>305</p><p>‪Gale Scheelar 🇨🇦 AKA NanaGale‬
‪@nanagale.bsky.social‬
· 9 小时前</p><p>39</p><p>280</p><p>‪Logan‬
‪@loganeer.com‬
· 14 小时前</p><p>3</p><p>10</p><p>‪Writerboy‬
‪@writerboyz.bsky.social‬
· 19 小时前
Palantir is coming to Britain. Starmer is already in talks. This is very bad.</p><p>‪Ricky Bobby‬
‪@veritasnow.bsky.social‬
· 1 天前
Peter Thiel’s extreme views are deeply concerning given his influence over the government. His company is Palantir, a mass surveillance tool used by agencies like ICE. He doesn’t think anyone should vote. &ldquo;I no longer believe that freedom and democracy are compatible.&rdquo; sfist.com/2009/04/28/f&mldr;
Facebook Investor Not Pleased With Women&rsquo;s Suffrage: SFist
Peter Thiel &ndash; noted <a href=http://valleywag.gawker.com/335894/peter-thiel-is-totally-gay-people>gay</a> Silicon Valley libertarian, PayPal co-founder, and the one of the first Facebook investors -&mldr;
sfist.com</p><p>2</p><p>11</p><p>‪Anathra‬
‪@anathra.bsky.social‬
· 16 小时前
I love this! Thank you
@rubyco.bsky.social</p><p>1</p><p>‪Thomas M. Martens‬
‪@tmm19051971.bsky.social‬
· 8 小时前
#skerries #shenickisland #nestforbirds #irishsea #water #sea #island #ireland #eire</p><p>3</p><p>‪Johto Times‬
‪@johtotimes.bsky.social‬
· 5 小时前
Scarlet & Violet players! Don&rsquo;t forget to redeem this very limited time Porygon 2!</p><p>‪Serebii.net‬
‪@serebii.bsky.social‬
· 1 天前
Serebii Update: The Pokémon Scarlet & Violet Porygon2 distribution to celebrate the Korean Trainers Cup has been revealed.</p><p>Code: N01SUPP0RTPTC24</p><p>Runs until June 9th 2025 at 14:59 UTC</p><p>Full details @ <a class=link href=https://www.serebii.net/index2.shtml target=_blank rel=noopener>www.serebii.net/index2.shtml</a></p><p>3</p><p>‪TestingCatalog News 🗞️‬
‪@testingcatalog.com‬
· 21 小时前
ChatGPT 4o is now thinking first before searching, as well as in some other cases.</p><p>Silent updates 🤖</p><p>1</p><p>‪Safe Street Rebel‬
‪@safestreetrebel.com‬
· 2 小时前
benches have gone up at bus stops around the Mission and parts south. thanks sfbabc.org !! everybody deserves comfort and dignity while waiting for the bus</p><p>a senior sitting on a bench waiting for a bus at Mission/Powers
ALT</p><p>people on a bench waiting for a bus at 26th/Mission
ALT</p><p>somebody sitting on a bench at 18th/Mission
ALT</p><p>a bench at a bus stop at Bryant/16th
ALT</p><p>1</p><p>18</p><p>‪AZ Intel‬
‪@azintel.bsky.social‬
· 6 小时前
Massive crowds have flooded the streets of Los Angeles, California as the LAPD declares a citywide tactical alert and announces an unlawful assembly and dispersal order downtown, amid escalating violence and unrest.</p><p>Video: Anthony Cabassa.</p><p>20</p><p>96</p><p>Mego Tan
‪@tannal.github.io‬
主页
探索
通知
私信
动态源
列表
个人资料
设置</p><p>新帖文
搜索
Discover
Following
更多动态源
热门</p><p>ICE Protests
NBA Finals
Tony Awards
Greta Thunberg
Harvey Fierstein
Freedom Flotilla
反馈 • 隐私 • 条款 • 帮助</p><p>看看这个？</p><hr><p><strong>Cursor</strong></p><p>这是一个社交媒体（很可能是 Bluesky 或类似的平台）的实时动态，涵盖了非常广泛的话题，从时事政治到技术，再到个人生活和娱乐。</p><p>主要内容和讨论点可以概括为以下几类：</p><ol><li><p><strong>美国国内政治和社会问题（尤以洛杉矶骚乱为中心）</strong>：</p><ul><li>多条推文提及<strong>洛杉矶的骚乱和暴力事件</strong>（Rioters pouring gasoline, LAPD declaring tactical alert, unlawful assembly），并引发了关于这些事件性质的争议（如 LAPD 警长称之为“和平抗议”）。</li><li>关于<strong>总统派遣国民警卫队</strong>的讨论，有加州州长 Newsom 的挑衅性言论（“Arrest me”），也有退役少将 Randy E. Manner 批评这是不当使用国民警卫队，侵犯州权和言论自由。</li><li>有人将<strong>巴勒斯坦的冲突与洛杉矶的事件联系起来</strong>，批评美国教育体系的缺陷。</li><li>关于<strong>移民问题</strong>的评论（Rep. Gomez 提及洛杉矶县 34% 的外国出生人口）。</li><li>对<strong>政治家和城市生活</strong>的看法（Doug Mack 呼吁民主党政治家支持大城市文化）。</li><li><strong>Peter Thiel 和 Palantir</strong> 对政府影响力的担忧，以及他关于“自由与民主不兼容”的观点。</li></ul></li><li><p><strong>AI/技术进展与讨论</strong>：</p><ul><li>有人分享了<strong>盲目复制 ChatGPT 命令</strong>到服务器的经历，暗示了 AI 协助的便利性与潜在风险。</li><li>提到 <strong>ChatGPT 4o 的“静默更新”</strong>，即它在搜索前会先进行思考。</li><li>多条来自 <code>arxiv cs.CL</code> 的推文发布了关于<strong>大型语言模型（LLMs）的最新研究论文</strong>，包括“Label-Only Dataset Inference”和“Extracting Private Data Across Clients in Federated Fine-Tuning”。</li><li>Deno 创始人 <strong>Ryan Dahl</strong> 再次发文，表达了对 AI 普及和比特币高价，但社会却异常平静的“赛博朋克未来”的困惑。</li><li>前端工具 <strong>Bun</strong> 的新特性（动态导入 npm 包）。</li><li>一位资深开发者谈到现代网站开发中，有些复杂网站“我们无法再构建它们”的窘境。</li></ul></li><li><p><strong>体育与娱乐新闻</strong>：</p><ul><li><strong>法网（French Open）决赛</strong>：卡洛斯·阿尔卡拉斯击败詹尼克·辛纳，赢得第五个大满贯单打冠军，并成为公开赛时代最长的法网决赛。</li><li><strong>托尼奖（Tony Awards）</strong>：Harvey Fierstein 获得终身成就奖，以及红毯时尚。</li><li>关于宝可梦 (Pokémon) 的游戏内 Porygon2 兑换码。</li><li>科幻/游戏相关（星际公民）。</li></ul></li><li><p><strong>个人观察与生活琐事</strong>：</p><ul><li>家庭和育儿瞬间（孩子关于“如何使用我的生命”的困惑）。</li><li>日常随想和幽默（猫、对鸡蛋喊“喵呜”）。</li><li>旅行见闻（不愿再在凤凰城）。</li><li>对欧洲人看到街上坦克反应的调侃。</li><li>一些哲学性思考（关于“haters”的评论）。</li><li>推荐桌游（Gaia Project）。</li></ul></li></ol><p>总的来说，这是一个反映了<strong>当前全球关注的热点话题（如地缘政治冲突、AI 发展）、美国国内社会问题（如骚乱、政府行为）以及人们日常生活的方方面面</strong>的动态聚合。</p><p>根据您提供的论文内容，这篇论文提出的 <strong>CatShift 框架</strong> <strong>并没有对数据集本身的内容或结构进行“改动”</strong>。</p><p>它的贡献在于<strong>以一种创新的方式“使用”数据集</strong>，来推断某个可疑数据集是否曾被大型语言模型 (LLM) 用于其原始训练。</p><p>具体来说：</p><h3 id=推理inference阶段>推理（Inference）阶段：</h3><ul><li><strong>没有对数据集进行改动。</strong></li><li><strong>如何使用数据集：</strong> 在推理阶段，CatShift 使用可疑数据集的<strong>测试子集</strong>（<code>Dtest_s</code>）和已知非成员的验证集（<code>Dv</code>）作为<strong>输入提示（prompts）</strong>，分别喂给原始模型 (<code>f(0)</code>) 和经过微调后的模型 (<code>f(1)</code>)。</li><li><strong>目的：</strong> 获取模型在微调前后的<strong>输出补全（top-1 completions）</strong>。然后，通过计算这些补全之间的<strong>相似性分数</strong>，来量化模型输出的变化量。</li></ul><h3 id=训练training在论文中更具体地指微调-fine-tuning阶段>训练（Training，在论文中更具体地指微调 Fine-Tuning）阶段：</h3><ul><li><strong>没有对数据集进行改动。</strong></li><li><strong>如何使用数据集：</strong> CatShift 会将可疑数据集（<code>Ds</code>）<strong>划分成训练子集（<code>Dtrain_s</code>）和测试子集（<code>Dtest_s</code>）</strong>。<ul><li>其中，<strong>训练子集（<code>Dtrain_s</code>）被用来对目标 LLM 进行“微调”（fine-tune）</strong>。这个过程会更新 LLM 的内部参数（权重），从而得到一个微调后的模型 (<code>f(1)</code>)。</li></ul></li><li><strong>目的：</strong> 利用<strong>灾难性遗忘 (Catastrophic Forgetting)</strong> 现象。如果可疑数据集曾是模型原始训练集的一部分，那么对其进行微调会导致模型“回忆”起部分被遗忘的知识，从而在输出上产生显著变化。如果数据集是全新的，则变化会相对不那么剧烈。</li></ul><p><strong>总结来说，这篇论文的贡献在于：</strong></p><p>它提出了一种**“标签-只有”（label-only）的数据集推断方法** <code>CatShift</code>，该方法巧妙地利用了 LLM 的<strong>灾难性遗忘现象</strong>。它通过：</p><ol><li>将可疑数据集的<strong>一部分（训练子集）用于微调目标 LLM</strong>。</li><li>然后<strong>比较模型在微调前后对可疑数据集的另一部分（测试子集）以及一个已知非成员验证集的输出变化</strong>。</li><li>最后通过<strong>统计假设检验</strong>来判断可疑数据集是否曾是 LLM 原始训练数据的一部分。</li></ol><p>整个过程中，<strong>原始数据集的内容保持不变</strong>，论文的贡献在于如何巧妙地<strong>利用数据集与模型之间的交互</strong>来推断其成员身份。</p><hr><p><strong>User</strong></p><p>chatter
Off-topic conversation and chatter.</p><p>VIEWS
Recent conversations
Inbox
Combined feed
Mentions
Reactions
Starred messages
Drafts
DIRECT MESSAGES
CHANNELS
announce
chatter
Notes from the Web Engines Hackfest (June 2025)
AMD Upstreams Efficient Malloc Support On GPUs For LLVM libc
Draft article very critical of AI
(Ab)using usvg and kurbo to generate gcode
Finale - How music software dies (by Tantacrul)
Anyone heard of Moho before?
Linear vs perceptual light coverage to alpha
Schultzschultz: touchtype
Show all topics
checkins
general
glazier
kurbo
new members
office hours
pairing
parley
runebender
rust
rust ui
study-group
vello
web
xi-editor
xilem
zulip
BROWSE 13 MORE CHANNELS
chatter</p><blockquote></blockquote><p>Notes from the Web Engines Hackfest (June 2025)
Yesterday
Nico Burns
22:34
I recently attended the Web Engines Hackfest (<a class=link href=https://webengineshackfest.org/ target=_blank rel=noopener>https://webengineshackfest.org/</a>) and I have some notes:</p><p>Fontations: Dominik Röttsches was there representing the Fontations project. Martin Robinson (Servo), Jonathan Kew (Firefox), and I (WebRender) all participated in a hackathon integrating Skrifa into Servo/Firefox/WebRender). Some progress was made, but code . There was also interest from WebKit people, although shipping Rust there is apparently difficult.
My PR for WebRender is here: <a class=link href=https://github.com/servo/webrender/pull/4869 target=_blank rel=noopener>https://github.com/servo/webrender/pull/4869</a>
Martin&rsquo;s PR for Servo is here: <a class=link href=https://github.com/servo/servo/pull/37287 target=_blank rel=noopener>https://github.com/servo/servo/pull/37287</a>
Vello: There is interest from Deno in implementing the Canvas2D API on top of Vello (I believe @Leo Kettmeir may be working on this).
SVG: The SVG standard is looking for an editor. If we ever &ldquo;do svg&rdquo; in a more a committed way than we are currently doing then this may something to look at. I would personally be very interested in making SVG support a superset of the COLRv1 imaging model (e.g. things like sweep gradients).
General Rust: V8 is adopting the temporal_rs library from Boa.
Leo Kettmeir
01:51
correct, I have started this during the week, and is progressing nicely. still trying to understand some things related to vello/parley, but i will ask about those if i cant figure things out.</p><p>Message #chatter > Notes from the Web Engines Hackfest (June 2025)
Start new conversation
New direct message
Filter users
Leo Kettmeir
Nico Burns
tannal</p><p>(you)
Bruce Mitchener
crlf0710
Jared Moulton
Robert Brewitz
Aaron Muir Hamilton
Austin M. Reppert
Benjamin Saunders
Bunbury
Chris Morgan
Clark Fagot
Colin Rofls
Jed Brown
Kevin Boos
Paul Xu
Piotr Wyszomirski (chipnertkj)
Raph Levien
Spencer C. Imbleau
valadaptive
Zarenor
郭育胜
一丝
Abhinav
Ada Böhm
Adam
Adam Goldstein
Adam Nemecek
additional-pumpkin
AdrianEddy
adsick
Ahmed B
Ahmed Charles
Ajwad Mahboob
Alain Cormier
Alessandro Re
Alex Gemberg
Alex Good
Alex Harrison
View all subscribers
Invite to organization</p><p>这里在讨论什么么？</p><hr><p><strong>Cursor</strong></p><p>这段内容来自一个名为 <code>chatter</code> 的交流频道，讨论的主题是 <strong>“Web Engines Hackfest (2025 年 6 月) 的笔记”</strong>。</p><p><strong>Nico Burns</strong> 分享了他在这次 Hackfest 上的一些见闻和进展：</p><ol><li><p><strong>Fontations 项目</strong>：</p><ul><li>他提到了 <strong>Fontations 项目</strong>，这是一个关于字体渲染的项目。</li><li>他和来自 Servo (Martin Robinson) 以及 Firefox (Jonathan Kew) 的同事一起，尝试将 <strong>Skrifa 库</strong>集成到 Servo、Firefox 和 WebRender 中。尽管遇到了一些代码上的困难，但取得了一定进展。</li><li>WebKit 团队也对此感兴趣，但他们将 Rust 代码集成到 WebKit 中似乎比较困难。</li><li>Nico 也分享了他在 WebRender 和 Martin 在 Servo 上的相关 Pull Request 链接。</li></ul></li><li><p><strong>Vello 项目</strong>：</p><ul><li>他指出 <strong>Deno 团队对在 Vello 上实现 Canvas2D API 非常感兴趣</strong>，并提到 <strong>Leo Kettmeir</strong> 可能正在进行这项工作。</li></ul></li><li><p><strong>SVG 标准</strong>：</p><ul><li>SVG 标准正在寻找新的编辑者。Nico 个人对让 SVG 支持成为 COLRv1 图像模型（例如 sweep gradients）的超集很感兴趣。</li></ul></li><li><p><strong>Rust 语言在 Web 技术中的应用</strong>：</p><ul><li>V8 JavaScript 引擎正在采用来自 Boa 项目的 <code>temporal_rs</code> 库。</li></ul></li></ol><p><strong>Leo Kettmeir</strong> 回应了 Nico 的提到，并确认：</p><ul><li>他确实<strong>已经开始在 Vello 上实现 Deno 的 Canvas2D API</strong>，并且进展顺利。</li><li>他还在努力理解 Vello 和 Parley (一个与 Vello 相关的库) 的一些细节，如果遇到问题会寻求帮助。</li></ul><p><strong>总结来说，这里讨论的是 Web 引擎领域的技术会议进展，重点关注了字体渲染、新的图形渲染器 Vello 在 Deno 中的应用、SVG 标准的演进以及 Rust 语言在这些核心 Web 技术中的渗透和采纳情况。</strong></p><hr><p><strong>User</strong></p><p>parley应该依赖vello吧？</p><hr><p><strong>Cursor</strong></p><p>根据您提供的这段聊天记录，<strong><code>parley</code> 和 <code>vello</code> 之间存在关联，但 <code>parley</code> 并不是直接“依赖”于 <code>vello</code>。</strong></p><p>从 <code>Leo Kettmeir</code> 的回复：</p><p>&ldquo;correct, I have started this during the week, and is progressing nicely. still trying to understand some things related to <strong>vello/parley</strong>, but i will ask about those if i cant figure things out.&rdquo;</p><p>这句话表明：</p><ol><li><code>vello</code> 和 <code>parley</code> 是两个<strong>相关的项目</strong>。</li><li>Leo 在实现 Deno 的 Canvas2D API on top of Vello 的过程中，遇到了<strong>与 <code>vello</code> 和 <code>parley</code> 相关的一些问题</strong>。</li></ol><p><strong>基于这些信息以及我对这两个库的了解：</strong></p><ul><li><strong>Vello</strong>：是一个高性能的 2D / 3D 渲染器，主要负责<strong>图形的实际绘制和渲染</strong>。</li><li><strong>Parley</strong>：是一个 Rust 编写的<strong>文本布局和塑形库</strong>。它负责处理字体、文本分段、字形选择、字形定位等，将原始文本转换为可以被渲染器（如 Vello）绘制的几何图形和命令。</li></ul><p>因此，更准确的关系是：</p><ul><li><strong>Vello 负责渲染</strong>（绘制像素到屏幕上）。</li><li><strong>Parley 负责文本的准备工作</strong>（计算文本的形状和位置，使其可以被渲染）。</li></ul><p>在现代图形渲染中，文本渲染是一个复杂的过程，通常需要一个独立的文本布局库来处理。<strong>Vello 作为一个渲染器，需要一个文本布局库来为其提供绘制文本所需的几何信息。而 Parley 就是这样一个库。</strong></p><p>所以，它们是<strong>协作关系</strong>：<code>Vello</code> 需要 <code>Parley</code> 来高效地渲染高质量的文本。<strong><code>Parley</code> 本身不依赖于 <code>Vello</code> 来执行其布局功能，但如果目标是使用 <code>Vello</code> 来渲染文本，那么它们通常会一起被使用。</strong></p><p><code>Leo Kettmeir</code> 提到的“理解 <code>vello/parley</code> 的一些事情”很可能就是在用 <code>Vello</code> 渲染由 <code>Parley</code> 布局的文本时，如何有效地集成和协调这两个库。</p><hr><p><strong>User</strong></p><p>parley和vello是独立的？</p><hr><p><strong>Cursor</strong></p><p>是的，根据它们的功能和设计理念，<strong><code>parley</code> 和 <code>vello</code> 在项目层面上是独立的。</strong></p><ul><li><strong><code>vello</code></strong> 专注于高性能的 2D / 3D 图形<strong>渲染</strong>。</li><li><strong><code>parley</code></strong> 专注于高质量的<strong>文本布局和塑形</strong>。</li></ul><p>这意味着：</p><ol><li><strong><code>parley</code> 可以在没有 <code>vello</code> 的情况下工作</strong>：你可以使用 <code>parley</code> 来计算文本的布局和字形信息，然后将这些信息传递给<strong>任何其他渲染器</strong>（不一定是 <code>vello</code>）进行绘制。例如，你可以用 <code>parley</code> 为一个基于 OpenGL 或 WebGPU 的自定义渲染器准备文本。</li><li><strong><code>vello</code> 可以在没有 <code>parley</code> 的情况下工作</strong>：<code>vello</code> 可以渲染任何 2D 图形（路径、形状、图像等），而不仅仅是文本。如果你不需要渲染文本，或者使用另一个文本布局库，<code>vello</code> 也能独立完成其渲染任务。</li></ol><p>然而，在实际应用中，尤其是在构建需要渲染文本的复杂用户界面或图形应用时，它们经常被<strong>一起使用</strong>，因为它们的功能是互补的。<code>parley</code> 负责“告诉”<code>vello</code> 如何绘制文本，而 <code>vello</code> 负责实际的绘制。</p><p>所以，它们是<strong>独立的库，但经常作为一套解决方案中的不同组件协同工作。</strong></p><hr><p><strong>User</strong></p><p>parley 可以在没有 vello 的情况下工作：你可以使用 parley 来计算文本的布局和字形信息，然后将这些信息传递给任何其他渲染器（不一定是 vello）进行绘制。例如，你可以用 parley 为一个基于 OpenGL 或 WebGPU 的自定义渲染器准备文本。</p><p>渲染器和排版引擎，parley依赖字体引擎吧，渲染侵权</p><hr><p><strong>Cursor</strong></p><p>您非常敏锐，问到了关键点！</p><p>是的，<strong><code>parley</code> (作为排版引擎/文本布局和塑形库) 确实会依赖一个“字体引擎”。</strong></p><h3 id=字体引擎-font-engine-是什么>字体引擎 (Font Engine) 是什么？</h3><p>在图形和文本渲染的语境中，“字体引擎”或更精确地说是“字体塑形引擎 (font shaping engine)”和“字体光栅化引擎 (font rasterizer)”是指处理字体文件（如 <code>.ttf</code>、<code>.otf</code> 等）并从中提取必要信息以进行文本渲染的库。它的主要功能包括：</p><ol><li><strong>字体加载和解析：</strong> 读取字体文件，解析其内部的各种表（例如字形数据、度量信息、OpenType 特性等）。</li><li><strong>字形选择和塑形 (Glyph Selection and Shaping)：</strong> 根据输入的文本字符序列，选择正确的字形（例如，处理连字、变体字形、上下文替换等），并计算它们的精确位置（包括字距调整 Kern）。这对于支持复杂文字（如阿拉伯语、印地语等）尤为关键。著名的 <code>HarfBuzz</code> 就是一个广泛使用的开源字体塑形引擎。</li><li><strong>字形轮廓提取：</strong> 提供字形（字符图形）的矢量轮廓数据，这些数据随后可以被光栅化（转换为像素）。</li><li><strong>字体度量：</strong> 提供字体和特定字形的大小、行高、基线等度量信息。</li></ol><h3 id=parley-与字体引擎的关系><code>parley</code> 与字体引擎的关系：</h3><p><code>parley</code> 的任务是“文本布局和塑形”。要完成这个任务，它<strong>必须知道每个字符应该长什么样，以及它们应该如何相对放置才能形成正确的文字。</strong> 这些信息不是 <code>parley</code> 自己凭空产生的，而是需要从字体文件中“读取”和“计算”出来的。</p><ul><li><strong><code>parley</code> 会调用字体引擎</strong>来加载字体、进行字形塑形（例如，将“f”和“i”组合成“ﬁ”连字，或者处理不同语言的复杂排版规则），并获取每个字形的大小和位置信息。</li><li>有了这些字形信息后，<code>parley</code> 才能进一步进行<strong>更高级的文本布局</strong>，例如：<ul><li>将文本折行。</li><li>处理文本对齐（左对齐、右对齐、居中）。</li><li>计算文本块的整体尺寸。</li><li>处理双向文本（如从右到左的阿拉伯语）。</li></ul></li></ul><p>所以，可以说 <strong><code>parley</code> 依赖于一个底层字体引擎来获取和处理字形数据，然后在其之上构建复杂的文本布局逻辑。</strong> 这是一种分层的依赖关系。</p><hr><p><strong>User</strong></p><p>将“f”和“i”组合成“ﬁ”连字？fi直接fi不就行了，为什么叫连字？</p><hr><p><strong>Cursor</strong></p><p>这是一个关于<strong>排版和字体设计</strong>的非常好的问题！“f”和“i”组合成“ﬁ”被称为<strong>连字（ligature）</strong>，而不是简单地并排放置，是因为在某些字体和排版规则下，直接将“f”和“i”并排放置会产生视觉上的不协调或缺陷。</p><p>让我们来详细解释一下：</p><h3 id=为什么需要连字>为什么需要连字？</h3><p>在许多字体中，尤其是带有<strong>衬线（serif）<strong>的字体，字母 <code>f</code> 的</strong>横笔（crossbar）<strong>或</strong>钩部（hook）<strong>会向右延伸。如果 <code>f</code> 后面紧跟着 <code>i</code> 或 <code>l</code> 这样的字母（它们的点或垂直笔画很窄），<code>f</code> 的横笔可能会与 <code>i</code> 的点或 <code>l</code> 的顶端</strong>发生碰撞或视觉上的重叠</strong>。</p><p>想象一下，如果把 <code>f</code> 和 <code>i</code> 直接挨在一起：</p><ul><li><code>f</code> 的横笔可能会伸到 <code>i</code> 的上方，看起来像撞到了 <code>i</code> 的点。</li><li>两个字母之间的间距（字距 kern）可能看起来不自然，导致视觉上的“缝隙”或“挤压”。</li></ul><p><strong>“ﬁ”这个连字就是为了解决这个问题而设计的。</strong> 它是一个<strong>新的、单一的字形（glyph）</strong>，专门用来替代 <code>f</code> 和 <code>i</code> 这两个单独的字形序列。在这个连字中，<code>f</code> 和 <code>i</code> 的笔画会被重新设计和连接，以确保它们在视觉上<strong>流畅、和谐地结合在一起</strong>，避免碰撞和不协调的间距。</p><h3 id=连字的作用>连字的作用：</h3><ol><li><strong>改善视觉效果：</strong> 这是最主要的原因。连字使文本看起来更美观、更专业，提高阅读的流畅度。</li><li><strong>避免笔画冲突：</strong> 解决某些特定字母组合在视觉上可能出现的冲突问题。</li><li><strong>遵循排版传统：</strong> 在传统的活字印刷时代，连字是为了物理上方便铸造和排列，以及解决类似笔画冲突的问题而产生的。现代数字排版继承了这一传统，并将其作为一种提升视觉质量的手段。</li></ol><h3 id=例子>例子：</h3><p>除了 <code>ﬁ</code> 之外，常见的连字还有：</p><ul><li><code>fl</code> → <code>ﬂ</code></li><li><code>ff</code> → <code>ﬀ</code></li><li><code>ffi</code> → <code>ﬃ</code></li><li><code>ffl</code> → <code>ﬄ</code></li><li>在某些字体和语言中，还会有更复杂的连字，例如在德语中，<code>ſ</code> 和 <code>t</code> 可能会形成连字 <code>ſt</code>。</li></ul><p>在现代数字排版中，是否显示连字通常由字体本身包含的 OpenType 特性决定，并且可以通过排版软件或 CSS 属性（如 <code>font-feature-settings</code> 或 <code>font-variant-ligatures</code>）来控制开启或关闭。当 <code>parley</code> 这样的排版引擎处理文本时，它会识别这些需要连字的字符序列，并根据字体的规则，选择并渲染相应的连字字形。</p><p>所以，“fi”直接“fi”确实可以，但从<strong>排版美学和视觉舒适度</strong>的角度来看，“ﬁ”连字是更优雅和专业的处理方式，它解决的是两个独立字形在物理空间上靠近时可能出现的视觉冲突。</p><hr><p><strong>User</strong></p><p>渲染器的任务是给应用一个画布，而图形API的实现是wgpu封装平台差异API，</p><hr><p><strong>Cursor</strong></p><p>您描述的这个关系非常准确，但我们可以再稍微细化一下，确保每个概念都清晰。</p><h3 id=渲染器-renderer-的任务>渲染器 (Renderer) 的任务：</h3><ul><li><strong>给应用一个画布 (Canvas)</strong>：这是非常形象的说法。渲染器确实为应用程序提供了一个可以“画东西”的抽象表面。应用程序通过调用渲染器提供的 API，描述它想要绘制的图形内容（比如一个矩形、一个圆、一段文本、一张图片等）。</li><li><strong>将抽象的绘制指令转化为具体的像素输出</strong>：渲染器最核心的任务是接收这些高层次的绘制指令，然后利用底层的图形硬件和 API，将这些指令最终转化为屏幕上可见的<strong>像素（pixels）</strong>。这包括：<ul><li><strong>光栅化 (Rasterization)</strong>：将矢量图形（如线条、形状）转换为像素。</li><li><strong>着色 (Shading)</strong>：计算每个像素的颜色、光照、纹理等。</li><li><strong>合成 (Compositing)</strong>：将多个图层或元素组合在一起。</li><li><strong>与 GPU 交互</strong>：高效地将数据和指令发送到 GPU 进行并行处理。</li></ul></li></ul><p>例如，在您的例子中，<code>vello</code> 就是一个渲染器。它接受类似路径、图层等高级描述，然后利用 GPU 将其渲染成最终图像。</p><h3 id=图形-api-graphics-api-的实现>图形 API (Graphics API) 的实现：</h3><ul><li><strong><code>wgpu</code> 封装平台差异 API</strong>：这部分描述得非常到位。<code>wgpu</code> (以及 DirectX, OpenGL, Vulkan, Metal) 是<strong>低级图形编程接口</strong>。它们不直接提供“画一个按钮”这样的高级功能，而是提供一系列用于管理 GPU 资源、设置渲染管线、发送绘制命令等底层操作的函数。<ul><li><strong>平台差异：</strong> 不同的操作系统或硬件提供不同的底层图形 API（例如 Windows 上的 DirectX，macOS/iOS 上的 Metal，Linux/Android 上的 Vulkan/OpenGL ES）。</li><li><strong><code>wgpu</code> 的作用：</strong> <code>wgpu</code> 的设计目标就是提供一个<strong>跨平台、统一的 API</strong>，它在内部将这些统一的指令<strong>翻译和映射</strong>到各个平台原生的底层图形 API 上。这样，开发者只需要编写一套基于 <code>wgpu</code> 的代码，就可以在不同平台上运行，而无需为每个平台编写不同的图形代码。</li></ul></li></ul><h3 id=总结关系>总结关系：</h3><p>可以这样理解：</p><ol><li><strong>应用程序 (Application)</strong>：希望在屏幕上显示内容。</li><li><strong>渲染器 (Renderer) - 例如 <code>vello</code></strong>：作为应用程序和底层图形系统之间的“中间人”。它提供更高级、更易用的绘图接口给应用程序，并将应用程序的绘图请求<strong>翻译</strong>成一系列底层的图形 API 调用。</li><li><strong>图形 API (Graphics API) - 例如 <code>wgpu</code></strong>：作为渲染器和硬件之间的桥梁。<code>wgpu</code> 提供一个抽象层，将渲染器生成的统一指令<strong>映射</strong>到各个特定平台（如 Windows, macOS, Linux）的<strong>原生图形驱动程序和硬件</strong>能够理解的指令。</li><li><strong>底层图形驱动程序 / 硬件 (Graphics Driver / GPU)</strong>：最终执行渲染计算，将像素绘制到屏幕上。</li></ol><p>所以，您的理解是完全正确的。渲染器提供了高层抽象和功能，而图形 API（以及 <code>wgpu</code> 这样的封装）则负责将这些高层请求有效地传递给底层硬件，并处理跨平台的兼容性问题。</p><hr><p><strong>User</strong></p><p>它们不直接提供“画一个按钮”这样的高级功能</p><p>渲染器也不提供画，xilem的层面才有按钮的这个概念</p><hr><p><strong>Cursor</strong></p><p>您说得非常对，这是一个很重要的澄清和深入！</p><p><strong>渲染器通常不直接提供“画一个按钮”这样的高级 UI 组件功能。</strong> 渲染器（如 <code>vello</code>）关注的是<strong>如何高效地绘制基本的图形原语</strong>：点、线、三角形、路径、文本、图像等。它关心的是像素的生成和呈现，而不是这些像素组合起来形成的更高层次的交互式 UI 元素。</p><p>“按钮”这个概念，以及“用户界面”中的其他组件（如文本输入框、滑块、复选框等），是在<strong>更高级的 UI 框架或工具包层面</strong>才出现的。</p><p>您提到的 <strong><code>xilem</code></strong> 正是属于这个层面。</p><ul><li><strong><code>xilem</code> 是一个 UI 框架（或 GUI 工具包）</strong>。它的任务是：<ul><li><strong>提供高级的 UI 组件</strong>：它提供“按钮”、“文本框”等抽象概念，开发者可以直接使用这些组件来构建用户界面。</li><li><strong>管理用户交互</strong>：它处理用户的输入（鼠标点击、键盘输入），并将这些事件映射到 UI 组件的相应行为上。</li><li><strong>管理组件状态和布局</strong>：它负责计算组件在屏幕上的位置和大小，并根据应用逻辑更新组件的状态。</li><li><strong>将 UI 组件拆解为渲染器可理解的指令</strong>：<code>xilem</code> 这样的 UI 框架在内部会将一个“按钮”这样的抽象概念，<strong>分解成渲染器可以理解的、更低级的绘图原语指令</strong>。例如，一个按钮可能最终被分解为：<ul><li>一个带圆角的矩形（背景）。</li><li>一段居中的文本（按钮标签）。</li><li>一些阴影或高光效果。</li><li>当鼠标悬停或点击时，改变颜色或形状。</li></ul></li></ul></li></ul><p>所以，您的理解非常精准：</p><ul><li><strong>渲染器（如 <code>vello</code>）</strong>：负责**“画”** 的底层机制。它不知道什么是“按钮”，它只知道如何画一个圆角矩形和一段文本。</li><li><strong>UI 框架（如 <code>xilem</code>）</strong>：负责**“构建”** UI。它知道什么是“按钮”，它会将“画一个按钮”的请求分解成渲染器能处理的底层绘图指令，并处理用户交互。</li></ul><p>它们是不同抽象层次上的组件，共同构建了现代图形用户界面。</p><hr><p><strong>User</strong></p><p>UI 框架（如 xilem）：负责“构建” UI。它知道什么是“按钮”，它会将“画一个按钮”的请求分解成渲染器能处理的底层绘图指令，并处理用户交互。</p><p>你会如何分解一个按钮为绘图指令？</p><hr><p><strong>Cursor</strong></p><p>这是一个很棒的问题，因为它展现了 UI 框架如何将抽象概念转化为具体的底层指令。</p><p>一个 UI 框架（如 <code>xilem</code>）会将一个“按钮”这样的高级概念，分解成一系列渲染器（如 <code>vello</code>）能够理解和执行的<strong>基本绘图指令</strong>。这个分解过程涉及按钮的<strong>视觉元素</strong>、<strong>交互状态</strong>以及对应的<strong>渲染器原语</strong>。</p><h3 id=如何分解一个按钮的绘图指令>如何分解一个按钮的绘图指令？</h3><p>我们以一个简单的按钮为例，它有一个背景、一段文字和可能有的边框。</p><p><strong>1. 识别按钮的视觉元素：</strong></p><ul><li><strong>背景 (Background)：</strong> 通常是一个矩形，可能带有圆角。</li><li><strong>文本/标签 (Text Label)：</strong> 显示在按钮上的文字（例如“点击我”）。</li><li><strong>边框 (Border)：</strong> 围绕背景的线条。</li><li><strong>阴影 (Shadows)：</strong> 增加立体感（可选）。</li></ul><p><strong>2. 考虑按钮的交互状态：</strong></p><p>一个按钮通常有不同的状态，每种状态可能对应不同的视觉表现：</p><ul><li><strong>正常状态 (Normal State)：</strong> 默认外观。</li><li><strong>悬停状态 (Hover State)：</strong> 鼠标指针移到按钮上时（例如背景颜色变浅）。</li><li><strong>按下状态 (Pressed/Active State)：</strong> 按钮被点击时（例如背景颜色变深，看起来像是被“按下去”）。</li><li><strong>禁用状态 (Disabled State)：</strong> 按钮不可用时（例如灰显）。</li></ul><p><strong>3. 将视觉元素和状态转换为渲染器可理解的底层指令：</strong></p><p>UI 框架会根据按钮的当前状态和样式定义，向渲染器发出以下类型的指令：</p><h4 id=a-绘制背景>A. 绘制背景：</h4><ul><li><strong>指令类型：</strong> 绘制一个填充的形状（通常是矩形或圆角矩形）。</li><li><strong>渲染器原语：</strong><ul><li><code>draw_rounded_rectangle(x, y, width, height, border_radius, fill_color)</code></li><li><code>draw_rectangle(x, y, width, height, fill_color)</code> (如果不需要圆角)</li></ul></li><li><strong>参数：</strong><ul><li><code>x, y, width, height</code>：按钮的位置和尺寸。</li><li><code>border_radius</code>：圆角半径（如果适用）。</li><li><code>fill_color</code>：按钮背景的颜色。这个颜色会根据按钮的<strong>当前状态</strong>（正常、悬停、按下、禁用）而变化。例如，正常时是蓝色，悬停时是浅蓝色，按下时是深蓝色。</li></ul></li></ul><h4 id=b-绘制文本标签>B. 绘制文本标签：</h4><ul><li><strong>指令类型：</strong> 绘制文本。</li><li><strong>渲染器原语：</strong><ul><li><code>draw_text(text_string, font, font_size, text_color, text_x, text_y, alignment)</code></li></ul></li><li><strong>参数：</strong><ul><li><code>text_string</code>：按钮上显示的文字。</li><li><code>font</code>：字体家族和样式。</li><li><code>font_size</code>：字体大小。</li><li><code>text_color</code>：文字颜色。同样，这个颜色可能根据按钮的<strong>当前状态</strong>而变化（例如，禁用时文字颜色变灰）。</li><li><code>text_x, text_y</code>：文字的位置。UI 框架需要计算文字在按钮内部居中的精确坐标，这可能涉及调用**排版引擎（如 <code>parley</code>）**来获取文本的度量信息。</li><li><code>alignment</code>：文字的对齐方式（例如居中）。</li></ul></li></ul><h4 id=c-绘制边框可选>C. 绘制边框（可选）：</h4><ul><li><strong>指令类型：</strong> 绘制一个描边的形状。</li><li><strong>渲染器原语：</strong><ul><li><code>stroke_rounded_rectangle(x, y, width, height, border_radius, border_color, border_width)</code></li></ul></li><li><strong>参数：</strong><ul><li><code>border_color</code>：边框颜色。</li><li><code>border_width</code>：边框宽度。</li></ul></li></ul><h4 id=d-绘制阴影可选>D. 绘制阴影（可选）：</h4><ul><li><strong>指令类型：</strong> 应用阴影效果。</li><li><strong>渲染器原语：</strong> 这通常不是一个独立的“绘制阴影”指令，而是与背景形状绘制指令结合，或者渲染器自身在后台处理的。<ul><li>例如，渲染器可能有一个 <code>apply_drop_shadow(offset_x, offset_y, blur_radius, shadow_color)</code> 的概念，这个效果会应用于紧随其后的绘制操作。</li></ul></li></ul><p><strong>4. 处理用户交互：</strong></p><p>除了绘制指令，UI 框架还要处理<strong>用户输入事件</strong>，这些事件会触发按钮状态的改变，进而影响绘制指令：</p><ul><li><strong>鼠标进入事件 (on_mouse_enter)：</strong> 当鼠标进入按钮区域时，UI 框架会改变按钮的状态为“悬停”，然后通知渲染器重新绘制按钮。</li><li><strong>鼠标离开事件 (on_mouse_leave)：</strong> 当鼠标离开按钮区域时，UI 框架会改变按钮状态为“正常”，然后通知渲染器重新绘制。</li><li><strong>鼠标按下/抬起事件 (on_mouse_down/on_mouse_up)：</strong> 改变按钮状态为“按下”或“正常”，并最终触发按钮的“点击”事件。</li></ul><p><strong>总结分解流程：</strong></p><p>UI 框架接收高层概念（“绘制一个按钮”）
↓</p><ol><li><strong>确定按钮的当前状态和样式。</strong></li><li><strong>计算所有视觉元素的几何信息</strong>（位置、大小、圆角等）。</li><li><strong>计算文本的布局</strong>（可能需要排版引擎如 <code>parley</code> 协助）。</li><li><strong>根据这些信息和状态，生成一系列底层的渲染器指令</strong>（如绘制填充矩形、绘制文本、绘制描边等），并附带相应的颜色、尺寸、字体等参数。</li><li><strong>将这些指令发送给渲染器</strong>，由渲染器负责最终的像素输出。</li><li><strong>监听用户输入事件</strong>，根据事件更新按钮状态，并重复上述绘制流程。</li></ol><hr><p><strong>User</strong></p><p>text_x, text_y：文字的位置。UI 框架需要计算文字在按钮内部居中的精确坐标，这可能涉及调用排版引擎（如 parley）来获取文本的度量信息。</p><p>这是什么意思？</p><hr><p><strong>Cursor</strong></p><p>好的，这句话解释了为什么 UI 框架在绘制按钮中的文字时，需要排版引擎（如 <code>parley</code>）的帮助。</p><p><strong>核心意思：</strong></p><p>UI 框架要让按钮上的文字看起来“居中”（或其他你想要的对齐方式），它不能直接把文字的起始点设在按钮的中心。因为文字本身有宽度和高度，它需要知道这些尺寸，才能计算出文字“真正居中”时，它应该从哪里开始画。</p><p><strong>详细解释：</strong></p><ol><li><p><strong>UI 框架知道什么：</strong></p><ul><li>按钮的<strong>总宽度</strong>和<strong>总高度</strong>。</li><li>它想让文字<strong>居中</strong>显示。</li></ul></li><li><p><strong>UI 框架不知道什么（但需要排版引擎帮助）：</strong></p><ul><li><strong>文字的实际宽度：</strong> 不同的文字内容、字体、字号，其宽度是不同的。例如，“OK”和“取消”在相同字体字号下，宽度肯定不同。UI 框架需要知道“取消”这两个字实际有多宽。</li><li><strong>文字的实际高度：</strong> 同样，字体和字号会影响文字的实际高度。即使是同一字号，不同字体的行高也可能不同。</li><li><strong>文字的基线位置：</strong> 在排版中，文字不是简单地从左上角开始画的，而是有一个“基线”（baseline）的概念。字形（如 <code>p</code>、<code>g</code>、<code>y</code>）的下降部分会低于基线，而上升部分会高于基线。UI 框架需要知道基线相对于文字整体高度的位置，才能准确垂直居中。</li></ul></li><li><p><strong>排版引擎（如 <code>parley</code>）的作用：</strong></p><ul><li>当 UI 框架把“请给我文字 &lsquo;取消&rsquo; 在指定字体和字号下的度量信息”这个请求发给 <code>parley</code> 时，<code>parley</code> 会：<ul><li>加载相应的字体。</li><li>计算“取消”这两个字在给定字体和字号下的<strong>总像素宽度</strong>。</li><li>计算文字的<strong>总像素高度</strong>（包括上升和下降部分）。</li><li>提供文字的<strong>基线信息</strong>（例如，基线距离文字顶部有多少像素）。</li></ul></li><li>这些就是文字的**“度量信息”**。</li></ul></li><li><p><strong>UI 框架如何计算 <code>text_x, text_y</code>：</strong></p><ul><li>有了这些度量信息后，UI 框架就能进行计算了：<ul><li><code>text_x</code> (水平位置)：<code>按钮中心X坐标 - (文字宽度 / 2)</code></li><li><code>text_y</code> (垂直位置)：<code>按钮中心Y坐标 - (文字高度 / 2) + 文字基线偏移</code> (这样可以确保文字的视觉中心与按钮的垂直中心对齐)</li></ul></li></ul></li></ol><p><strong>举个例子：</strong></p><p>假设你有一个 100x40 像素的按钮，你想在上面居中显示“OK”。</p><ul><li>UI 框架知道按钮的中心点是 (50, 20)。</li><li>它向 <code>parley</code> 查询“OK”在当前字体下的度量信息。</li><li><code>parley</code> 返回说：“OK”的宽度是 30 像素，高度是 15 像素，基线距离顶部 12 像素。</li><li>UI 框架计算：<ul><li><code>text_x = 50 - (30 / 2) = 50 - 15 = 35</code></li><li><code>text_y = 20 - (15 / 2) + 12 = 20 - 7.5 + 12 = 24.5</code></li></ul></li><li>然后 UI 框架会指示渲染器在 (35, 24.5) 这个位置开始绘制“OK”文字。</li></ul><p>所以，这句话的意思是，UI 框架不能简单地猜文字的位置，它需要借助专业的排版引擎来<strong>精确测量文字的尺寸和布局特性</strong>，才能确保文字在按钮中被正确地居中或以其他指定方式对齐。</p><hr><p><strong>User</strong></p><p>“感知”、“认知”、“情绪”和“行动”一体化，身体心理一体化训练</p><hr><p><strong>Cursor</strong></p><p>您提出的“感知”、“认知”、“情绪”和“行动”一体化，以及“身体心理一体化训练”这两个概念，与之前文章中“纠缠大脑”的观点以及现代神经科学和心理学的一些发展趋势高度契合。</p><h3 id=感知认知情绪和行动一体化>“感知”、“认知”、“情绪”和“行动”一体化</h3><p>文章中对传统模块化观点的批判，正是支持这种“一体化”观点的核心。</p><ul><li><strong>传统观点（模块化）：</strong> 认为大脑和心智可以被清晰地划分为独立的模块，每个模块负责特定的功能，例如：<ul><li><strong>感知：</strong> 负责接收和解释感官信息（视觉、听觉、触觉等）。</li><li><strong>认知：</strong> 负责思维、学习、记忆、决策、语言等高级心智活动。</li><li><strong>情绪：</strong> 负责情感体验和表达（快乐、悲伤、恐惧、愤怒等）。</li><li><strong>行动：</strong> 负责运动控制和身体行为。</li></ul></li><li><strong>“纠缠大脑”/一体化观点：</strong> 挑战了这种清晰的划分，认为这些功能在大脑中是高度<strong>交织、重叠、动态互动</strong>的。<ul><li><strong>感知与认知：</strong> 我们对世界的感知不是被动接收，而是受到认知（如注意力、预期、记忆）的强烈影响。反之，感知又为认知提供基础。例如，你对一个模棱两可的图像的感知，会随着你对其背后故事的认知变化而改变。</li><li><strong>认知与情绪：</strong> 情绪深刻影响我们的认知过程（如判断、记忆、决策）。例如，恐惧会影响你的注意力和对威胁的评估；积极情绪则可能促进创造性思维。反之，对事件的认知评估也会引发或调节情绪。</li><li><strong>情绪与行动：</strong> 情绪是行动的强大驱动力（例如，恐惧引发逃跑，愤怒引发攻击）。行动也反过来影响情绪（例如，积极的身体姿态可以改善情绪）。</li><li><strong>行动与感知/认知：</strong> 我们的行动（如眼球运动、身体姿势）会主动塑造我们接收到的感知信息。运动学习也涉及复杂的认知和感知反馈循环。</li></ul></li></ul><p><strong>这种一体化并非仅仅是功能上的关联，而是指这些功能在大脑神经网络中是</strong>分布式、重叠且动态协作<strong>的。没有一个孤立的脑区“拥有”某个功能，而是由跨多个区域的神经元群体在特定情境下形成的临时“联盟”共同完成的。</strong></p><h3 id=身体心理一体化训练>“身体心理一体化训练”</h3><p>基于这种“感知、认知、情绪、行动一体化”以及“身心一体”的理解，<strong>“身体心理一体化训练”</strong>（或称身心合一训练、整体性训练）成为一种自然而然的、更有效的干预和发展方法。</p><p>它强调身体和心理是不可分割的整体，一个方面的变化会影响另一个方面。这种训练不再孤立地解决心理问题或身体问题，而是通过整合身体和心理的练习，促进整体的健康和平衡。</p><p>常见的“身体心理一体化训练”例子包括：</p><ol><li><strong>正念（Mindfulness）和冥想：</strong> 通过专注于呼吸、身体感觉、声音等当下体验，训练对注意力和情绪的觉察与调节，从而影响心理状态。</li><li><strong>瑜伽、太极、气功：</strong> 这些练习结合了身体姿势、呼吸控制和专注力，促进身心连接、放松、力量和柔韧性，改善情绪平衡和压力管理。</li><li><strong>身体扫描（Body Scan Meditation）：</strong> 引导注意力逐一扫描身体各部位的感觉，提升对身体的觉察，有助于缓解焦虑和压力。</li><li><strong>运动和体育活动：</strong> 规律的体育锻炼不仅增强体质，还能有效缓解压力、改善情绪，提升认知功能（如记忆力和注意力），因为运动会影响神经递质、脑源性神经营养因子等。</li><li><strong>舞蹈和肢体表达：</strong> 通过身体的律动和姿态来表达情绪、释放压力，或探索自我，增强身心连接。</li><li><strong>生物反馈（Biofeedback）：</strong> 学习通过意识控制通常无意识的生理功能（如心率、肌肉张力、皮肤温度），从而调节情绪和压力。</li><li><strong>情绪释放技术：</strong> 结合身体动作（如呼吸、捶打）来释放被压抑的情绪。</li></ol><p><strong>“身体心理一体化训练”的优势在于：</strong></p><ul><li>它认识到心理问题往往有身体上的表现，身体状态也影响心理。</li><li>通过多维度的干预（同时作用于身体感受、情绪、认知模式、行为），可以更全面、更有效地促进改变。</li><li>它帮助个体提升对自身内部状态的觉察能力（内感受），从而更好地管理情绪和压力。</li></ul><p>这种训练方法与文章中“纠缠大脑”的理念不谋而合，都强调了将人视为一个复杂、动态且高度互联的整体，而不是一系列孤立部分的简单相加。</p><hr><p><strong>User</strong></p><p>有哪些网站或者开源项目可以可视化字体文件</p><hr><p><strong>Cursor</strong></p><p>要可视化字体文件，可以从两个主要方面入手：</p><ol><li><strong>查看字体文件的内部结构和字形细节：</strong> 了解字体包含哪些字形、OpenType 特性、度量信息等。</li><li><strong>查看字体在实际文本中的渲染效果：</strong> 测试字体在不同字号、文字组合和排版环境下的显示效果。</li></ol><p>以下是一些常用的网站和开源项目：</p><h3 id=网站在线工具-online-tools>网站/在线工具 (Online Tools)</h3><p>这些工具通常无需安装，直接在浏览器中使用，方便快捷。</p><ol><li><p><strong>FontDrop!</strong></p><ul><li><strong>功能：</strong> 这是一个非常强大的在线工具，你可以直接把字体文件拖放到网页上，它会解析字体文件并显示所有内部信息：包括字体名称、版本、版权信息、各种 OpenType 表格、每个字形的详细视图（包括轮廓）、以及连字（ligatures）、字距调整（kerning）等 OpenType 特性的演示。</li><li><strong>特点：</strong> 适合深入了解字体文件的技术细节。</li><li><strong>链接：</strong> <code>https://fontdrop.info/</code></li></ul></li><li><p><strong>Google Fonts</strong></p><ul><li><strong>功能：</strong> 虽然它主要是一个字体库，但它提供了强大的预览功能。你可以输入自定义文本，选择不同的字号、粗细、样式，实时查看字体渲染效果。它还有测试页面，可以展示所有字形。</li><li><strong>特点：</strong> 适合查看字体在网页上的实际表现，但不能深入查看文件内部结构。</li><li><strong>链接：</strong> <code>https://fonts.google.com/</code></li></ul></li><li><p><strong>Font Squirrel - Webfont Generator / Tester</strong></p><ul><li><strong>功能：</strong> 除了生成网页字体外，它也提供了预览功能，让你可以在线输入文本，选择字体，查看在不同浏览器环境下的渲染效果。</li><li><strong>特点：</strong> 适合网页设计师和开发者测试字体。</li><li><strong>链接：</strong> <code>https://www.fontsquirrel.com/tools/webfont-generator</code> (或其网站上的其他预览工具)</li></ul></li></ol><h3 id=桌面应用程序开源项目-desktop-applicationsopen-source-projects>桌面应用程序/开源项目 (Desktop Applications/Open-Source Projects)</h3><p>这些工具通常功能更强大，适合字体设计师、开发者或对字体有更深入需求的用户。</p><ol><li><p><strong>FontForge</strong></p><ul><li><strong>类型：</strong> 开源字体编辑软件。</li><li><strong>功能：</strong> 极其强大和全面。你可以打开任何字体文件（TrueType, OpenType, PostScript 等），查看并编辑单个字形的矢量轮廓、度量信息、Unicode 映射、OpenType 特性表等。它提供了非常详细的字形网格视图。</li><li><strong>特点：</strong> 适合进行字体设计、修改和深入分析。功能强大但界面可能略显复杂。</li><li><strong>链接：</strong> <code>https://fontforge.org/</code></li></ul></li><li><p><strong>Glyphr Studio</strong></p><ul><li><strong>类型：</strong> 在线（或桌面版）字体编辑器。</li><li><strong>功能：</strong> 介于在线预览和 FontForge 之间，提供了一个相对友好的图形界面来创建和编辑字体。你可以查看字形、调整间距、预览文本等。</li><li><strong>特点：</strong> 适合初学者尝试字体设计和可视化。</li><li><strong>链接：</strong> <code>https://www.glyphrstudio.com/</code></li></ul></li><li><p><strong>HarfBuzz Utilities (<code>hb-view</code> 等)</strong></p><ul><li><strong>类型：</strong> 开源文本塑形引擎及其命令行工具。</li><li><strong>功能：</strong> <code>HarfBuzz</code> 本身是处理复杂文本布局（如阿拉伯语、印地语的连字和字形变换）的底层库。它附带的命令行工具，例如 <code>hb-view</code>，可以让你指定字体和文本，然后它会输出经过塑形处理后的字形序列及其位置，甚至可以生成 SVG 或图片来可视化结果。</li><li><strong>特点：</strong> 更偏向开发者和字体工程师，用于调试和理解文本塑形过程。</li><li><strong>链接：</strong> <code>https://github.com/harfbuzz/harfbuzz</code> (你需要从源代码编译或查找相关发行版中的工具)</li></ul></li><li><p><strong>FontTools / TTX</strong></p><ul><li><strong>类型：</strong> Python 库。</li><li><strong>功能：</strong> FontTools 允许你以编程方式读取、编辑和写入 TrueType 和 OpenType 字体文件。其中的 <code>ttx</code> 工具可以将字体文件转换为易于阅读的 XML 格式，让你能够“看到”字体文件内部所有表格和数据。虽然不是图形界面，但它是一种非常详细的“文本可视化”。</li><li><strong>特点：</strong> 适合希望以编程方式分析或处理字体的开发者。</li><li><strong>链接：</strong> <code>https://github.com/fonttools/fonttools</code></li></ul></li></ol><p>根据您的需求，如果只是想快速查看字体文件的内容和预览效果，<strong>FontDrop!</strong> 是一个很好的起点。如果想深入了解或编辑字体，<strong>FontForge</strong> 是最强大的开源选择。</p><hr><p><strong>User</strong></p><p>FontDrop!
?
Drop your font file!
未选择任何文件Or choose a file
HarmonyOS_Regular.ap.woff2, 12.36 kB
You see HarmonyOS Sans SC
Name: HarmonyOS Sans SC. Version 1.0
© Copyright 2021 Huawei Device Co., Ltd. All Rights Reserved.</p><p>Support for 0 languages detected</p><p>Glyphs
Ligatures
OT
Text
Waterfall
Type Yourself
Data
The font HarmonyOS Sans SC contains 101 glyphs
Note: Glyphs shown here are not affected if you switch on/off detected OpenType features or font variations settings (Variable Fonts).</p><p>Using FontDrop! regulary? Consider supporting the maintenance and development with a small donation!</p><p>More FontDrop! tools: Compare and Language Report</p><p>A project by Viktor Nübel Type Design in collaboration with Clemens Nübel.
Follow on Mastodon. Privacy Policy
Top
name
undefined
unicode
5B85 ↗
index
1
xMin
72
xMax
920
yMin
-56
yMax
853
advanceWidth
1000
leftSideBearing
0
Contours data
x=185 y=649
x=185 y=534
x=105 y=534
x=105 y=726
x=474 y=726
x=438 y=801
x=423 y=826
x=501 y=853
x=524 y=812
x=566 y=726
x=904 y=726
x=904 y=529
x=824 y=529
x=824 y=649 x=811 y=123
x=811 y=171
x=812 y=180
x=812 y=198
x=898 y=178
x=893 y=118
x=890 y=90
x=887 y=53
x=884 y=15
x=858 y=-27
x=802 y=-48
x=752 y=-52
x=703 y=-56
x=639 y=-56
x=577 y=-56
x=526 y=-52
x=454 y=-47
x=393 y=12
x=393 y=84
x=393 y=225
x=77 y=203
x=72 y=280
x=393 y=303
x=393 y=446
x=163 y=422
x=155 y=498
x=308 y=511
x=652 y=552
x=776 y=574
x=790 y=500
x=686 y=481
x=477 y=456
x=477 y=309
x=914 y=340
x=920 y=261
x=477 y=231
x=477 y=98
x=477 y=57
x=502 y=29
x=539 y=26
x=601 y=22
x=632 y=22
x=662 y=22
x=724 y=26
x=757 y=29
x=790 y=42
x=804 y=69
x=808 y=97
×</p><p>这些又是什么？</p><hr><p><strong>Cursor</strong></p><p>您提供的这张图片和随后的文字，展示了<strong>FontDrop!</strong> 这个在线工具如何<strong>可视化一个字体文件中的单个字形（glyph）的详细信息，特别是其矢量轮廓数据。</strong></p><h3 id=图片中文汉字宅的字形轮廓>图片（中文汉字“宅”的字形轮廓）</h3><p>这张图片清晰地展示了字体文件中一个汉字“宅”的<strong>矢量轮廓（outline）</strong>。</p><ul><li><strong>灰色填充区域：</strong> 表示字形内部将被填充的区域。</li><li><strong>紫色线条：</strong> 是字形的<strong>轮廓路径（contour path）</strong>。</li><li><strong>蓝色点：</strong> 是**“在曲线上的点”（on-curve points）**，这些点是轮廓线段实际经过的位置。</li><li><strong>红色点：</strong> 是**“离曲线点”或“控制点”（off-curve points / control points）**，这些点不直接在轮廓线上，而是用来控制曲线的形状（通常是二次或三次贝塞尔曲线）。</li><li><strong>黑色箭头：</strong> 指示了路径的方向（通常是顺时针或逆时针，用于定义内部和外部轮廓）。</li><li><strong>水平线（Ascender, Caps, x-Height, Baseline, Descender）：</strong> 这些是**字体度量（font metrics）**中的重要基准线，它们定义了字母和字形在垂直方向上的标准高度，例如：<ul><li><code>Ascender</code>：上升字母（如英文 <code>h</code>）的最高点。</li><li><code>Caps</code>：大写字母的顶部。</li><li><code>x-Height</code>：小写字母 <code>x</code> 的高度。</li><li><code>Baseline</code>：文本的基础线，大多数字母都坐在这条线上。</li><li><code>Descender</code>：下降字母（如英文 <code>g</code>、<code>p</code>）的最低点。</li></ul></li></ul><h3 id=fontdrop-的文字输出分析-harmonyos_regularapwoff2-字体文件>FontDrop! 的文字输出（分析 <code>HarmonyOS_Regular.ap.woff2</code> 字体文件）</h3><p>这段文字是你在 FontDrop! 中拖入 <code>HarmonyOS_Regular.ap.woff2</code> 字体文件后，工具解析并显示出来的详细信息。它包括了字体的元数据和对特定字形（在这里是“宅”）的详细解析。</p><p>让我们逐一解释：</p><ol><li><p><strong><code>HarmonyOS_Regular.ap.woff2, 12.36 kB</code></strong></p><ul><li>这表示你上传的字体文件名为 <code>HarmonyOS_Regular.ap.woff2</code>，大小为 12.36 千字节。<code>woff2</code> 是一种用于网页的字体格式。</li></ul></li><li><p><strong><code>You see HarmonyOS Sans SC</code></strong></p><ul><li>这是工具识别出的字体的显示名称。</li></ul></li><li><p><strong><code>Name: HarmonyOS Sans SC. Version 1.0</code></strong></p><ul><li>字体的完整名称和版本信息。</li></ul></li><li><p><strong><code>© Copyright 2021 Huawei Device Co., Ltd. All Rights Reserved.</code></strong></p><ul><li>字体的版权信息，显示这是华为设备有限公司的字体。</li></ul></li><li><p><strong><code>Support for 0 languages detected</code></strong></p><ul><li>这可能表示 FontDrop! 的语言检测功能没有识别出该字体明确支持的 OpenType 语言脚本标记，或者该字体主要针对中文，而中文通常不是以“语言”标记来区分，而是直接通过 Unicode 字符集来支持。对于中文字体来说，这个显示“0 languages”是正常的。</li></ul></li><li><p><strong><code>Glyphs</code>, <code>Ligatures</code>, <code>OT</code>, <code>Text</code>, <code>Waterfall</code>, <code>Type Yourself</code>, <code>Data</code></strong></p><ul><li>这些是 FontDrop! 界面上的不同功能标签/视图，让你可以在不同方面查看字体。你当前查看的是“Data”标签下的内容。</li></ul></li><li><p><strong><code>The font HarmonyOS Sans SC contains 101 glyphs</code></strong></p><ul><li>这表示这个字体文件只包含了 101 个字形。对于中文字体来说，这个数字非常小，通常一个完整的中文字体会有几千甚至几万个汉字字形。这可能是一个精简版或特殊用途的字体包，只包含了最常用的字符或测试字符。</li></ul></li><li><p><strong><code>Note: Glyphs shown here are not affected if you switch on/off detected OpenType features or font variations settings (Variable Fonts).</code></strong></p><ul><li>一个提示，说明当前显示的字形数据是原始的，不受 OpenType 特性（如连字）或可变字体设置的影响。</li></ul></li><li><p><strong><code>A project by Viktor Nübel Type Design in collaboration with Clemens Nübel.</code></strong></p><ul><li>FontDrop! 工具的开发者信息。</li></ul></li><li><p><strong><code>Top</code></strong></p><ul><li>这是一个导航链接，回到页面顶部。</li></ul></li><li><p><strong>下方列表（从 <code>name: undefined</code> 到 <code>x=808 y=97</code>）：</strong></p><ul><li><p>这部分是关于你上传的字体文件中，具体某个字形（对应于图片中的汉字“宅”）的详细数据。</p></li><li><p><strong><code>name: undefined</code></strong>：</p><ul><li>这表示这个字形在字体内部没有一个明确的英文名称（例如“a”、“b”、“space”等）。对于中文字体中的汉字字形来说，这很常见，因为汉字数量庞大，通常不逐一命名。</li></ul></li><li><p><strong><code>unicode: 5B85 ↗</code></strong>：</p><ul><li>这个字形对应的 Unicode 编码是 <code>U+5B85</code>。你可以在 Unicode 字符表中查找，<code>5B85</code> 正是汉字“宅”的 Unicode 编码。<code>↗</code> 符号可能表示可以点击跳转到 Unicode 查询网站。</li></ul></li><li><p><strong><code>index: 1</code></strong>：</p><ul><li>这个字形在字体文件内部字形列表中的索引是 <code>1</code>。</li></ul></li><li><p><strong><code>xMin</code>, <code>xMax</code>, <code>yMin</code>, <code>yMax</code></strong>：</p><ul><li>这些是这个字形**边界框（bounding box）**的坐标。<ul><li><code>xMin</code>: 字形在水平方向上的最小 x 坐标。</li><li><code>xMax</code>: 字形在水平方向上的最大 x 坐标。</li><li><code>yMin</code>: 字形在垂直方向上的最小 y 坐标（注意，y 轴通常向上为正，所以最小值可能是负数，表示字形有下降部分）。</li><li><code>yMax</code>: 字形在垂直方向上的最大 y 坐标。</li></ul></li><li>结合图片看，<code>xMin</code> 是字形最左边的点，<code>xMax</code> 是最右边的点，<code>yMin</code> 是最下面的点（低于 Baseline），<code>yMax</code> 是最上面的点（低于 Ascender）。</li></ul></li><li><p><strong><code>advanceWidth: 1000</code></strong>：</p><ul><li><strong>字形前进宽度。</strong> 这是在绘制这个字形后，光标（下一个字形开始绘制的位置）应该向右移动多少个单位。在字体设计中，通常以 1000 个单位（font units）来衡量。这意味着这个“宅”字形在绘制后，会占用 1000 个单位的水平空间。</li></ul></li><li><p><strong><code>leftSideBearing: 0</code></strong>：</p><ul><li><strong>左侧字形边界。</strong> 这是字形的最左边与字形原点（通常是字形绘制开始的位置）之间的水平距离。<code>0</code> 表示字形从原点开始。</li></ul></li><li><p><strong><code>Contours data</code> (x=&mldr; y=&mldr;)</strong>：</p><ul><li>这是<strong>字形轮廓的详细点坐标数据</strong>。图片中的紫色线条和蓝色/红色点，就是由这些 <code>(x, y)</code> 坐标定义的。这些点按照一定的顺序连接起来，形成字形的封闭轮廓。红色点通常是控制点，蓝色点是路径上的点。</li></ul></li></ul></li></ol><p><strong>总结：</strong></p><p>这段文字是 <code>HarmonyOS Sans SC</code> 字体文件中，汉字“宅”的<strong>底层矢量数据表示</strong>，包括它的 Unicode 编码、在字体中的索引、边界尺寸、水平前进宽度，以及最重要的——构成其形状的<strong>所有点的精确坐标</strong>。图片则形象地展示了这些数据所描绘出的字形轮廓和其在字体度量线上的位置。</p><hr><p><strong>User</strong></p><p>那个黑色的箭头算什么？</p><hr><p><strong>Cursor</strong></p><p>图中的那个<strong>黑色的箭头</strong>指示的是字形轮廓的<strong>路径方向（Path Direction）</strong>。</p><p>在字体设计和矢量图形中，尤其是在定义复杂形状的轮廓时，路径的方向非常重要。它的主要作用是：</p><ol><li><p><strong>定义内部和外部轮廓（Hole Filling）：</strong></p><ul><li>在 TrueType 或 OpenType 字体中，一个字形可能由一个或多个闭合路径组成。</li><li><strong>通常，外部轮廓（即字形的整体形状）会以一个方向绘制</strong>（例如，顺时针）。</li><li><strong>而内部的“洞”或“空隙”的轮廓（例如汉字笔画中的封闭空间，或字母 <code>o</code> 的中间）则会以相反的方向绘制</strong>（例如，逆时针）。</li><li>渲染器会根据这些路径方向，利用“非零缠绕规则”（Non-Zero Winding Rule）或“偶奇缠绕规则”（Even-Odd Winding Rule）来判断哪些区域应该被填充，哪些区域是透明的“洞”。</li></ul></li><li><p><strong>保证正确渲染：</strong> 如果路径方向不正确，渲染器可能会错误地填充区域，导致字形显示不正常。</p></li></ol><p>所以，那个黑色的箭头表示它所在的这条轮廓线段是向某个特定方向延伸的，这对于正确解释和渲染整个字形至关重要。</p><hr><p><strong>User</strong></p><p>为什么毛哪里没有箭头</p><hr><p><strong>Cursor</strong></p><p>您观察得非常仔细！您说的没错，汉字“毛”的字形中，确实没有像“宅”字那样在内部有封闭的“空心”区域（也就是通常所说的“洞”）。</p><p>黑色的箭头主要用来指示<strong>字形轮廓的路径方向</strong>，这对于**区分字形的外部轮廓和内部的“洞”**至关重要。</p><ul><li><p><strong>“宅”字：</strong> 在它的上方有一个“宀”部首，这个部首在绘制时会形成一个封闭的笔画，其内部是透明的。为了告诉渲染器这个内部区域是“洞”而不是要填充的部分，字体文件会定义一个外部轮廓（比如顺时针）和一个内部轮廓（比如逆时针），并通过这些方向规则来区分。所以，您在“宅”字的内部看到了箭头。</p></li><li><p><strong>“毛”字：</strong> 仔细观察“毛”的字形，它虽然笔画复杂，但<strong>没有任何完全封闭的内部空间（“洞”）</strong>。所有笔画形成的灰色区域都是相互连接的，没有哪个部分被完全包围起来形成一个透明的“空洞”。</p></li></ul><p><strong>因此，由于“毛”字形内部没有需要通过反向路径来定义的“洞”，所以就没有必要显示内部的路径方向箭头。</strong> 字体可能只包含一个定义整体形状的外部轮廓，而对于单一的外部轮廓，许多可视化工具可能不会在路径中间显示箭头，或者只在起始点显示（如果它们显示的话），因为没有内部与外部之分，也就没有歧义。</p></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><div id=gitalk-container></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js></script><script src=https://cdn.jsdelivr.net/npm/blueimp-md5@2.18.0/js/md5.min.js></script><script>const gitalk=new Gitalk({clientID:"Ov23liqc7SD1bN7OvCI6",clientSecret:"7b0ed5cd67a344de02c2efded9da2dfb8ac14783",repo:"tannal.github.io",owner:"tannal",admin:["tannal"],distractionFreeMode:!1,id:md5(location.pathname),proxy:null});(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("gitalk-container").innerHTML="Gitalk comments not available by default when the website is previewed locally.";return}gitalk.render("gitalk-container")})()</script><footer class=site-footer><section class=copyright>&copy;
2024 -
2025 谭盟</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>